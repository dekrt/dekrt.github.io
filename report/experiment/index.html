<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>C语言实验报告 | dekrt's blog</title><meta name="keywords" content="报告 | report,答案 | answer"><meta name="author" content="dekrt"><meta name="copyright" content="dekrt"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="软件学院C语言程序设计实验报告">
<meta property="og:type" content="article">
<meta property="og:title" content="C语言实验报告">
<meta property="og:url" content="https://dekrt.cn/report/experiment/index.html">
<meta property="og:site_name" content="dekrt&#39;s blog">
<meta property="og:description" content="软件学院C语言程序设计实验报告">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s1.ax1x.com/2022/03/10/bhIu6J.png">
<meta property="article:published_time" content="2022-01-20T16:00:00.000Z">
<meta property="article:modified_time" content="2022-10-26T14:19:58.805Z">
<meta property="article:author" content="dekrt">
<meta property="article:tag" content="报告 | report">
<meta property="article:tag" content="答案 | answer">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s1.ax1x.com/2022/03/10/bhIu6J.png"><link rel="shortcut icon" href="https://cdn.luogu.com.cn/upload/image_hosting/7schyg4e.png"><link rel="canonical" href="https://dekrt.cn/report/experiment/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'C语言实验报告',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-10-26 22:19:58'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.0.0"><link rel="alternate" href="/atom.xml" title="dekrt's blog" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cdn.luogu.com.cn/upload/image_hosting/7schyg4e.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">21</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://s1.ax1x.com/2022/03/10/bhIu6J.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">dekrt's blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">C语言实验报告</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-01-20T16:00:00.000Z" title="发表于 2022-01-21 00:00:00">2022-01-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-10-26T14:19:58.805Z" title="更新于 2022-10-26 22:19:58">2022-10-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/report/">report</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">20.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>87分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="C语言实验报告"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/report/experiment/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/report/experiment/" itemprop="commentCount"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p><img src="/report/experiment/cover.png"></p>
<blockquote>
<p>由于使用pandoc进行 word to Markdown
的转化，部分代码的缩进与格式存在问题，正在逐步修正。</p>
</blockquote>
<span id="more"></span>
<h1 id="实验1-表达式和标准输入与输出实验">实验1
表达式和标准输入与输出实验</h1>
<h2 id="实验目的">1.1 实验目的</h2>
<p>（1）熟练掌握各种运算符的运算功能，操作数的类型，运算结果的类型及运算过程中的类型转换，重点是C语言特有的运算符，例如位运算符，问号运算符，逗号运算符等；熟记运算符的优先级和结合性。</p>
<p>（2）掌握getchar, putchar, scanf 和printf 函数的用法。</p>
<p>（3）掌握简单C程序（顺序结构程序）的编写方法。</p>
<h2 id="实验内容">1.2 实验内容</h2>
<h3 id="源程序改错">1 源程序改错</h3>
<p>下面给出了一个简单C语言程序例程，用来完成以下工作：</p>
<p>（1）输入华氏温度f，将它转换成摄氏温度c后输出；</p>
<p>（2）输入圆的半径值ｒ，计算并输出圆的面积ｓ；</p>
<p>（3）输入短整数ｋ、ｐ，将ｋ的高字节作为结果的低字节，ｐ的高字节作为结果的高字节，拼成一个新的整数，然后输出；</p>
<p>在这个例子程序中存在若干语法和逻辑错误。要求参照1.3和1.4的步骤对下面程序进行调试修改，使之能够正确完成指定任务。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PI 3.14159;</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">( <span class="keyword">void</span> )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="keyword">int</span> f ;</span><br><span class="line">   <span class="keyword">short</span> p, k ;</span><br><span class="line">   <span class="keyword">double</span> c, r, s ;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/* 任务1 */</span></span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">&quot;Input Fahrenheit: &quot;</span> ) ;</span><br><span class="line">   <span class="built_in">scanf</span>(“%d”, f ) ;</span><br><span class="line">   c = <span class="number">5</span>/<span class="number">9</span> * (f<span class="number">-32</span>) ;</span><br><span class="line">   <span class="built_in">printf</span>( “ \n %d (F) = %<span class="number">.2</span>f (C)\n\n ”, f, c ) ;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 任务2 */</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;input the radius r:&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%f&quot;</span>, &amp;r);</span><br><span class="line">    s = PI * r * r;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\nThe acreage is %.2f\n\n&quot;</span>,&amp;s);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 任务3 */</span></span><br><span class="line">    k = <span class="number">0xa1b2</span>, p = <span class="number">0x8432</span>;</span><br><span class="line">    newint = p&amp;<span class="number">0xff00</span>|k&gt;&gt;<span class="number">8</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;new int = %#x\n\n&quot;</span>,newint);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>解答：</strong></p>
<p>（1）错误修改：</p>
<ol type="1">
<li>第2行的符号常量定义后不能有分号，应改为</li>
</ol>
<p><code>#define PI 3.14159</code></p>
<ol start="2" type="1">
<li>第5行的f类型应该为double，应改为</li>
</ol>
<p><code>double f ;</code></p>
<ol start="3" type="1">
<li>第10行f的类型为double，应改为</li>
</ol>
<p><code>scanf("%lf",&amp;f);</code></p>
<ol start="4" type="1">
<li>第11行c的类型为double，应改为</li>
</ol>
<p><code>c = 1.0 * 5/9 * (f-32) ;</code></p>
<ol start="5" type="1">
<li>第12行c的类型为double，应改为</li>
</ol>
<p><code>printf( "\n %.2lf (F) = %.2lf (C)\n\n ", f, c ) ;</code></p>
<ol start="6" type="1">
<li>第15行r的类型为double，应改为</li>
</ol>
<p><code>scanf("%lf", &amp;r);</code></p>
<ol start="7" type="1">
<li>第17行存在printf语法错误，应改为</li>
</ol>
<p><code>printf("\nThe acreage is %.2lf\n\n",s)</code></p>
<ol start="8" type="1">
<li>第21行存在newint类型、算法错误，应改为</li>
</ol>
<p><code>int newint = (p&amp;0xff00) | ((k&amp;0xff00)&gt;&gt;8)
;</code></p>
<p>（2）错误修改后运行结果：</p>
<figure>
<img src="/report/experiment/b518c95736d79144b989857de34e3b34.png" alt="图1-1 程序改错题的程序运行结果示意图">
<figcaption aria-hidden="true">图1-1
程序改错题的程序运行结果示意图</figcaption>
</figure>
<h3 id="程序设计">2 程序设计</h3>
<p>（1）输入字符ｃ，如果ｃ是大写字母，则将ｃ转换成对应的小写，否则ｃ的值不变，输入Ctrl+Z程序结束。要求①用条件表达式；②字符的输入输出用getchar和putchar函数。程序应能循环接受用户的输入，直至输入Ctrl+Z程序结束。</p>
<p>解答：</p>
<p>1） 算法流程如图1.1所示。</p>
<figure>
<img src="/report/experiment/ef9c5024ad712e67ce818b3d51da8eea.png" alt="图1-2 编程题1的程序流程图">
<figcaption aria-hidden="true">图1-2 编程题1的程序流程图</figcaption>
</figure>
<p>2）源程序清单 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> c ;</span><br><span class="line">    <span class="keyword">while</span> ( <span class="built_in">scanf</span>(<span class="string">&quot;%c&quot;</span>,&amp;c) != EOF )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> ( c &gt;= <span class="string">&#x27;A&#x27;</span> &amp;&amp; c &lt;= <span class="string">&#x27;Z&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            c += <span class="number">32</span> ;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,tmp) ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,c) ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;	</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>3）测试</p>
<p>（a） 测试数据：</p>
<p>A</p>
<p>（b） 对应测试数据的运行结果截图</p>
<figure>
<img src="/report/experiment/b2ee8895bfa7cc5a69d305917fab9259.png" alt="图1-3 编程题1的程序运行结果示意图">
<figcaption aria-hidden="true">图1-3
编程题1的程序运行结果示意图</figcaption>
</figure>
<p>（2）输入无符号短整数x，ｍ，ｎ（0 ≤ｍ≤ 15, 1 ≤ ｎ≤
16-ｍ）,取出x从第ｍ位开始向左的ｎ位（ｍ从右至左编号为0～15），并使其向左端（第15位）靠齐。要求：①检查m和n的范围；②x的值以十六进制输入，m和n以十进制输入；③结果以十六进制输出。</p>
<p><strong>解答：</strong></p>
<ol type="1">
<li>解题思路:</li>
</ol>
<ol type="1">
<li><p>输入x，m，n，为了方便分析测试结果，x的输入采用16进制</p></li>
<li><p>如果<code>0 ≤ｍ≤ 15, 1 ≤ ｎ≤
16-ｍ</code>，转2.1，否则转3.</p></li>
</ol>
<ul>
<li><p>首先x&gt;&gt;m，将要处理的n位移动到最右；</p></li>
<li><p>再将上一步的结果左移<code>15-n-1</code>位，即：<code>(x &gt;&gt;
m ) &lt;&lt; (16 - n)</code></p></li>
<li><p>用16进制输出结果并转4.</p></li>
</ul>
<ol start="3" type="1">
<li><p>显示输入错误信息；</p></li>
<li><p>结束</p></li>
</ol>
<p>2）程序清单</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> re register</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">short</span> <span class="keyword">int</span> x , m , n , ans ;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%hx%hd%hd&quot;</span>,&amp;x,&amp;m,&amp;n) ;</span><br><span class="line">    <span class="comment">// return 0;</span></span><br><span class="line">    <span class="keyword">if</span> (m &lt; <span class="number">0</span> || m &gt; <span class="number">15</span> || m + n &lt;<span class="number">0</span> || m + n &gt;<span class="number">16</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ans = (x &gt;&gt; m ) &lt;&lt; (<span class="number">16</span> - n) ;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%hx&quot;</span>,ans ) ;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">short</span> <span class="keyword">int</span> x , n, m , d , ans;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%hx%hd%hd&quot;</span>, &amp;x, &amp;m, &amp;n);</span><br><span class="line">	<span class="keyword">if</span> (m &gt;= <span class="number">0</span> &amp;&amp; m &lt;= <span class="number">15</span> &amp;&amp; n &gt;= <span class="number">1</span> &amp;&amp; n + m &lt;= <span class="number">16</span>)</span><br><span class="line">		&#123;</span><br><span class="line">		    d = (~<span class="number">0</span>) &lt;&lt; ( m - <span class="number">1</span> ) ;</span><br><span class="line">		    ans = (x&amp;d) &lt;&lt; (<span class="number">16</span> - m - n);</span><br><span class="line">		    <span class="built_in">printf</span>(<span class="string">&quot;%x\n&quot;</span>,ans);</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;error\n&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3）测试</p>
<p>（a） 测试数据：如表1-1所示。</p>
<p>表1-1 编程题3的测试数据</p>
<table>
<colgroup>
<col style="width: 10%">
<col style="width: 32%">
<col style="width: 13%">
<col style="width: 3%">
<col style="width: 40%">
</colgroup>
<thead>
<tr class="header">
<th>测试 用例</th>
<th>程 序 输 入</th>
<th>理 论 结 果</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td>X</td>
<td>m</td>
<td>N</td>
<td></td>
</tr>
<tr class="even">
<td>用例1</td>
<td>0100 0110 1000 0000（4680）</td>
<td>7</td>
<td>4</td>
<td>计算结果1101 0000 0000 0000 即D000</td>
</tr>
<tr class="odd">
<td>用例2</td>
<td>1101 0101 1000 0011（D583）</td>
<td>16</td>
<td>1</td>
<td>输入错误（m值超范围）</td>
</tr>
<tr class="even">
<td>用例3</td>
<td>1101 0101 1000 0011（D583）</td>
<td>13</td>
<td>5</td>
<td>输入错误（n值超范围）</td>
</tr>
</tbody>
</table>
<p>（b） 对应测试测试用例1的运行结果如图1-2所示。</p>
<figure>
<img src="/report/experiment/da8d1dc42b60e7d3d5ecf3d11bb96b2c.png" alt="图1-4 编程题3的测试用例一的运行结果">
<figcaption aria-hidden="true">图1-4
编程题3的测试用例一的运行结果</figcaption>
</figure>
<p>对应测试测试用例2的运行结果如图1-3所示。<img src="/report/experiment/b83107be4ee83c6b67fd7b22c0921add.png" alt="图1-5 编程题3的测试用例二的运行结果"></p>
<p>对应测试测试用例3的运行结果如图1-4所示。</p>
<figure>
<img src="/report/experiment/cbba3e4e160058c8a88ef1d093448d63.png" alt="图1-6 编程题3的测试用例三的运行结果">
<figcaption aria-hidden="true">图1-6
编程题3的测试用例三的运行结果</figcaption>
</figure>
<p>说明上述的运行结果与理论分析吻合，验证了程序的正确性。</p>
<p>（3）IP地址通常是4个用句点分隔的小整数（即点分十进制），但这些地址在机器中是用一个无符号长整型数表示的。例如3232235876，其机内二进制表示就是11000000
10101000 00000001
01100100，按照8位一组用点分开，该IP地址就写成192.168.1.100。</p>
<p>读入无符号长整型数表示的互联网IP地址，对其译码，以常见的点分十进制形式输出。要求循环输入和输出，直至输入Ctrl+Z结束。</p>
<p><strong>解答：</strong></p>
<ol type="1">
<li>解题思路:</li>
</ol>
<ol type="1">
<li><p>输入x为了方便分析测试结果，x的输入采用unsigned long
int型</p></li>
<li><p>如果x != EOF转2.1，否则转3.</p></li>
</ol>
<ul>
<li><p>首先定义<code>mask = 0x000000ff ;</code></p></li>
<li><p>计算结果并进行输出，<code>(x&gt;&gt;24)&amp;t.
(x&gt;&gt;16)&amp;t. (x&gt;&gt;8)&amp;t .
(x&amp;t),</code>然后转3：</p></li>
</ul>
<ol start="3" type="1">
<li>结束</li>
</ol>
<p>2）程序清单 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> re register </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">int</span> x;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">&quot;%ld&quot;</span>,&amp;x) != EOF )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">int</span> t = <span class="number">0x00000ff</span> ;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d.%d.%d.%d\n&quot;</span>,(x&gt;&gt;<span class="number">24</span>)&amp;t,(x&gt;&gt;<span class="number">16</span>)&amp;t,(x&gt;&gt;<span class="number">8</span>)&amp;t,(x&amp;t)) ; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> 3）测试</p>
<p>（a） 测试数据：</p>
<p>3232235876</p>
<p>（b） 对应测试数据的运行结果截图</p>
<figure>
<img src="/report/experiment/646ca82f3ac4a6658975c19b53521d2d.png" alt="图1-7 编程题4的运行结果">
<figcaption aria-hidden="true">图1-7 编程题4的运行结果</figcaption>
</figure>
<h2 id="实验小结">1.3 实验小结</h2>
<p>实验中对于部分算法、语法存在许多疑惑，但经过查阅资料、自己摸索、借助ide的debug、调试等功能，成功解决了问题。经过这次实验，我体会到了自学探索的重要性，对有关知识的理解更深了。</p>
<hr>
<h1 id="实验2-流程控制实验">实验2 流程控制实验</h1>
<h2 id="实验目的-1">2.1 实验目的</h2>
<p>（1）掌握复合语句、if语句、switch语句的使用，熟练掌握for、while、do-while三种基本的循环控制语句的使用，掌握重复循环技术，了解转移语句与标号语句。</p>
<p>（2）练习循环结构for、while、do-while语句的使用。</p>
<p>（3）练习转移语句和标号语句的使用。</p>
<p>（4）使用集成开发环境中的调试功能：单步执行、设置断点、观察变量值。</p>
<h2 id="实验内容及要求">2.2 实验内容及要求</h2>
<h3 id="程序改错">2.2.1程序改错</h3>
<p>下面的实验2-1程序是合数判断器（合数指自然数中除了能被1和本身整除外，还能被其它数整除的数），在该源程序中存在若干语法和逻辑错误。要求对该程序进行调试修改，使之能够正确完成指定任务。
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 实验2-1改错题程序：合数判断器*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">( )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, x, k, flag = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;本程序判断合数，请输入大于1的整数，以Ctrl+Z结束\n&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;x) !=EOF)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">2</span>,k=x&gt;&gt;<span class="number">1</span>;i&lt;=k;i++)</span><br><span class="line">        <span class="keyword">if</span> (!x%i)</span><br><span class="line">        &#123;</span><br><span class="line">            flag = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    	&#125;</span><br><span class="line">        <span class="keyword">if</span>(flag=<span class="number">1</span>) <span class="built_in">printf</span>(<span class="string">&quot;%d是合数&quot;</span>, x);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%d不是合数&quot;</span>, x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <strong>解答：</strong></p>
<p>（1）错误修改：</p>
<ol type="1">
<li><p>第9行的运算优先级出错，正确形式为：</p>
<p>if( ! (x % i ) )</p></li>
<li><p>第13行的 if(flag=1) 语法出错，正确形式为：</p>
<p>if ( flag == 1 )</p></li>
<li><p>第15行的算法出错，正确形式为：</p>
<p>flag = 0 ;}</p></li>
</ol>
<ol start="2" type="1">
<li>错误修改后运行结果：</li>
</ol>
<figure>
<img src="/report/experiment/071602f03a3be38276fedbf375c5572b.png" alt="图2-1程序改错的测试用例运行结果">
<figcaption aria-hidden="true">图2-1程序改错的测试用例运行结果</figcaption>
</figure>
<h3 id="程序修改替换">2.2.2程序修改替换</h3>
<p>（1）修改实验2-1程序，将内层两出口的for循环结构改用单出口结构，即不允许使用break、goto等非结构化语句。</p>
<p><strong>解答：</strong> <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">( )</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">int</span> i, x, k, flag = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;本程序判断合数，请输入大于1的整数，以Ctrl+Z结束\n&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;x) != EOF) </span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">2</span>, k = x&gt;&gt;<span class="number">1</span>; i &lt;= k &amp;&amp; ( flag == <span class="number">0</span> ) ;i++)</span><br><span class="line">		<span class="keyword">if</span> (!(x % i)) flag = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(flag == <span class="number">1</span>) <span class="built_in">printf</span>(<span class="string">&quot;%d是合数&quot;</span>, x);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%d不是合数&quot;</span>, x);</span><br><span class="line">    flag = <span class="number">0</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> (2) 修改后运行结果：</p>
<figure>
<img src="/report/experiment/53448e04fe0994a734867f67db70ca1f.png" alt="图2-2程序修改替换的测试用例运行结果">
<figcaption aria-hidden="true">图2-2程序修改替换的测试用例运行结果</figcaption>
</figure>
<p>（2）修改实验2-1程序，将for循环改用do-while循环。</p>
<p><strong>解答：</strong> <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">( )</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">int</span> i, x, k, flag = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;本程序判断合数，请输入大于1的整数，以Ctrl+Z结束\n&quot;</span>);</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">    	<span class="keyword">if</span>(x)</span><br><span class="line">    	&#123;</span><br><span class="line">    		<span class="keyword">for</span>(i=<span class="number">2</span>,k=x&gt;&gt;<span class="number">1</span>; i&lt;=k &amp;&amp; ( flag == <span class="number">0</span> ) ;i++)</span><br><span class="line">			<span class="keyword">if</span> (!(x%i)) flag = <span class="number">1</span>;</span><br><span class="line">    		<span class="keyword">if</span>(flag == <span class="number">1</span>) <span class="built_in">printf</span>(<span class="string">&quot;%d是合数\n&quot;</span>, x);</span><br><span class="line">   			<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%d不是合数\n&quot;</span>, x);</span><br><span class="line">    		flag = <span class="number">0</span> ;</span><br><span class="line">		&#125;</span><br><span class="line">    &#125; <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;x) !=EOF) ;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> (2) 修改后运行结果：</p>
<figure>
<img src="/report/experiment/e46b36c0edc652549a61690ef7acc01d.png" alt="图2-3程序修改替换的测试用例运行结果">
<figcaption aria-hidden="true">图2-3程序修改替换的测试用例运行结果</figcaption>
</figure>
<p>（3）修改实验2-1程序，将其改为纯粹合数求解器，求出所有的3位纯粹合数。一个合数去掉最低位，剩下的数仍是合数；再去掉剩下的数的最低位，余留下来的数还是合数，这样反复，一直到最后剩下一位数仍是合数，这样的数称为纯粹合数。</p>
<p><strong>解答：</strong> <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">解答：</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> re register</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">judge</span> <span class="params">( <span class="keyword">int</span> x )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> tmp = <span class="built_in">sqrt</span>(x) ;</span><br><span class="line">    <span class="keyword">for</span>( re <span class="keyword">int</span> i = <span class="number">2</span> ; i &lt;= tmp ; i++ )</span><br><span class="line">        <span class="keyword">if</span>( x % i == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span> ;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">( )</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="keyword">for</span>( re <span class="keyword">int</span> i = <span class="number">100</span> ; i &lt;= <span class="number">999</span> ; i++ )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> ( judge (i) &amp;&amp; judge (i / <span class="number">10</span>) &amp;&amp; judge (i/<span class="number">100</span>) ) </span><br><span class="line">            <span class="built_in">printf</span> (<span class="string">&quot;%d &quot;</span> , i ) ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ol start="2" type="1">
<li>修改后运行结果：</li>
</ol>
<figure>
<img src="/report/experiment/27914d08b976624b20469d9c4d112f2a.png" alt="图2-4程序修改替换的测试用例运行结果">
<figcaption aria-hidden="true">图2-4程序修改替换的测试用例运行结果</figcaption>
</figure>
<h3 id="程序设计-1">2.2.3程序设计</h3>
<p>（1）假设工资税金按以下方法计算：x ＜ 1000元，不收取税金；1000 ≤ x
＜2000，收取5%的税金；2000 ≤ x ＜ 3000，收取10%的税金；3000 ≤ x
＜4000，收取15%的税金；4000 ≤ x ＜ 5000，收取20%的税金；5000
≤x，收取25%的税金。（注意税金的计算按照阶梯计税法，比如，工资为4500，那么税金=<code>1000*5%+
1000*10% + 1000*15% + 501*20%）</code>
编写一个程序,输入工资金额，输出应收取税金额度，要求分别用if语句和switch语句来实现。</p>
<p><strong>解答：</strong> <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*使用if版本*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> re register</span></span><br><span class="line"><span class="keyword">double</span> x ;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lf&quot;</span>,&amp;x) ;</span><br><span class="line">    <span class="keyword">int</span> tmp = x / <span class="number">1000</span> ;</span><br><span class="line">    <span class="keyword">if</span>( tmp == <span class="number">0</span> ) <span class="built_in">printf</span>(<span class="string">&quot;收税金额为%d&quot;</span>,<span class="number">0</span>) ;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>( tmp == <span class="number">1</span>) <span class="built_in">printf</span>(<span class="string">&quot;收税金额为%.2lf&quot;</span>, (x<span class="number">-1000</span>) * <span class="number">0.05</span> ) ;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>( tmp == <span class="number">2</span>) <span class="built_in">printf</span>(<span class="string">&quot;收税金额为%.2lf&quot;</span>, <span class="number">50</span> + (x<span class="number">-2000</span>) * <span class="number">0.1</span> ) ;    </span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>( tmp == <span class="number">3</span>) <span class="built_in">printf</span>(<span class="string">&quot;收税金额为%.2lf&quot;</span>, <span class="number">150</span> + (x<span class="number">-3000</span>) * <span class="number">0.15</span> ) ;    </span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>( tmp == <span class="number">4</span>) <span class="built_in">printf</span>(<span class="string">&quot;收税金额为%.2lf&quot;</span>, <span class="number">300</span> + (x<span class="number">-4000</span>) * <span class="number">0.2</span> ) ;    </span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>( tmp &gt;= <span class="number">5</span>) <span class="built_in">printf</span>(<span class="string">&quot;收税金额为%.2lf&quot;</span>, <span class="number">500</span> + (x<span class="number">-2000</span>) * <span class="number">0.25</span> ) ;    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>/<em>使用switch版本</em>/ <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/*使用switch版本*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> re register</span></span><br><span class="line"><span class="keyword">double</span> x ;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lf&quot;</span>,&amp;x) ;</span><br><span class="line">    <span class="keyword">int</span> tmp = x / <span class="number">1000</span> ;</span><br><span class="line">    <span class="keyword">switch</span> ( tmp ) </span><br><span class="line">    &#123;</span><br><span class="line">    	<span class="keyword">case</span> <span class="number">0</span> : <span class="built_in">printf</span>(<span class="string">&quot;收税金额为%d&quot;</span>,<span class="number">0</span>) ; <span class="keyword">break</span> ;</span><br><span class="line">   		<span class="keyword">case</span> <span class="number">1</span> : <span class="built_in">printf</span>(<span class="string">&quot;收税金额为%.2lf&quot;</span>, (x<span class="number">-1000</span>) * <span class="number">0.05</span> ) ; <span class="keyword">break</span> ;</span><br><span class="line">   		<span class="keyword">case</span> <span class="number">2</span> : <span class="built_in">printf</span>(<span class="string">&quot;收税金额为%.2lf&quot;</span>, <span class="number">50</span> + (x<span class="number">-2000</span>) * <span class="number">0.1</span> ) ; <span class="keyword">break</span> ;   </span><br><span class="line">    	<span class="keyword">case</span> <span class="number">3</span> : <span class="built_in">printf</span>(<span class="string">&quot;收税金额为%.2lf&quot;</span>, <span class="number">150</span> + (x<span class="number">-3000</span>) * <span class="number">0.15</span> ) ; <span class="keyword">break</span> ;    </span><br><span class="line">    	<span class="keyword">case</span> <span class="number">4</span> : <span class="built_in">printf</span>(<span class="string">&quot;收税金额为%.2lf&quot;</span>, <span class="number">300</span> + (x<span class="number">-4000</span>) * <span class="number">0.2</span> ) ; <span class="keyword">break</span> ;   </span><br><span class="line">		<span class="keyword">default</span> : <span class="built_in">printf</span>(<span class="string">&quot;收税金额为%.2lf&quot;</span>, <span class="number">500</span> + (x<span class="number">-2000</span>) * <span class="number">0.25</span> ) ; <span class="keyword">break</span> ;    </span><br><span class="line">	&#125;   </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> 测试数据：</p>
<p>程序运行截图：</p>
<figure>
<img src="/report/experiment/73d00cab4295af040c319e9cf18492a0.png" alt="图2-5编程题1的测试用例1运行结果">
<figcaption aria-hidden="true">图2-5编程题1的测试用例1运行结果</figcaption>
</figure>
<figure>
<img src="/report/experiment/4acec651c10dbf16d2384b543fda0249.png" alt="图2-6编程题1的测试用例2运行结果">
<figcaption aria-hidden="true">图2-6编程题1的测试用例2运行结果</figcaption>
</figure>
<figure>
<img src="/report/experiment/4e292dc75c70a3c5db0f341a67294535.png" alt="图2-7编程题1的测试用例3运行结果">
<figcaption aria-hidden="true">图2-7编程题1的测试用例3运行结果</figcaption>
</figure>
<p>说明上述的运行结果与理论分析吻合，验证了程序的正确性。</p>
<ol start="2" type="1">
<li>输入一段以!结尾的短文(最多5行,每行不超过50个字符)，要求将它复制到输出，复制过程中将每行一个以上的空格字符用一个空格代替。</li>
</ol>
<p>1 解题思路：</p>
<ol type="1">
<li><p>输入字符c，如果输入未完成则继续输入</p></li>
<li><p>如果c 为空格</p></li>
</ol>
<ul>
<li><p>如果flag为真，则继续读取字符c</p></li>
<li><p>如果flag为假，则flag = 1 ，并且输出字符c</p></li>
</ul>
<ol start="3" type="1">
<li><p>如果c不为空格，则flag=0,并且输出字符c</p></li>
<li><p>结束</p></li>
</ol>
<p>2）程序清单 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> c ;</span><br><span class="line"><span class="keyword">int</span> flag = <span class="number">0</span> ;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> ( <span class="built_in">scanf</span>(<span class="string">&quot;%c&quot;</span>,&amp;c) != EOF )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> ( c == <span class="string">&#x27; &#x27;</span> )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> ( flag ) <span class="keyword">continue</span> ;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                flag = <span class="number">1</span> ;</span><br><span class="line">                <span class="built_in">putchar</span>(c) ;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            flag = <span class="number">0</span> ;</span><br><span class="line">            <span class="built_in">putchar</span>(c) ;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;  </span><br><span class="line"></span><br></pre></td></tr></table></figure> 3）测试</p>
<figure>
<img src="/report/experiment/55168a116fe08966b11d72bdd8f09d1b.png" alt="图2-8编程题2的测试用例运行结果">
<figcaption aria-hidden="true">图2-8编程题2的测试用例运行结果</figcaption>
</figure>
<p>说明上述的运行结果与理论分析吻合，验证了程序的正确性。</p>
<p>（3）打印如下的杨辉三角形。 <figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">                  <span class="attribute">1</span></span><br><span class="line">                <span class="attribute">1</span>   <span class="number">1</span></span><br><span class="line">              <span class="attribute">1</span>   <span class="number">2</span>   <span class="number">1</span> </span><br><span class="line">            <span class="attribute">1</span>   <span class="number">3</span>   <span class="number">3</span>   <span class="number">1</span></span><br><span class="line">          <span class="attribute">1</span>   <span class="number">4</span>   <span class="number">6</span>   <span class="number">4</span>   <span class="number">1</span></span><br><span class="line">        <span class="attribute">1</span>   <span class="number">5</span>   <span class="number">10</span>  <span class="number">10</span>  <span class="number">5</span>   <span class="number">1</span></span><br><span class="line">      <span class="attribute">1</span>   <span class="number">6</span>   <span class="number">15</span>  <span class="number">20</span>  <span class="number">15</span>  <span class="number">6</span>   <span class="number">1</span></span><br><span class="line">    <span class="attribute">1</span>   <span class="number">7</span>   <span class="number">21</span>  <span class="number">35</span>  <span class="number">35</span>  <span class="number">21</span>  <span class="number">7</span>   <span class="number">1</span></span><br><span class="line">  <span class="attribute">1</span>   <span class="number">8</span>   <span class="number">28</span>  <span class="number">56</span>  <span class="number">70</span>  <span class="number">56</span>  <span class="number">28</span>  <span class="number">8</span>   <span class="number">1</span></span><br><span class="line"><span class="attribute">1</span>   <span class="number">9</span>   <span class="number">36</span>  <span class="number">84</span>  <span class="number">126</span> <span class="number">126</span> <span class="number">84</span>  <span class="number">36</span>   <span class="number">9</span>   <span class="number">1</span></span><br></pre></td></tr></table></figure>
第i行第j列位置的数据值可以由组合表示，而组合数的计算如下：</p>
<p><span class="math display">\[C_i^j =
C_{i-1}^j+C_{i-1}^{j-1}\]</span></p>
<p>根据以上公式，采用顺推法编程，输入最后一行的编号N（0&lt;=N&lt;=6），要求输出金字塔效果的杨辉三角形。</p>
<p>特别要注意空格的数目，一位数之间是3个空格，两位数之间有2个空格，3位数之间只有一个空格。第N行行首是N个空格。每行末尾是3个空格和换行。</p>
<p>1 解题思路：</p>
<ol type="1">
<li><p>输入整数n</p></li>
<li><p>使用递推求出组合数c[i][j]</p></li>
<li><p>利用双层循环结合题意对杨辉三角进行输出</p></li>
<li><p>结束</p></li>
</ol>
<p>2）程序清单 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> re register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 10 </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n ;</span><br><span class="line"><span class="keyword">int</span> c[maxn][maxn] ;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n) ;</span><br><span class="line">    c[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span> ;</span><br><span class="line">    <span class="keyword">for</span>( re <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt;= n ; i++ ) </span><br><span class="line">    &#123;</span><br><span class="line">        c[i][<span class="number">0</span>] = c[i][i] = <span class="number">1</span> ;</span><br><span class="line">        <span class="keyword">for</span>( re <span class="keyword">int</span> j = <span class="number">1</span> ; j &lt;= ( i &gt;&gt; <span class="number">1</span> ) ; j++ )</span><br><span class="line">        &#123;</span><br><span class="line">            c[i][j] = c[i][i-j] = c[i<span class="number">-1</span>][j] + c[i<span class="number">-1</span>][j<span class="number">-1</span>] ;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> ( re <span class="keyword">int</span> i = <span class="number">0</span> ; i &lt;= n ; i++ )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>( re <span class="keyword">int</span> j = <span class="number">1</span> ; j &lt;= n + <span class="number">2</span>*(n-i) ; j++ )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot; &quot;</span>) ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> ( re <span class="keyword">int</span> k = <span class="number">0</span> ; k &lt;= i ; k++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%-4d&quot;</span>,c[i][k]) ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>) ;</span><br><span class="line">    &#125; </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> 3）测试</p>
<figure>
<img src="/report/experiment/af43b74e952211c92f290859aca95293.png" alt="图2-9编程题3的测试用例运行结果">
<figcaption aria-hidden="true">图2-9编程题3的测试用例运行结果</figcaption>
</figure>
<p>说明上述的运行结果与理论分析吻合，验证了程序的正确性。</p>
<p>（4）625这个数很特别，625的平方等于390625，其末3位也是625。请编程输出所有这样的3位数：它的平方的末3位是这个数本身。要求这些数字从小到大排列，每个数字单独占一行。</p>
<ol type="1">
<li>解题思路：</li>
</ol>
<ol type="1">
<li><p>输入字符c，如果输入未完成则继续输入</p></li>
<li><p>如果c 为空格</p></li>
</ol>
<ul>
<li><p>如果flag为真，则继续读取字符c</p></li>
<li><p>如果flag为假，则flag = 1 ，并且输出字符c</p></li>
</ul>
<ol start="3" type="1">
<li><p>如果c不为空格，则flag=0,并且输出字符c</p></li>
<li><p>结束</p></li>
</ol>
<p>2）程序清单 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> re register</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (re <span class="keyword">int</span> i = <span class="number">100</span> ; i &lt;= <span class="number">999</span> ; i++ )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> ( ( i*i % <span class="number">1000</span> ) == i ) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure> 3）测试</p>
<figure>
<img src="/report/experiment/7f186b9c7ab30ec91daac73311ed3be6.png" alt="图2-10编程题4的测试用例运行结果">
<figcaption aria-hidden="true">图2-10编程题4的测试用例运行结果</figcaption>
</figure>
<p>说明上述的运行结果与理论分析吻合，验证了程序的正确性。</p>
<h2 id="实验小结-1">2.3 实验小结</h2>
<p>（1）通过这次试验，我掌握了复合语句、if语句、switch语句的使用，熟练掌握for、while、do-while三种基本的循环控制语句的使用，掌握重复循环技术，了解转移语句与标号语句，对它们有了更深的理解。</p>
<p>（2）通过这次试验，我练习了循环结构for、while、do-while语句的使用，熟练使用了他们。</p>
<p>（3）通过这次试验，我练习了转移语句和标号语句的使用。</p>
<p>（4）通过这次试验，我使用集成开发环境中的调试功能：单步执行、设置断点、观察变量值，提高了debug效率。</p>
<h1 id="实验3-函数与程序结构实验">实验3 函数与程序结构实验</h1>
<h2 id="实验目的-2">3.1实验目的</h2>
<p>（1）熟悉和掌握函数的定义、声明；函数调用与参数传递，函数返回值类型的定义和返回值使用。</p>
<p>（2）熟悉和掌握不同存储类型变量的使用。</p>
<p>（3）练习使用集成开发环境中的调试功能：单步执行、设置断点、观察变量值。</p>
<h2 id="实验内容-1">3.2实验内容</h2>
<h3 id="程序改错题">3.2.1.程序改错题</h3>
<p>下面是计算s=1!+2!+3!+…+n!的源程序(n&lt;20)。在这个源程序中存在若干语法和逻辑错误。要求对该程序进行调试修改，使之能够输出如下结果：</p>
<p>k=1 the sum is 1</p>
<p>k=2 the sum is 3</p>
<p>k=3 the sum is 9</p>
<p>……</p>
<p>k=20 the sum is 2561327494111820313 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*实验3-1改错题程序：计算s=1!+2!+3!+…+n!*/</span></span><br><span class="line"><span class="number">1</span>  <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="number">2</span>  <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function">3  </span>&#123;</span><br><span class="line"><span class="number">4</span>      <span class="keyword">int</span> k;</span><br><span class="line"><span class="number">5</span>      <span class="keyword">for</span>(k=<span class="number">1</span>;k&lt;=<span class="number">20</span>;k++)</span><br><span class="line"><span class="number">6</span>           <span class="built_in">printf</span>(<span class="string">&quot;k=%d\tthe sum is %ld\n&quot;</span>,k,sum_fac(k));</span><br><span class="line"><span class="number">7</span>      <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="number">8</span>  &#125;</span><br><span class="line"><span class="number">9</span>  <span class="function"><span class="keyword">long</span> <span class="title">sum_fac</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function">10 </span>&#123;</span><br><span class="line"><span class="number">11</span>     <span class="keyword">long</span> s=<span class="number">0</span>;</span><br><span class="line"><span class="number">12</span>     <span class="keyword">int</span> i,fac;</span><br><span class="line"><span class="number">13</span>    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line"><span class="number">14</span>         fac*=i;</span><br><span class="line"><span class="number">15</span>     s+=fac;</span><br><span class="line"><span class="number">16</span>     <span class="keyword">return</span> s;</span><br><span class="line"><span class="number">17</span> &#125;</span><br></pre></td></tr></table></figure>
<strong>解答：</strong></p>
<p>（1）错误修改：</p>
<ol type="1">
<li><p>第3行未对函数sum_fac进行声明，同时函数数据类型出错，正确形式为：</p>
<p>long long sum_fac(int n);</p></li>
<li><p>第11行s的数据类型出错，正确形式为：</p>
<p>static long long s=0;</p></li>
<li><p>第12行fac的数据类型、初始值出错，正确形式为：</p>
<p>long long fac = 1 ;</p></li>
</ol>
<ol start="2" type="1">
<li>错误修改后运行结果：</li>
</ol>
<figure>
<img src="/report/experiment/8345e59c7df5e4e7ae3420be39d9a318.png" alt="图3-1 程序改错题的程序运行截图">
<figcaption aria-hidden="true">图3-1
程序改错题的程序运行截图</figcaption>
</figure>
<h3 id="程序修改替换题">3.3.2．程序修改替换题</h3>
<p>（1）根据将实验3-1改错题程序中sum_fac函数修改为一个递归函数，用递归的方式计算。</p>
<p>解答：</p>
<p>（1）替换后的程序如下： <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> re register</span></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">sum_fac</span><span class="params">(<span class="keyword">int</span> n)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> k;</span><br><span class="line">    <span class="keyword">for</span>(k=<span class="number">1</span>;k&lt;=<span class="number">20</span>;k++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;k=%d\tthe sum is %lld\n&quot;</span>,k,sum_fac(k));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">sum_fac</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ( n == <span class="number">1</span> ) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> fac = <span class="number">1</span> ;</span><br><span class="line">    <span class="keyword">for</span> ( re <span class="keyword">int</span> i = <span class="number">1</span>  ; i &lt;= n ; i++ )</span><br><span class="line">        fac *= i ;</span><br><span class="line">    <span class="keyword">return</span> fac + sum_fac( n - <span class="number">1</span> ) ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> （2）程序运行结果示意图：</p>
<figure>
<img src="/report/experiment/3a69453178f86a5cfb310089b1fa1a10.png" alt="图3-2 程序修改替换题（1）的程序运行截图">
<figcaption aria-hidden="true">图3-2
程序修改替换题（1）的程序运行截图</figcaption>
</figure>
<p>（2）下面是计算的源程序，其中x是浮点数，n是整数。从键盘输入x和n，然后计算s的值。修改该程序中的sum和fac函数，使之计算量最小。
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">mulx</span><span class="params">(<span class="keyword">double</span> x,<span class="keyword">int</span> n)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="title">fac</span><span class="params">(<span class="keyword">int</span> n)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">sum</span><span class="params">(<span class="keyword">double</span> x,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">double</span> z=<span class="number">1.0</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		z=z+mulx(x,i)/fac(i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> z;</span><br><span class="line"> &#125; </span><br><span class="line"> <span class="function"><span class="keyword">double</span> <span class="title">mulx</span><span class="params">(<span class="keyword">double</span> x,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">double</span> z=<span class="number">1.0</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		z=z*x;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> z;</span><br><span class="line"> &#125; </span><br><span class="line"> <span class="function"><span class="keyword">long</span> <span class="title">fac</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line"> 	<span class="keyword">int</span> i;</span><br><span class="line"> 	<span class="keyword">long</span> h=<span class="number">1</span>;</span><br><span class="line"> 	<span class="keyword">for</span>(i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		h=h*i;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> h; 	</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line"> 	<span class="keyword">double</span> x;</span><br><span class="line">	<span class="keyword">int</span> n;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;Input x and n:&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%lf%d&quot;</span>,&amp;x,&amp;n);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;The result is %lf:&quot;</span>,sum(x,n));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;	  </span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> 解答：</p>
<p>（1）替换后的程序如下： <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">mulx</span><span class="params">(<span class="keyword">double</span> x,<span class="keyword">int</span> n)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="title">fac</span><span class="params">(<span class="keyword">int</span> n)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">sum</span><span class="params">(<span class="keyword">double</span> x,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">double</span> z=<span class="number">1.0</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		z=z+mulx(x,i)/fac(i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> z;</span><br><span class="line"> &#125; </span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">mulx</span><span class="params">(<span class="keyword">double</span> x,<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">double</span> z=<span class="number">1.0</span>;</span><br><span class="line">    z *= x ; </span><br><span class="line">	<span class="keyword">return</span> z;</span><br><span class="line"> &#125; </span><br><span class="line"> <span class="function"><span class="keyword">long</span> <span class="title">fac</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ( n == <span class="number">1</span> ) <span class="keyword">return</span> <span class="number">1</span> ;</span><br><span class="line"> 	<span class="keyword">static</span> <span class="keyword">long</span> f = <span class="number">1</span> ;</span><br><span class="line">    f *= n ;</span><br><span class="line">    <span class="keyword">return</span> f ; </span><br><span class="line"> &#125;</span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line"> 	<span class="keyword">double</span> x;</span><br><span class="line">	<span class="keyword">int</span> n;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;Input x and n:&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%lf%d&quot;</span>,&amp;x,&amp;n);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;The result is %lf:&quot;</span>,sum(x,n));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;	  </span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
（2）替换后的程序运行结果如下：</p>
<figure>
<img src="/report/experiment/31df2a4ebc550e29f0a8e38f6726606e.png" alt="图3-3 程序修改替换题（2）的程序运行截图">
<figcaption aria-hidden="true">图3-3
程序修改替换题（2）的程序运行截图</figcaption>
</figure>
<h3 id="跟踪调试题">3.3.3．跟踪调试题</h3>
<p>下面是计算fabonacci数列前n项和的源程序，现要求单步执行该程序，在watch窗口中观察Ik,sum,n值。具体操作如下：</p>
<ol type="1">
<li><p>设输入5，观察刚执行完"scanf("%d",&amp;k);"语句时，sum、k的值是多少？</p>
<figure>
<img src="/report/experiment/89b618ce77b70cfc7a08d43c1a15bc93.png" alt="图3-4跟踪调试题（1）的程序运行截图">
<figcaption aria-hidden="true">图3-4跟踪调试题（1）的程序运行截图</figcaption>
</figure></li>
<li><p>在从main函数第一次进入fabonacci函数前的一刻，观察各变量的值是多少？返回后光条停留在哪个语句上？</p>
<figure>
<img src="/report/experiment/32c6934e0faa3c258e21f2d684e2cb37.png" alt="图3-5跟踪调试题（2）的程序运行截图">
<figcaption aria-hidden="true">图3-5跟踪调试题（2）的程序运行截图</figcaption>
</figure></li>
<li><p>在从main函数第一次进入fabonacci函数后的一刻，观察光条从main函数"sum+=fabonacci(i);"语句调到了哪里？</p>
<figure>
<img src="/report/experiment/04713efeb62ef61a1c47b155881be96d.png" alt="图3-6跟踪调试题（3）的程序运行截图">
<figcaption aria-hidden="true">图3-6跟踪调试题（3）的程序运行截图</figcaption>
</figure></li>
<li><p>在fabonacci函数内部单步执行，观察函数的递归执行过程。体会递归方式实现的计算过程是如何完成数计算的，并特别注意什么时刻结束递归，然后直接从第一个return语句返回到了哪里？</p>
<figure>
<img src="/report/experiment/5c4fc448ded41b991503c08c57b657f1.png" alt="图3-7跟踪调试题（4）的程序运行截图">
<figcaption aria-hidden="true">图3-7跟踪调试题（4）的程序运行截图</figcaption>
</figure></li>
<li><p>在fabonacci函数递归执行过程中观察参数n的变化情况，并回答为什么k、sum在fabonacci函数内部不可见？</p>
<p>解答：</p>
<p>这两个变量是开在main()函数的局部变量，fabonacci函数无法调用。</p></li>
</ol>
<p><strong>/<em>实验3-3跟踪调试题程序：<strong>计算fabonacci数列前n项和</strong></em>/</strong>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span> </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i,k;</span><br><span class="line">    <span class="keyword">long</span> sum=<span class="number">0</span>,fabonacci(<span class="keyword">int</span> n);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Inut n:&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;k);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=k;i++)&#123;</span><br><span class="line">        sum += fabonacci(i);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;i=%d\tthe sum is %ld\n&quot;</span>,i,sum);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="title">fabonacci</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n == <span class="number">1</span> || n == <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> fabonacci(n<span class="number">-1</span>)+fabonacci(n<span class="number">-2</span>);</span><br><span class="line">&#125;	</span><br></pre></td></tr></table></figure></p>
<h3 id="程序设计-2">3.3.4．程序设计</h3>
<p>以下（1）至（3）题对应Educoder教学平台"C语言实验"课程，实验3，第7关实验3-1、第8关实验3-2，以及第9关实验3-3。</p>
<p>（1）编程验证歌德巴赫猜想：任何一个大于等于4的偶数都是两个素数之和。要求设计一个函数，接受形参n，以"n=n1+n2"的形式输出结果，若有多种分解情况，取n1最小的一个输出。</p>
<p>例如：n=6，输出"6=3+3"。</p>
<p>main函数循环接收从键盘输入的整数n，如果n是大于或等于4的偶数，调用上述函数进行验证。</p>
<p>1 解题思路：</p>
<ol type="1">
<li><p>输入整数n</p></li>
<li><p>如果n是大于或等于4的偶数，调用solve(n)函数进行验证。</p></li>
</ol>
<ul>
<li><p>首先从i=2开始进行循环，调用judge(int a)函数进行判断。</p></li>
<li><p>judge函数：检测传入的参数是否为质数，如果是质数返回1，否则返回0.</p></li>
<li><p>如果i，n-i都是质数，则进行输出并终止循环。</p></li>
</ul>
<ol start="3" type="1">
<li>结束</li>
</ol>
<p>2）程序清单 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> re register</span></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">judge</span> <span class="params">(<span class="keyword">int</span> a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(re <span class="keyword">int</span> i = <span class="number">2</span> ; i &lt;= <span class="built_in">sqrt</span>(a) ; i++ )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> ( a % i == <span class="number">0</span> ) <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span> <span class="params">(<span class="keyword">int</span> a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>( re <span class="keyword">int</span> i = <span class="number">2</span> ; i &lt;= a ; i++ )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>( judge(i) &amp;&amp; judge(a-i) )</span><br><span class="line">        &#123;</span><br><span class="line">        	<span class="built_in">printf</span>(<span class="string">&quot;%d=%d+%d\n&quot;</span>,a,i,a-i);</span><br><span class="line">        	<span class="keyword">break</span> ;</span><br><span class="line">		&#125;    </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n) != EOF )</span><br><span class="line">        <span class="keyword">if</span>(n &gt;= <span class="number">4</span> &amp;&amp; n % <span class="number">2</span> == <span class="number">0</span> ) solve(n);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure> 3）测试</p>
<figure>
<img src="/report/experiment/261dc275382320ee2566c9b5fc8fb2a7.png" alt="图3-8程序设计题（1）的程序运行截图">
<figcaption aria-hidden="true">图3-8程序设计题（1）的程序运行截图</figcaption>
</figure>
<p>（2）完全数（Perfect
number），又称完美数或完备数，特点是它的所有真因子（即除了自身以外的约数，包括1）之和恰好等于它本身。例如6=1+2+3，28=1+2+4+7+14等。</p>
<p>编程寻找10000以内的所有完全数。</p>
<p>要求设计一个函数，判定形参n是否为完全数，如果是，返回1，否则返回0。在main函数中调用该函数求10000以内的所有完全数，并以完全数的真因子之和的形式输出结果，例如"6=1+2+3"。程序输出中，每个完全数单独占一行。</p>
<p>1 解题思路：</p>
<ol type="1">
<li><p>从i=2到10000进行遍历，调用judge(int n),print(int
x)进行验证</p></li>
<li><p>judge函数：</p></li>
</ol>
<ul>
<li>先运用循环求出传入整数的所有因子，并调用数组进行储存。</li>
</ul>
<p>-再将所有因子进行求和，判断其是否与传入的参数相等，相等返回1，不相等返回0.</p>
<ul>
<li>如果i，n-i都是质数，则进行输出并终止循环。</li>
</ul>
<ol start="3" type="1">
<li>print函数：</li>
</ol>
<ul>
<li><p>如果传入参数是完全数，调用judge函数中的数组对所有的因子进行输出。</p></li>
<li><p>对数组，cnt进行清零。</p></li>
</ul>
<p>2）程序清单 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> re register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 10005</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[maxn] ;</span><br><span class="line"><span class="keyword">int</span> cnt = <span class="number">0</span> ;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">judge</span> <span class="params">( <span class="keyword">int</span> n )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span> ; cnt = <span class="number">0</span> ;</span><br><span class="line">    <span class="keyword">for</span> ( re <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt;= n ; i++ )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>( n % i == <span class="number">0</span> )</span><br><span class="line">            a[++cnt] = i ; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>( re <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; cnt ; i++ )</span><br><span class="line">        sum += a[i] ;</span><br><span class="line">    <span class="keyword">if</span>( sum == n )</span><br><span class="line">    &#123;</span><br><span class="line">        sum = <span class="number">0</span> ;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    sum = <span class="number">0</span> ;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">( <span class="keyword">int</span> x )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d=&quot;</span>,x) ;</span><br><span class="line">    <span class="keyword">for</span>( re <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; cnt - <span class="number">1</span> ; i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d+&quot;</span>, a[i] ) ;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,a[cnt<span class="number">-1</span>]) ;</span><br><span class="line">    cnt = <span class="number">0</span> ;</span><br><span class="line">    <span class="built_in">memset</span> ( a , <span class="number">0</span> , <span class="keyword">sizeof</span>(a) ) ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> ( re <span class="keyword">int</span> i = <span class="number">2</span> ; i &lt;= <span class="number">10000</span> ; i++ )</span><br><span class="line">        <span class="keyword">if</span> ( judge (i) ) print(i) ;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> 3）测试</p>
<figure>
<img src="/report/experiment/a6d0e365fa95995f1193ee01b650146a.png" alt="图3-9程序设计题（2）的程序运行截图">
<figcaption aria-hidden="true">图3-9程序设计题（2）的程序运行截图</figcaption>
</figure>
<p>（3）自幂数是指一个n位数，它的每个位上的数字的n次幂之和等于它本身。水仙花数是3位的自幂数，除此之外，还有4位的四叶玫瑰数、5位的五角星数、6位的六合数、7位的北斗星数、8位的八仙数等。</p>
<p>编写一个函数，判断其参数n是否为自幂数，如果是，返回1；否则，返回0。要求main函数能反复接收从键盘输入的整数k，k代表位数，然后调用上述函数求k位的自幂数，输出所有k位自幂数，并输出相应的信息，例如"3位的水仙花数共有4个153，370，371，407"。当k=0时程序结束执行。</p>
<ol type="1">
<li>解题思路：</li>
</ol>
<ol type="1">
<li><p>输入k,调用solve函数进行解答。</p></li>
<li><p>solve函数：</p></li>
</ol>
<ul>
<li><p>先运用循环从10^(k-1)到10^k-1进行遍历，寻找符合条件的数</p></li>
<li><p>再将各位的数字按题目意思进行验证，如果符合则存入数组</p></li>
<li><p>进行输出</p></li>
</ul>
<ol start="3" type="1">
<li>结束</li>
</ol>
<p>2）程序清单 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> re register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 1005</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> k , cnt ;</span><br><span class="line"><span class="keyword">int</span> a[maxn] ;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">qpow</span> <span class="params">( <span class="keyword">int</span> x, <span class="keyword">int</span> y )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> ans = <span class="number">1</span> ;</span><br><span class="line">	<span class="keyword">while</span> (y)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>( y &amp; <span class="number">1</span> ) ans *= x ;</span><br><span class="line">		x = x * x ; y &gt;&gt;= <span class="number">1</span> ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ans ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>( re <span class="keyword">int</span> i = qpow(<span class="number">10</span>,k<span class="number">-1</span>) ; i &lt;= qpow(<span class="number">10</span>,k)<span class="number">-1</span> ; i ++ )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> tmp = i , sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (tmp)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">int</span> x = tmp%<span class="number">10</span> ;</span><br><span class="line">                sum += qpow(x,k);</span><br><span class="line">                tmp /= <span class="number">10</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>( sum == i ) a[++cnt] = i ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ( k == <span class="number">3</span> ) <span class="built_in">printf</span>(<span class="string">&quot;3位的水仙花数共有%d个&quot;</span>,cnt) ;</span><br><span class="line">        <span class="keyword">if</span> ( k == <span class="number">4</span> ) <span class="built_in">printf</span>(<span class="string">&quot;4位的四叶玫瑰数共有%d个&quot;</span>,cnt) ;</span><br><span class="line">        <span class="keyword">if</span> ( k == <span class="number">5</span> ) <span class="built_in">printf</span>(<span class="string">&quot;5位的五角星数共有%d个&quot;</span>,cnt) ;</span><br><span class="line">        <span class="keyword">if</span> ( k == <span class="number">6</span> ) <span class="built_in">printf</span>(<span class="string">&quot;6位的六合数共有%d个&quot;</span>,cnt) ;</span><br><span class="line">        <span class="keyword">if</span> ( k == <span class="number">7</span> ) <span class="built_in">printf</span>(<span class="string">&quot;7位的北斗星数共有%d个&quot;</span>,cnt) ;</span><br><span class="line">        <span class="keyword">if</span> ( k == <span class="number">8</span> ) <span class="built_in">printf</span>(<span class="string">&quot;8位的八仙数共有%d个&quot;</span>,cnt) ;</span><br><span class="line">        <span class="keyword">for</span> ( re <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; cnt ; i++)</span><br><span class="line">        	<span class="built_in">printf</span>(<span class="string">&quot;%d,&quot;</span>,a[i]) ;</span><br><span class="line">    	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,a[cnt]) ;</span><br><span class="line">    	cnt = <span class="number">0</span> ; <span class="built_in">memset</span> ( a , <span class="number">0</span> , <span class="keyword">sizeof</span>(a) ) ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;k);</span><br><span class="line">        <span class="keyword">if</span> ( k == <span class="number">0</span> ) <span class="keyword">break</span> ;</span><br><span class="line">        solve(k) ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> 3）测试</p>
<figure>
<img src="/report/experiment/e2d0793dd50f58f6ac396874a0699d1d.png" alt="图3-10程序设计题（3）的程序运行截图">
<figcaption aria-hidden="true">图3-10程序设计题（3）的程序运行截图</figcaption>
</figure>
<h2 id="实验小结-2">3.3 实验小结</h2>
<p>（1）通过这次实验，我熟悉和掌握了函数的定义、声明；函数调用与参数传递，函数返回值类型的定义和返回值使用。</p>
<p>（2）通过这次实验，我熟悉和掌握了不同存储类型变量的使用。</p>
<p>（3）通过这次实验，我练习使用了集成开发环境中的调试功能：单步执行、设置断点、观察变量值。</p>
<h1 id="实验4-编译预处理实验">实验4 编译预处理实验</h1>
<h2 id="实验目的-3">4.1实验目的</h2>
<p>（1）掌握文件包含、宏定义、条件编译和assert宏的使用；</p>
<p>（2）练习使用集成开发环境中的调试功能：单步执行、设置断点、观察变量值。</p>
<p>（3）熟悉多文件编译技术</p>
<h2 id="实验内容-2">4.2实验内容</h2>
<h3 id="程序改错-1">4.2.1．程序改错</h3>
<p>下面是用宏来计算平方差、交换两数的源程序.在这个源程序中存在若干错误，要求对该程序进行调试修改，使之能够正确完成指定任务。
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SUM a+b</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DIF a-b</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SWAP(a,b)  a=b,b=a</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a,b;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Input two integers a, b:&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;a,&amp;b);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\nSUM=%d\n the difference between square of a and square of b is:%d&quot;</span>,SUM, SUM*DIF);</span><br><span class="line">    SWAP(a,b);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\nNow a=%d,b=%d\n&quot;</span>,a,b);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <strong>解答：</strong></p>
<p>（1）错误修改：</p>
<ol type="1">
<li>第2行的宏定义有误，正确形式为：</li>
</ol>
<p><code>#define SUM (a+b)</code></p>
<ol start="2" type="1">
<li>第3行的宏定义有误，正确形式为：</li>
</ol>
<p><code>#define DIF (a-b)</code></p>
<ol start="3" type="1">
<li>第4行的宏定义有误，正确形式为：</li>
</ol>
<p><code>#define SWAP(a,b) t=a,a=b,b=t</code></p>
<ol start="4" type="1">
<li>第7行的宏定义不全，正确形式为：</li>
</ol>
<p><code>int a,b,t;</code></p>
<p>（2）错误修改后运行结果：</p>
<figure>
<img src="/report/experiment/d649e9df5e226b9769af2999639cbdd5.png" alt="图4-1 程序修改题的运行结果图">
<figcaption aria-hidden="true">图4-1 程序修改题的运行结果图</figcaption>
</figure>
<h3 id="程序修改替换-1">4.2.2．程序修改替换</h3>
<p>下面是用函数实现求三个数中最大数、计算两浮点数之和的程序。在这个源程序中存在若干语法和逻辑错误。</p>
<p>要求：（1）对这个例子程序进行调试修改，使之能够正确完成指定任务；</p>
<p>（2）用带参数的宏替换函数max，来实现求最大数的功能。 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span> </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a, b, c;</span><br><span class="line">  	<span class="keyword">float</span> d, e;</span><br><span class="line">  	<span class="built_in">printf</span>(<span class="string">&quot;Input three integers:&quot;</span>);</span><br><span class="line">  	<span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line">  	<span class="built_in">printf</span>(<span class="string">&quot;\nThe maximum of them is %d\n&quot;</span>,max(a,b,c));</span><br><span class="line">  	<span class="built_in">printf</span>(<span class="string">&quot;Input two floating point numbers:&quot;</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%f %f&quot;</span>,&amp;d,&amp;e);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\nThe sum of them is  %f\n&quot;</span>,sum(d,e));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> z)</span>					</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> m=z;</span><br><span class="line">	<span class="keyword">if</span> (x&gt;y)</span><br><span class="line">		<span class="keyword">if</span>(x&gt;z) m=x;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">    	<span class="keyword">if</span>(y&gt;z) m=y;</span><br><span class="line">    <span class="keyword">return</span> m;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">sum</span><span class="params">(<span class="keyword">float</span> x, <span class="keyword">float</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> x+y;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<strong>解答：</strong></p>
<p>（1）错误修改：</p>
<ol type="1">
<li>第2行的声明有误，正确形式为：</li>
</ol>
<p><code>int max(int x, int y, int z);</code></p>
<p><code>float sum(float x, float y);</code></p>
<p>（2）程序替换：</p>
<p><code>#define max(a,b,c) ( a &gt; b ) ? ( a &gt; c ? a : c ) : ( c
&gt; b ? c : b )</code></p>
<p>（3）错误修改后运行结果：</p>
<p><strong><img src="/report/experiment/0d100976a62d3d09d6dbc25fee7634b7.png" alt="图4-2 程序修改替换题的运行结果图"></strong></p>
<p>4.2.3．跟踪调试</p>
<p>下面程序利用R计算圆的面积s，以及面积s的整数部分。现要求：</p>
<p>（1）修改程序，使程序编译通过且能运行；</p>
<p>（2）单步执行。进入函数integerl_fraction时，watch窗口中x为何值？在返回main时,
watch窗口中i为何值？</p>
<p>（3）修改程序，使程序能输出面积s值的整数部分（要求四舍五入），不会输出错误信息assertion
failed。 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*实验4-3跟踪调试题程序利用R计算圆的面积s*/</span> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span>  R</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">float</span>  r, s;</span><br><span class="line">	<span class="keyword">int</span> s_integer=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">printf</span> (<span class="string">&quot;Input a number: &quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%f&quot;</span>,&amp;r);</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">ifdef</span>  R</span></span><br><span class="line">       s=<span class="number">3.14159</span>*r*r;</span><br><span class="line">       <span class="built_in">printf</span>(<span class="string">&quot;Area of round is: %f\n&quot;</span>,s);</span><br><span class="line">       s_integer=integer_fraction(s);</span><br><span class="line">       assert((s-s_integer)&lt;<span class="number">0.5</span>);</span><br><span class="line">       <span class="built_in">printf</span>(<span class="string">&quot;The integer fraction of area is %d\n&quot;</span>, s_integer);</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">integer_fraction</span><span class="params">(<span class="keyword">float</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i=x;</span><br><span class="line">  <span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> （1）错误修改：</p>
<ol type="1">
<li>第1行的编译预处理有误，正确形式为：</li>
</ol>
<p><code>#include &lt;stdio.h&gt;</code></p>
<p><code>#include &lt;assert.h&gt;</code></p>
<ol start="2" type="1">
<li>第5行未声明函数，正确形式为：</li>
</ol>
<p><code>int integer_fraction(float x);</code></p>
<p>（2）单步执行：</p>
<p>1)进入函数integerl_fraction时，watch窗口中x为何值？</p>
<p>2）在返回main时, watch窗口中i为何值？</p>
<figure>
<img src="/report/experiment/e2d56e18ae2574340a3e6934d608a4fa.png" alt="图4-3 跟踪调试题的单步执行图">
<figcaption aria-hidden="true">图4-3 跟踪调试题的单步执行图</figcaption>
</figure>
<p>（3）错误修改：</p>
<ol type="1">
<li>第16行的assert有误，正确形式为：</li>
</ol>
<p><code>assert((s-s_integer)&lt;1.0);</code></p>
<p>（4）修改后的运行结果：</p>
<figure>
<img src="/report/experiment/702a8ec0cdcfd88dc89a2946cbdd9a26.png" alt="图4-4 跟踪调试题的运行结果图">
<figcaption aria-hidden="true">图4-4 跟踪调试题的运行结果图</figcaption>
</figure>
<h3 id="程序设计-3">4.2.4．程序设计</h3>
<p>（1）三角形的面积是，其中，a,b,c为三角形的三边，要求编写程序用带参数的宏来计算三角形的面积。定义两个带参数的宏，一个用来求s，另一个用来求area。</p>
<p>1 解题思路：</p>
<ol type="1">
<li><p>对area，s进行宏定义</p></li>
<li><p>读入a,b,c</p></li>
<li><p>输出area</p></li>
<li><p>结束</p></li>
</ol>
<p>2）程序清单 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> re register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> s ( ( a + b + c ) / 2 )</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> area ( sqrt( s * ( s - a ) * ( s - b ) * ( s - c ) ) )</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">double</span> a , b , c ;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lf%lf%lf&quot;</span>,&amp;a,&amp;b,&amp;c) ;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lf&quot;</span>,area) ;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> 3）程序运行结果截图</p>
<figure>
<img src="/report/experiment/cdde5a83828c0e1022b7d8872d3f435f.png" alt="图4-5程序设计题（1）的运行结果图">
<figcaption aria-hidden="true">图4-5程序设计题（1）的运行结果图</figcaption>
</figure>
<p>（2）用条件编译方法来编写程序。输入一行英文字符序列，可以任选两种方式之一输出：一为原文输出；二为变换字母的大小写后输出。例如小写‘a’变成大写‘A’，大写‘D’变成小写‘d’，其他字符不变。用#define命令控制是否变换字母的大小写。例如，#define
CHANGE 1 则输出变换后的文字，若#define CHANGE 0则原文输出。</p>
<p>1 解题思路：</p>
<ol type="1">
<li><p>对输入的字符串用gets()函数进行读入</p></li>
<li><p>使用#ifdef命令进行判断</p></li>
<li><p>进入相应的程序模块进行有关处理、输出</p></li>
<li><p>结束</p></li>
</ol>
<p>2）程序清单 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> re register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 10005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> base ( <span class="meta-string">&#x27;a&#x27;</span> - <span class="meta-string">&#x27;A&#x27;</span> )</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// #define CHANGE0</span></span><br><span class="line"><span class="comment">// #define CHANGE1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> s[maxn] ;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    gets(s) ;</span><br><span class="line"></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">ifdef</span> CHANGE0</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s&quot;</span>,s ) ; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">    <span class="meta">#<span class="meta-keyword">ifdef</span> CHANGE1</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="built_in">strlen</span>(s) ;</span><br><span class="line">        <span class="keyword">for</span> ( re <span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; cnt ; i++ ) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>( s[i] &gt;= <span class="string">&#x27;A&#x27;</span> &amp;&amp; s[i] &lt;= <span class="string">&#x27;Z&#x27;</span> ) </span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span> ,s[i] + base ) ;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>( s[i] &gt;= <span class="string">&#x27;a&#x27;</span> &amp;&amp; s[i] &lt;= <span class="string">&#x27;z&#x27;</span> )</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span> ,s[i] - base ) ;</span><br><span class="line">            <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,s[i] ) ;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 3）程序运行结果截图</p>
<figure>
<img src="/report/experiment/32604dbb54835fc12314ca37e0e1701c.png" alt="图4-6程序设计题（2）的运行结果图（1）">
<figcaption aria-hidden="true">图4-6程序设计题（2）的运行结果图（1）</figcaption>
</figure>
<figure>
<img src="/report/experiment/bb661f78190a39e2843052d350189f7d.png" alt="图4-7程序设计题（2）的运行结果图（2）">
<figcaption aria-hidden="true">图4-7程序设计题（2）的运行结果图（2）</figcaption>
</figure>
<p>（3）假设一个C程序由file1.c和file2.c两个源文件及一个file.h头文件组成，file1.c、file2.c和file.h的内容分别如下所述。试编辑该多文件C程序，补充file.h头文件内容，然后编译和链接。然后运行最后生成的可执行文件。
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*源文件file1.c的内容*/</span></span><br><span class="line">	<span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;file.h&quot;</span></span></span><br><span class="line"><span class="keyword">int</span> x,y;             <span class="comment">/* 外部变量的定义性说明 */</span></span><br><span class="line"><span class="keyword">char</span> ch;             <span class="comment">/* 外部变量的定义性说明 */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">        x=<span class="number">10</span>;</span><br><span class="line">        y=<span class="number">20</span>;</span><br><span class="line">        ch=getchar();</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;in file1 x=%d,y=%d,ch is %c\n&quot;</span>,x,y,ch);</span><br><span class="line">        func1();</span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*源文件file2.c的内容为：*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;file.h&quot;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func1</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">        x++;</span><br><span class="line">        y++;</span><br><span class="line">        ch++;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;in file2 x=%d,y=%d,ch is %c\n&quot;</span>,x,y,ch);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 1) 解题思路：</p>
<ol type="1">
<li><p>对file.h进行编写</p></li>
<li><p>对file1.c进行修改，使其能够正常运行。</p></li>
</ol>
<p>2）程序清单 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//file.h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">int</span> x,y;</span><br><span class="line"><span class="keyword">char</span> ch; </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func1</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">        x++;</span><br><span class="line">        y++;</span><br><span class="line">        ch++;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;in file2 x=%d,y=%d,ch is %c\n&quot;</span>,x,y,ch);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//file1.c</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;file.h&quot;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    x=<span class="number">10</span>;</span><br><span class="line">    y=<span class="number">20</span>;</span><br><span class="line">    ch=getchar();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;in file1 x=%d,y=%d,ch is %c\n&quot;</span>,x,y,ch);</span><br><span class="line">    func1();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> 3）程序运行结果截图</p>
<figure>
<img src="/report/experiment/0807a5d4a3939fe76a2ad8455ab4a4cd.png" alt="图4-8程序设计题（3）的运行结果图">
<figcaption aria-hidden="true">图4-8程序设计题（3）的运行结果图</figcaption>
</figure>
<h2 id="实验小结-3">4.3实验小结</h2>
<p>（1）通过这次实验，我掌握了文件包含、宏定义、条件编译和assert宏的使用；</p>
<p>（2）通过这次实验，我练习使用了集成开发环境中的调试功能：单步执行、设置断点、观察变量值。</p>
<p>（3）通过这次实验，我熟悉了多文件编译技术</p>
<h1 id="实验5-数组实验">实验5 数组实验</h1>
<h2 id="实验目的-4">5.1 实验目的</h2>
<p>（1）掌握数组的说明、初始化和使用。</p>
<p>（2）掌握一维数组作为函数参数时实参和形参的用法。</p>
<p>（3）掌握字符串处理函数的设计，包括串操作函数及数字串与数之间转换函数实现算法。</p>
<p>（4）掌握基于分治策略的二分查找算法和选择法排序算法的思想，以及相关算法的实现。</p>
<h2 id="实验内容及要求-1">5.2 实验内容及要求</h2>
<h3 id="源程序改错与跟踪调试">5.2.1 源程序改错与跟踪调试</h3>
<p>在下面所给的源程序中，函数strcate(t,s)的功能是将字符串s连接到字符串t的尾部；函数strdelc(s,c)的功能是从字符串s中删除所有与给定字符c相同的字符，程序应该能够输出如下结果：
<figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Programming <span class="keyword">Language</span></span><br><span class="line"></span><br><span class="line">ProgrammingLanguage <span class="keyword">Language</span></span><br><span class="line"></span><br><span class="line">ProgrmingLnguge</span><br></pre></td></tr></table></figure>
跟踪和分析源程序中存在的问题，排除程序中的各种逻辑错误，使之能够输出正确的结果。</p>
<p>单步执行源程序。进跟踪进入strcate时，观察字符数组t和s中的内容，分析结果是否正确。当单步执行光条刚落在第二个while语句所在行时，i为何值？t[i]为何值？分析该结果是否存在问题。当单步执行光条落在strcate函数块结束标记即右花括号"}"所在行时，字符数组t和s分别为何值？分析是否实现了字符串连接。</p>
<figure>
<img src="/report/experiment/036bef4c566af4e0c3b3156b6647075a.png" alt="图5-1 源程序改错与跟踪调试题的示意图1">
<figcaption aria-hidden="true">图5-1
源程序改错与跟踪调试题的示意图1</figcaption>
</figure>
<figure>
<img src="/report/experiment/503af37a1c7c63b6b4c28fc1c2fdc772.png" alt="图5-2 源程序改错与跟踪调试题的示意图2">
<figcaption aria-hidden="true">图5-2
源程序改错与跟踪调试题的示意图2</figcaption>
</figure>
<figure>
<img src="/report/experiment/7d0210b6c066fa0408f28b0ea4cdcceb.png" alt="图5-3 源程序改错与跟踪调试题的示意图3">
<figcaption aria-hidden="true">图5-3
源程序改错与跟踪调试题的示意图3</figcaption>
</figure>
<figure>
<img src="/report/experiment/52de107fb13bcca726fa507c50672c12.png" alt="图5-4 源程序改错与跟踪调试题的示意图4">
<figcaption aria-hidden="true">图5-4
源程序改错与跟踪调试题的示意图4</figcaption>
</figure>
<p>跟踪进入函数strdelc时，观察字符数组s中的内容和字符c的值，分析结果是否正确。单步执行for语句过程中，观察字符数组s,
j和k值的变化，分析该结果是否存在问题。当单步执行光条落在strdelc函数块结束标记"}"所在行时，字符串s为何值？分析是否实现了所要求的删除操作。</p>
<figure>
<img src="/report/experiment/7d0210b6c066fa0408f28b0ea4cdcceb.png" alt="图5-5 源程序改错与跟踪调试题的示意图5">
<figcaption aria-hidden="true">图5-5
源程序改错与跟踪调试题的示意图5</figcaption>
</figure>
<p>1）修改后的源程序： <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">strcate</span><span class="params">(<span class="keyword">char</span> [],<span class="keyword">char</span> [])</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">strdelc</span><span class="params">(<span class="keyword">char</span> [],<span class="keyword">char</span> )</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> a[]=<span class="string">&quot;Language&quot;</span>, b[]=<span class="string">&quot;Programming&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%s %s\n&quot;</span>, b,a);</span><br><span class="line">    strcate(b,a);	</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s %s\n&quot;</span>,b,a);</span><br><span class="line">	strdelc(b , <span class="string">&#x27;a&#x27;</span>);	</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>,b);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">strcate</span><span class="params">(<span class="keyword">char</span> t[],<span class="keyword">char</span> s[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>,  j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>( t[i++] != <span class="string">&#x27;\0&#x27;</span> ) ;</span><br><span class="line">    i -- ;</span><br><span class="line">    <span class="keyword">while</span>((t[i++] = s[j++] )!= <span class="string">&#x27;\0&#x27;</span>) ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">strdelc</span><span class="params">(<span class="keyword">char</span> s[], <span class="keyword">char</span> c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> j,k;</span><br><span class="line">    <span class="keyword">for</span>( j = <span class="number">0</span> , k = <span class="number">0</span> ; s[j] != <span class="string">&#x27;\0&#x27;</span> ; j++)</span><br><span class="line">        <span class="keyword">if</span>(s[j] != c)	s[k++] = s[j] ;</span><br><span class="line">    <span class="keyword">while</span> ( k &lt;= j ) s[k++] = <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*实验5程序改错与跟踪调试题程序*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">strcate</span><span class="params">(<span class="keyword">char</span> [],<span class="keyword">char</span> [])</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">strdelc</span><span class="params">(<span class="keyword">char</span> [],<span class="keyword">char</span> )</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> a[]=<span class="string">&quot;Language&quot;</span>, b[]=<span class="string">&quot;Programming&quot;</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%s %s\n&quot;</span>, b,a);</span><br><span class="line">	strcate(b,a);	</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s %s\n&quot;</span>,b,a);</span><br><span class="line">	strdelc(b, <span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>,b);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">strcate</span><span class="params">(<span class="keyword">char</span> t[],<span class="keyword">char</span> s[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>,  j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(t[i++]) ;</span><br><span class="line">    <span class="keyword">while</span>((t[i++] = s[j++] )!= <span class="string">&#x27;\0&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">strdelc</span><span class="params">(<span class="keyword">char</span> s[], <span class="keyword">char</span> c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> j,k;</span><br><span class="line">    <span class="keyword">for</span>(j=k=<span class="number">0</span>; s[j] != <span class="string">&#x27;\0&#x27;</span>; j++)</span><br><span class="line">        <span class="keyword">if</span>(s[j] != c)	s[k++] = s[j];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure> ### 5.2.2 源程序完善和修改替换</p>
<p>(1)下面的源程序用于求解瑟夫问题：M个人围成一圈，从第一个人开始依次从1至N循环报数，每当报数为N时报数人出圈，直到圈中只剩下一个人为止。①请在源程序中的下划线处填写合适的代码来完善该程序。
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 10</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 3</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a[M], b[M];	<span class="comment">/* 数组a存放圈中人的编号，数组b存放出圈人的编号 */</span></span><br><span class="line">    <span class="keyword">int</span> i, j, k;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; M; i++)			<span class="comment">/* 对圈中人按顺序编号1—M */</span></span><br><span class="line">    	a[i] = i + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(i = M, j = <span class="number">0</span>; i &gt; <span class="number">1</span>; i--)&#123;</span><br><span class="line">    <span class="comment">/* i表示圈中人个数，初始为M个，剩1个人时结束循环；j表示当前报数人的位置 */</span></span><br><span class="line">    <span class="keyword">for</span>(k = <span class="number">1</span>; k &lt;= N; k++)			<span class="comment">/* 1至N报数 */</span></span><br><span class="line">    <span class="keyword">if</span>(++j &gt; i - <span class="number">1</span>) j = <span class="number">0</span>;<span class="comment">/* 最后一个人报数后第一个人接着报，形成一个圈 */</span></span><br><span class="line">                b[M-i] = j ? _______:______;	<span class="comment">/* 将报数为N的人的编号存入数组b */</span></span><br><span class="line">                <span class="keyword">if</span>(j)</span><br><span class="line">    <span class="keyword">for</span>(k = --j; k &lt; i; k++)	<span class="comment">/* 压缩数组a，使报数为N的人出圈 */</span></span><br><span class="line">    ______________;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>;i &lt; M<span class="number">-1</span>; i++)		<span class="comment">/* 按次序输出出圈人的编号 */</span></span><br><span class="line">    <span class="built_in">printf</span>(“%<span class="number">6</span>d”, b[i]);</span><br><span class="line">    <span class="built_in">printf</span>(“%<span class="number">6</span>d\n”, a[<span class="number">0</span>]);			<span class="comment">/* 输出圈中最后一个人的编号 */</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;	</span><br></pre></td></tr></table></figure> 填空后的程序： <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 10</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 3</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a[M], b[M];	<span class="comment">/* 数组a存放圈中人的编号，数组b存放出圈人的编号 */</span></span><br><span class="line">    <span class="keyword">int</span> i, j, k;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; M; i++)			<span class="comment">/* 对圈中人按顺序编号1—M */</span></span><br><span class="line">    a[i] = i + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(i = M , j = <span class="number">0</span> ; i &gt; <span class="number">1</span>; i--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">/* i表示圈中人个数，初始为M个，剩1个人时结束循环；j表示当前报数人的位置 */</span></span><br><span class="line">        <span class="keyword">for</span>(k = <span class="number">1</span>; k &lt;= N; k++)			<span class="comment">/* 1至N报数 */</span></span><br><span class="line">            <span class="keyword">if</span>( ++j &gt; i - <span class="number">1</span>) j = <span class="number">0</span> ;  <span class="comment">/* 最后一个人报数后第一个人接着报，形成一个圈 */</span></span><br><span class="line">        b[M-i] = ( j ? a[j<span class="number">-1</span>] : a[<span class="number">1</span>] ) ;	<span class="comment">/* 将报数为N的人的编号存入数组b */</span></span><br><span class="line">        <span class="keyword">if</span>(j)</span><br><span class="line">            <span class="keyword">for</span>(k = --j ; k &lt; i; k++)	<span class="comment">/* 压缩数组a，使报数为N的人出圈 */</span></span><br><span class="line">                a[k] = a[k+<span class="number">1</span>] ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span> ; i &lt; M - <span class="number">1</span> ; i++ )		<span class="comment">/* 按次序输出出圈人的编号 */</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%6d&quot;</span>, b[i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%6d\n&quot;</span>, a[<span class="number">0</span>]);			<span class="comment">/* 输出圈中最后一个人的编号 */</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;	</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">3 6 9 2 7 1 8 5 10 4</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
②上面的程序中使用数组元素的值表示圈中人的编号，故每当有人出圈时都要压缩数组，这种算法不够精炼。如果采用做标记的办法，即每当有人出圈时对相应数组元素做标记，从而可省掉压缩数组的时间，这样处理效率会更高一些。请采用做标记的办法修改程序，并使修改后的程序与原程序具有相同的功能。</p>
<p>优化后的程序： <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 10</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 3</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> re register</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> vis[M+<span class="number">1</span>] = &#123;<span class="number">0</span>&#125; , now = <span class="number">0</span> ; ;</span><br><span class="line">    <span class="keyword">for</span>( re <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt;= M ; i++ )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> ( re <span class="keyword">int</span> j = <span class="number">1</span> ; j &lt;= N ; j++ )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> ( ++ now &gt; M ) now = <span class="number">1</span> ;</span><br><span class="line">            <span class="keyword">if</span> ( vis[now] ) j-- ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%6d&quot;</span>,now) ;</span><br><span class="line">        vis[now] = <span class="number">1</span> ; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;	</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure> ### 5.2.3 程序设计</p>
<p>以下（1）至（3）题对应Educoder教学平台"C语言实验"课程，实验5，第10关实验5-1、第11关实验5-2，以及第12关实验5-3。</p>
<p>(1)输入一个整数，将它在内存中二进制表示的每一位转化成对应的数字字符并且存放到一个字符数组中，然后输出该整数的二进制表示。</p>
<p>1 解题思路：</p>
<ol type="1">
<li><p>将字符数组全部初始化为字符0</p></li>
<li><p>输入整数x</p></li>
<li><p>如果整数x的二进制末位为1，则字符数组对应的位置为1，反之为0，并将整数x右移一位。</p></li>
<li><p>输出字符数组c</p></li>
<li><p>结束</p></li>
</ol>
<p>2）程序清单 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> re register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 40</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> c[maxn] ;</span><br><span class="line"><span class="keyword">int</span> x ;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;x) ;</span><br><span class="line">    <span class="keyword">for</span>( re <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt;= <span class="number">32</span> ; i++ )</span><br><span class="line">    &#123;</span><br><span class="line">        c[i] = x&amp;<span class="number">1</span> ? <span class="string">&#x27;1&#x27;</span> : <span class="string">&#x27;0&#x27;</span> ;</span><br><span class="line">        x &gt;&gt;= <span class="number">1</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> ( re <span class="keyword">int</span> i = <span class="number">32</span> ; i &gt;= <span class="number">1</span> ; i-- ) </span><br><span class="line">        <span class="built_in">printf</span> (<span class="string">&quot;%c&quot;</span>,c[i]) ;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 3）程序运行结果截图</p>
<figure>
<img src="/report/experiment/b180a4ebd84b7f433832ab199b1fa09a.png" alt="图5-6 程序设计题1的程序运行截图">
<figcaption aria-hidden="true">图5-6
程序设计题1的程序运行截图</figcaption>
</figure>
<p>（2）编写一个C程序，要求采用模块化程序设计思想，将相关功能用函数实现，并提供菜单选项。该程序具有以下功能：</p>
<p>①"成绩输入"，输入n个学生的姓名和C语言课程的成绩。</p>
<p>②"成绩排序"，将成绩按从高到低的次序排序，姓名同时进行相应调整。</p>
<p>③"成绩输出"，输出排序后所有学生的姓名和C语言课程的成绩。</p>
<p>④"成绩查找"，输入一个C语言课程成绩值，用二分查找进行搜索。如果查找到有该成绩，则输出该成绩学生的姓名和C语言课程的成绩；否则，输出提示"not
found!"。</p>
<p>1 解题思路：</p>
<ol type="1">
<li><p>输入order</p></li>
<li><p>对order进行判断：</p></li>
</ol>
<ul>
<li><p>如果order为1 ，调用函数进行数据录入</p></li>
<li><p>如果order为2 ，调用函数进行归并排序</p></li>
<li><p>如果order为3 ，调用函数进行姓名、成绩的输出</p></li>
<li><p>如果order为4 ，调用函数进行二分查找</p></li>
<li><p>如果order为0 ， 则跳出while循环</p></li>
</ul>
<ol start="3" type="1">
<li>结束</li>
</ol>
<p>2）程序清单 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> re register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 1005</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">student</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">char</span> name[<span class="number">15</span>] ;</span><br><span class="line">    <span class="keyword">int</span> score ;</span><br><span class="line">&#125;stu[maxn],r[maxn];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n,order, first = <span class="number">1</span> , last , cnt=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n) ;</span><br><span class="line">    cnt += n ;</span><br><span class="line">    last = first + n - <span class="number">1</span> ;</span><br><span class="line">    <span class="keyword">for</span> (re <span class="keyword">int</span> i = first ; i &lt;= last ; i ++ )</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s%d&quot;</span>,stu[i].name , &amp;stu[i].score) ;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d records were input!\n&quot;</span>,n) ;</span><br><span class="line">    first = last + <span class="number">1</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span> <span class="params">( struct student *x , struct student *y )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">student</span> <span class="title">tmp</span> ;</span></span><br><span class="line">    tmp = *x ;</span><br><span class="line">    *x = *y ;</span><br><span class="line">    *y = tmp ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">msort</span> <span class="params">( <span class="keyword">int</span> s , <span class="keyword">int</span> t )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ( s == t ) <span class="keyword">return</span> ;</span><br><span class="line">    re <span class="keyword">int</span> mid = ( s + t ) &gt;&gt; <span class="number">1</span> ;</span><br><span class="line">    msort ( s , mid ) ;</span><br><span class="line">    msort ( mid + <span class="number">1</span> , t) ;</span><br><span class="line">    <span class="keyword">int</span> i = s , j = mid + <span class="number">1</span> , k = s ;</span><br><span class="line">    <span class="keyword">while</span> ( i &lt;= mid &amp;&amp; j &lt;= t ) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>( stu[i].score &gt;= stu[j].score )</span><br><span class="line">            swap ( &amp;r[k++] , &amp;stu[i++] ) ;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            swap ( &amp;r[k++] , &amp;stu[j++] ) ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> ( i &lt;= mid ) </span><br><span class="line">        swap ( &amp;r[k++] , &amp;stu[i++] ) ;</span><br><span class="line">    <span class="keyword">while</span> ( j &lt;= t )</span><br><span class="line">        swap ( &amp;r[k++] , &amp;stu[j++] ) ;</span><br><span class="line">    <span class="keyword">for</span>(re <span class="keyword">int</span> i = s ; i &lt;= t ; i ++ ) </span><br><span class="line">        swap ( &amp;r[i] , &amp;stu[i] ) ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    msort( <span class="number">1</span> , cnt ) ;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Reorder finished!\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func3</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>( re <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt;= cnt ; i ++ )</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s %d\n&quot;</span>,stu[i].name,stu[i].score);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func4</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x , sign = <span class="number">0</span> ;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;x) ;</span><br><span class="line">    <span class="keyword">for</span> ( re <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt;= cnt ; i ++ )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> ( stu[i].score == x )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%s %d\n&quot;</span>,stu[i].name,stu[i].score) ;</span><br><span class="line">            sign = <span class="number">1</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ( !sign ) <span class="built_in">printf</span>(<span class="string">&quot;not found!\n&quot;</span>) ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> ( <span class="number">1</span> )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;order);</span><br><span class="line">        <span class="keyword">if</span>( order == <span class="number">1</span> ) func1();</span><br><span class="line">        <span class="keyword">if</span>( order == <span class="number">2</span> ) func2();</span><br><span class="line">        <span class="keyword">if</span>( order == <span class="number">3</span> ) func3();</span><br><span class="line">        <span class="keyword">if</span>( order == <span class="number">4</span> ) func4();</span><br><span class="line">        <span class="keyword">if</span>( order == <span class="number">0</span> ) <span class="keyword">break</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> * 程序运行结果截图</p>
<figure>
<img src="/report/experiment/f2dc5ca1f4185cbbc09c834ad3f2bf70.png" alt="图5-7 程序设计题2的程序运行截图">
<figcaption aria-hidden="true">图5-7
程序设计题2的程序运行截图</figcaption>
</figure>
<p>（3）求解N皇后问题，即在N×N的棋盘上摆放N个皇后，要求任意两个皇后不能在同一行、同一列、同一对角线上。输入棋盘的大小N（N取值1-10），如果能满足摆放要求，则输出所有可能的摆放法的数量，否则输出"无解。"</p>
<p>1 解题思路：</p>
<ol type="1">
<li><p>输入n</p></li>
<li><p>调用search函数进行搜索</p></li>
<li><p>输出结果</p></li>
<li><p>结束</p></li>
</ol>
<p>2）程序清单 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> crax[<span class="number">2000</span>],cray[<span class="number">2000</span>],cx[<span class="number">2000</span>];</span><br><span class="line"><span class="keyword">int</span> ans[<span class="number">2000</span>];</span><br><span class="line"><span class="keyword">int</span> n,tot;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">search</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (x&gt;n) tot++ ;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> y=<span class="number">1</span>;y&lt;=n;y++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (crax[x+y]) <span class="keyword">continue</span>;</span><br><span class="line">		<span class="keyword">if</span> (cray[x-y+<span class="number">10</span>]) <span class="keyword">continue</span>;</span><br><span class="line">		<span class="keyword">if</span> (cx[y]) <span class="keyword">continue</span>;</span><br><span class="line">		ans[x]=y;</span><br><span class="line">		crax[x+y]=<span class="number">1</span>;</span><br><span class="line">		cray[x-y+<span class="number">10</span>]=<span class="number">1</span>;</span><br><span class="line">		cx[y]=<span class="number">1</span>;</span><br><span class="line">		search(x+<span class="number">1</span>);</span><br><span class="line">		crax[x+y]=<span class="number">0</span>;</span><br><span class="line">		cray[x-y+<span class="number">10</span>]=<span class="number">0</span>;</span><br><span class="line">		cx[y]=<span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">if</span> ( n == <span class="number">2</span> || n == <span class="number">3</span> )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;无解&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">	search(<span class="number">1</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,tot);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> 3）程序运行结果示意图</p>
<figure>
<img src="/report/experiment/124d718fecb8b47c59cb1064a608ea63.png" alt="图5-8 程序设计题3的程序运行截图">
<figcaption aria-hidden="true">图5-8
程序设计题3的程序运行截图</figcaption>
</figure>
<figure>
<img src="/report/experiment/aea7efc81adbc9d6bdc954225bfde329.png" alt="图5-9 程序设计题3的程序运行截图">
<figcaption aria-hidden="true">图5-9
程序设计题3的程序运行截图</figcaption>
</figure>
<h3 id="实验小结-4">5.3 实验小结</h3>
<p>（1）通过这次实验，我掌握了数组的说明、初始化和使用。</p>
<p>（2）通过这次实验，我掌握了一维数组作为函数参数时实参和形参的用法。</p>
<p>（3）通过这次实验，我掌握了字符串处理函数的设计，包括串操作函数及数字串与数之间转换函数实现算法。</p>
<p>（4）通过这次实验，我掌握了基于分治策略的二分查找算法和选择法排序算法的思想，以及相关算法的实现。</p>
<h1 id="实验6-指针实验">实验6 指针实验</h1>
<h2 id="实验目的-5">6.1、实验目的</h2>
<p>（1）熟练掌握指针的说明、赋值、使用。</p>
<p>（2）掌握用指针引用数组的元素，熟悉指向数组的指针的使用。</p>
<p>（3）熟练掌握字符数组与字符串的使用，掌握指针数组及字符指针数组的用法。</p>
<p>（4）掌握指针函数与函数指针的用法。</p>
<p>（5）掌握带有参数的main函数的用法。</p>
<h2 id="实验题目及要求">6.2、实验题目及要求</h2>
<h3 id="源程序改错题">6.2.1 源程序改错题</h3>
<p>在下面所给的源程序中，函数strcopy(t,
s)的功能是将字符串s复制给字符串t，并且返回串t的首地址。请单步跟踪程序，根据程序运行时出现的现象或观察到的字符串的值，分析并排除源程序的逻辑错误，使之能按照要求输出如下结果：
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">Input</span> <span class="selector-tag">a</span> <span class="selector-tag">string</span>:</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">programming</span>↙ （键盘输入）</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">programming</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">Input</span> <span class="selector-tag">a</span> <span class="selector-tag">string</span> <span class="selector-tag">again</span>:</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">language</span>↙ （键盘输入）</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">language</span></span><br></pre></td></tr></table></figure> <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">char</span> *<span class="title">strcopy</span><span class="params">(<span class="keyword">char</span> *, <span class="keyword">const</span> <span class="keyword">char</span> *)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> *s1, *s2, *s3;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;Input a string:\n&quot;</span>, s2);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, s2);</span><br><span class="line">	strcopy(s1, s2);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, s1);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;Input a string again:\n&quot;</span>, s2);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, s2);</span><br><span class="line">	s3 = strcopy(s1, s2);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, s3);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*将字符串s复制给字符串t，并且返回串t的首地址*/</span></span><br><span class="line"><span class="function"><span class="keyword">char</span> * <span class="title">strcopy</span><span class="params">(<span class="keyword">char</span> *t, <span class="keyword">const</span> <span class="keyword">char</span> *s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">while</span>(*t++ = *s++);</span><br><span class="line">	<span class="keyword">return</span> (t);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> <strong>解答：</strong></p>
<p>（1）错误修改：</p>
<ol type="1">
<li>第5行的字符数组定义错误，正确形式为：</li>
</ol>
<p><code>#define maxn 10005</code></p>
<p><code>char s1[maxn] , s2[maxn] , s3[maxn] ;</code></p>
<ol start="2" type="1">
<li>第12行的语句错误，正确形式为：</li>
</ol>
<p><code>strcopy(s3, s2);</code></p>
<p>（2）错误修改后运行结果：</p>
<figure>
<img src="/report/experiment/8d4284bb43019c24466744bb4c462f9b.png" alt="图6-1 源程序改错题的程序运行结果示意图">
<figcaption aria-hidden="true">图6-1
源程序改错题的程序运行结果示意图</figcaption>
</figure>
<h3 id="源程序完善修改替换题">6.2.2源程序完善、修改替换题</h3>
<p>（1）下面程序中函数strsort用于对字符串进行升序排序，在主函数中输入N个字符串（字符串长度不超过49）存入通过malloc动态分配的存储空间，然后调用strsort对这N个串按字典序升序排序。</p>
<p>①请在源程序中的下划线处填写合适的代码来完善该程序。
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;_________&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 4</span></span><br><span class="line"><span class="comment">/*对指针数组s指向的size个字符串进行升序排序*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">strsort</span><span class="params">(<span class="keyword">char</span> *s[], <span class="keyword">int</span> size)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	_______temp;</span><br><span class="line">	<span class="keyword">int</span> i, j;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;size<span class="number">-1</span>; i++)</span><br><span class="line">	<span class="keyword">for</span> (j=<span class="number">0</span>; j&lt;size-i<span class="number">-1</span>; j++)</span><br><span class="line">		<span class="keyword">if</span> (___________)</span><br><span class="line">		&#123;</span><br><span class="line">			temp = s[j];</span><br><span class="line"> ___________;</span><br><span class="line">			s[j+<span class="number">1</span>] = temp;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">char</span> *s[N], t[<span class="number">50</span>];</span><br><span class="line">	<span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;N; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		gets(t);</span><br><span class="line">		s[i] = (<span class="keyword">char</span> *)<span class="built_in">malloc</span>(<span class="built_in">strlen</span>(t)+<span class="number">1</span>);</span><br><span class="line">		<span class="built_in">strcpy</span>(_______);</span><br><span class="line">	&#125;</span><br><span class="line">	strsort(________);</span><br><span class="line">	<span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;N; i++)	&#123;<span class="built_in">puts</span>(s[i]); <span class="built_in">free</span>(s[i]);&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p><strong>解答：</strong>替换后的程序如下所示： <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 4</span></span><br><span class="line"><span class="comment">/*对指针数组s指向的size个字符串进行升序排序*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">strsort</span><span class="params">(<span class="keyword">char</span> *s[], <span class="keyword">int</span> size)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> *temp ;</span><br><span class="line">	<span class="keyword">int</span> i, j;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;size<span class="number">-1</span>; i++)</span><br><span class="line">		<span class="keyword">for</span> (j=<span class="number">0</span>; j&lt;size-i<span class="number">-1</span>; j++)</span><br><span class="line">			<span class="keyword">if</span> ( <span class="built_in">strcmp</span>( s[j] , s[j+<span class="number">1</span>]) &gt; <span class="number">0</span> )</span><br><span class="line">			&#123;</span><br><span class="line">				temp = s[j];</span><br><span class="line">				s[j] = s[j+<span class="number">1</span>] ;</span><br><span class="line">				s[j+<span class="number">1</span>] = temp;</span><br><span class="line">			&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">char</span> *s[N], t[<span class="number">50</span>];</span><br><span class="line">	<span class="keyword">for</span> ( i=<span class="number">0</span> ; i&lt;N ; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		gets(t);</span><br><span class="line">		s[i] = (<span class="keyword">char</span> *)<span class="built_in">malloc</span>(<span class="built_in">strlen</span>(t)+<span class="number">1</span>);</span><br><span class="line">		<span class="built_in">strcpy</span>( s[i] , t );</span><br><span class="line">	&#125;</span><br><span class="line">	strsort( s , N );</span><br><span class="line">	<span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;N; i++)	&#123;<span class="built_in">puts</span>(s[i]); <span class="built_in">free</span>(s[i]);&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> <img src="/report/experiment/54f42550a635245e5769693d5a0ce336.png" alt="图6-2 源程序替换题的程序运行结果示意图"></p>
<p>②数组作为函数参数其本质类型是指针。例如，对于形参char
*s[]，编译器将其解释为char
**s，两种写法完全等价。请用二级指针形参重写strsort函数，并且在该函数体的任何位置都不允许使用下标引用。</p>
<p><strong>解答：</strong>替换后的程序如下所示： <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 4</span></span><br><span class="line"><span class="comment">/*对指针数组s指向的size个字符串进行升序排序*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">strsort</span><span class="params">(<span class="keyword">char</span> **s , <span class="keyword">int</span> size)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> *temp ;</span><br><span class="line">	<span class="keyword">int</span> i, j;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;size<span class="number">-1</span>; i++)</span><br><span class="line">		<span class="keyword">for</span> (j=<span class="number">0</span>; j&lt;size-i<span class="number">-1</span>; j++)</span><br><span class="line">			<span class="keyword">if</span> ( <span class="built_in">strcmp</span>( *( s + j ) , *( s + j + <span class="number">1</span> ) ) &gt; <span class="number">0</span> )</span><br><span class="line">			&#123;</span><br><span class="line">				temp = *( s + j ) ;</span><br><span class="line">			    ( *( s + j ) ) = *( s + j + <span class="number">1</span> );</span><br><span class="line">				*( s + j + <span class="number">1</span> ) = temp;</span><br><span class="line">			&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">char</span> *s[N], t[<span class="number">50</span>];</span><br><span class="line">	<span class="keyword">for</span> ( i=<span class="number">0</span> ; i&lt;N ; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		gets(t);</span><br><span class="line">		s[i] = (<span class="keyword">char</span> *)<span class="built_in">malloc</span>(<span class="built_in">strlen</span>(t)+<span class="number">1</span>);</span><br><span class="line">		<span class="built_in">strcpy</span>( s[i] , t );</span><br><span class="line">	&#125;</span><br><span class="line">	strsort( s , N );</span><br><span class="line">	<span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;N; i++)	&#123;<span class="built_in">puts</span>(s[i]); <span class="built_in">free</span>(s[i]);&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> <img src="/report/experiment/54f42550a635245e5769693d5a0ce336.png" alt="图6-3 源程序替换题的程序运行结果示意图"></p>
<p>（2）下面源程序通过函数指针和菜单选择来调用库函数实现字符串操作；串复制strcpy、串连接strcat或串分解strtok。</p>
<p>①请在源程序中的下划线处填写合适的代码来完善该程序，使之能按照要求输出下面结果：
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> copy <span class="keyword">string</span>.</span><br><span class="line"></span><br><span class="line"><span class="number">2</span> connect <span class="keyword">string</span>.</span><br><span class="line"></span><br><span class="line"><span class="number">3</span> parse <span class="keyword">string</span>.</span><br><span class="line"></span><br><span class="line"><span class="number">4</span> exit.</span><br><span class="line"></span><br><span class="line">input <span class="keyword">a</span> <span class="built_in">number</span> (<span class="number">1</span><span class="number">-4</span>) please!</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>↙ （键盘输入）</span><br><span class="line"></span><br><span class="line">input <span class="keyword">the</span> <span class="keyword">first</span> <span class="keyword">string</span> please!</span><br><span class="line"></span><br><span class="line"><span class="keyword">the</span> more you learn,↙ （键盘输入）</span><br><span class="line"></span><br><span class="line">input <span class="keyword">the</span> <span class="keyword">second</span> <span class="keyword">string</span> please!</span><br><span class="line"></span><br><span class="line"><span class="keyword">the</span> more you <span class="built_in">get</span>. ↙ （键盘输入）</span><br><span class="line"></span><br><span class="line"><span class="keyword">the</span> <span class="built_in">result</span> is <span class="keyword">the</span> more you learn, <span class="keyword">the</span> more you <span class="built_in">get</span>.</span><br></pre></td></tr></table></figure> <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># <span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta"># <span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	____________________;</span><br><span class="line"><span class="keyword">char</span> a[<span class="number">80</span>], b[<span class="number">80</span>], *result;</span><br><span class="line"><span class="keyword">int</span> choice;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;\t\t1 copy string.\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;\t\t2 connect string.\n&quot;</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;\t\t3 parse string.\n&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\t\t4 exit.\n&quot;</span>);</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">&quot;\t\tinput a number (1-4) please.\n&quot;</span>);</span><br><span class="line">				<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line">&#125;<span class="keyword">while</span>(choice&lt;<span class="number">1</span> || choice&gt;<span class="number">4</span>);</span><br><span class="line"><span class="keyword">switch</span>(choice)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">1</span>:	p = <span class="built_in">strcpy</span>;	<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">2</span>:	p = <span class="built_in">strcat</span>;	<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">3</span>:	p = strtok;	<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">4</span>:	<span class="keyword">goto</span> down;</span><br><span class="line">&#125;</span><br><span class="line">getchar();</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;input the first string please!\n&quot;</span>);</span><br><span class="line">______________________;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;input the second string please!\n&quot;</span>);</span><br><span class="line">______________________;</span><br><span class="line">result = ___________(a, b);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;the result is %s\n&quot;</span>, result);</span><br><span class="line">&#125;</span><br><span class="line">	down:</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<strong>解答：</strong>替换后的程序如下所示： <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># <span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta"># <span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span>* (*p)( <span class="keyword">char</span> a[] , <span class="keyword">const</span> <span class="keyword">char</span> b[] );</span><br><span class="line">    <span class="keyword">char</span> a[<span class="number">80</span>], b[<span class="number">80</span>], *result;</span><br><span class="line">    <span class="keyword">int</span> choice;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\t\t1 copy string.\n&quot;</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\t\t2 connect string.\n&quot;</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\t\t3 parse string.\n&quot;</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\t\t4 exit.\n&quot;</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\t\tinput a number (1-4) please.\n&quot;</span>);</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line">        &#125;<span class="keyword">while</span>(choice&lt;<span class="number">1</span> || choice&gt;<span class="number">4</span>);</span><br><span class="line">    <span class="keyword">switch</span>(choice)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:	p = <span class="built_in">strcpy</span>;	<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:	p = <span class="built_in">strcat</span>;	<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:	p = strtok;	<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>:	<span class="keyword">goto</span> down;</span><br><span class="line">    &#125;</span><br><span class="line">    getchar();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;input the first string please!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;input the second string please!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,b);</span><br><span class="line">    result = p(a, b);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;the result is %s\n&quot;</span>, result);</span><br><span class="line">    &#125;</span><br><span class="line">        down:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> <img src="/report/experiment/34e67db19363fc751ec55f8da9bb2fdf.png" alt="图6-4 源程序修改替换题的程序运行结果示意图"></p>
<p>②函数指针的一个用途是用户散转程序，即通过一个转移表（函数指针数组）来实现多分枝函数处理，从而省去了大量的if语句或者switch语句。转移表中存放了各个函数的入口地址（函数名），根据条件的设定来查表选择执行相应的函数。请使用转移表而不是switch语句重写以上程序。</p>
<p><strong>解答：</strong>替换后的程序如下所示： <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># <span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta"># <span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span>* (*ope[])( <span class="keyword">char</span> a[] , <span class="keyword">const</span> <span class="keyword">char</span> b[] ) = &#123; <span class="built_in">strcpy</span> , <span class="built_in">strcat</span> , strtok &#125; ;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span>* (*p)( <span class="keyword">char</span> a[] , <span class="keyword">const</span> <span class="keyword">char</span> b[] );</span><br><span class="line">    <span class="keyword">char</span> a[<span class="number">80</span>], b[<span class="number">80</span>], *result;</span><br><span class="line">    <span class="keyword">int</span> choice;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">do</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\t\t1 copy string.\n&quot;</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\t\t2 connect string.\n&quot;</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\t\t3 parse string.\n&quot;</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\t\t4 exit.\n&quot;</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\t\tinput a number (1-4) please.\n&quot;</span>);</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;choice);</span><br><span class="line">        &#125;<span class="keyword">while</span>(choice&lt;<span class="number">1</span> || choice&gt;<span class="number">4</span>);</span><br><span class="line">    <span class="keyword">if</span> ( choice == <span class="number">4</span> ) 	<span class="keyword">goto</span> down;</span><br><span class="line">    getchar();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;input the first string please!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;input the second string please!\n&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,b);</span><br><span class="line">    result = (ope[choice<span class="number">-1</span>]) (a, b);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;the result is %s\n&quot;</span>, result);</span><br><span class="line">    &#125;</span><br><span class="line">        down:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> <img src="/report/experiment/34e67db19363fc751ec55f8da9bb2fdf.png" alt="图6-5 源程序替换题的程序运行结果示意图"></p>
<p>3、跟踪调试题</p>
<p>请按下面的要求对源程序进行操作，并回答问题和排除错误。</p>
<p>（1）单步执行。进入strcpy时watch窗口中s为何值？返回main时,
watch窗口中s为何值？</p>
<p>（2）排除错误，使程序输出结果为：there is a boat on the lake.
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdio.h&quot;</span></span></span><br><span class="line"><span class="function"><span class="keyword">char</span> *<span class="title">strcpy</span><span class="params">(<span class="keyword">char</span> *,<span class="keyword">char</span> *)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> a[<span class="number">20</span>],b[<span class="number">60</span>]=<span class="string">&quot;there is a boat on the lake.&quot;</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>,<span class="built_in">strcpy</span>(a,b));</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">char</span> *<span class="title">strcpy</span><span class="params">(<span class="keyword">char</span> *s,<span class="keyword">char</span> *t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(*s++=*t++)</span><br><span class="line">    ;</span><br><span class="line">    <span class="keyword">return</span> (s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> <img src="/report/experiment/0c68b97a23ca1f852f2268968acb972e.png" alt="图6-6 跟踪调试题的程序运行结果示意图"></p>
<figure>
<img src="/report/experiment/2b5a5fc1b1a19421c03513ca4d4a9631.png" alt="图6-7 跟踪调试题的程序运行结果示意图">
<figcaption aria-hidden="true">图6-7
跟踪调试题的程序运行结果示意图</figcaption>
</figure>
<p>替换后的程序如下所示： <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdio.h&quot;</span></span></span><br><span class="line"><span class="function"><span class="keyword">char</span> *<span class="title">strcpy</span><span class="params">(<span class="keyword">char</span> *,<span class="keyword">char</span> *)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> a[<span class="number">20</span>],b[<span class="number">60</span>]=<span class="string">&quot;there is a boat on the lake.&quot;</span>;</span><br><span class="line">    <span class="built_in">strcpy</span>(a,b);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>,a);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">char</span> *<span class="title">strcpy</span><span class="params">(<span class="keyword">char</span> *s,<span class="keyword">char</span> *t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(*s++=*t++);</span><br><span class="line">    <span class="keyword">return</span> (s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> 4、编程设计题</p>
<p>（1）指定main函数的参数</p>
<p>在IDE（比如DevC++）中，选择"<strong>运行</strong>"｜"<strong>参数</strong>"菜单，在
"<strong>传递给主程序的参数</strong>"文本框中输入main函数的参数arg1 arg2
arg3，只输入命令行中文件名后的参数，文件名不作为参数输入，参数间以空格隔开。编写程序在命令行输出这三个参数。（注意不同IDE输入参数的方式不相同，可参考各个IDE的使用手册。）</p>
<ol type="1">
<li>解题思路：</li>
</ol>
<ol type="1">
<li><p>输入n个字符串</p></li>
<li><p>输出n个字符串</p></li>
<li><p>结束</p></li>
</ol>
<p>2）程序清单 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> re register</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">( <span class="keyword">int</span> argc , <span class="keyword">char</span>* argv[] )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>( re <span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; argc ; i++ ) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>,argv[i]) ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure>
<img src="/report/experiment/68d62f40a04ea20847c455fedec76867.png" alt="图6-8 程序设计题1的程序运行结果示意图">
<figcaption aria-hidden="true">图6-8
程序设计题1的程序运行结果示意图</figcaption>
</figure>
<p>以下（2）至（5）题对应Educoder
教学平台"C语言实验"课程，实验6，第13关实验6-1、第14关实验6-2、第15关实验6-3,
以及第16关实验6-4。</p>
<p>（2）一个长整型变量占4个字节，其中每个字节又分成高4位和低4位。输入一个长整型变量，要求从高字节开始，依次取出每个字节的高4位和低4位并以十六进制数字字符的形式进行显示，通过指针取出每字节。</p>
<p>样例输入：15</p>
<p>样例输出：0000000F</p>
<ol type="1">
<li>解题思路：</li>
</ol>
<ol type="1">
<li><p>输入k</p></li>
<li><p>定义指针p，类型为unsigned short</p></li>
<li><p>依次取出对应位置上的数字并输出</p></li>
<li><p>结束</p></li>
</ol>
<p>2）程序清单 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> re register</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">int</span> k ;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span> (<span class="string">&quot;%u&quot;</span>,&amp;k) ;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">short</span> *p = (<span class="keyword">unsigned</span> <span class="keyword">short</span>*) &amp;k ;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%.4X%.4X&quot;</span>,*(p+<span class="number">1</span>),*p) ;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> <img src="/report/experiment/d2eeef1b20f5aa09af709838bb26633b.png" alt="图6-9 程序设计题2的程序运行结果示意图"></p>
<p>（3）旋转是图像处理的基本操作，编程实现一个将一个图像逆时针旋转90°。提示：计算机中的图像可以用一个矩阵来表示，旋转一个图像就是旋转对应的矩阵。将旋转矩阵的功能定义成函数，通过使用指向数组元素的指针作为参数使该函数能处理任意大小的矩阵。要求在main函数中输入图像矩阵的行数n和列数m，接下来的n行每行输入m个整数，表示输入的图像。输出原始矩阵逆时针旋转90°后的矩阵。</p>
<p>样例输入： <figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">2 </span><span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">1 </span><span class="number">5</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">3 </span><span class="number">2</span> <span class="number">4</span></span><br></pre></td></tr></table></figure> 样例输出： <figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">3 </span><span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">5 </span><span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">1 </span><span class="number">3</span></span><br></pre></td></tr></table></figure> 1 解题思路：</p>
<ol type="1">
<li><p>输入n,m</p></li>
<li><p>输入对应的矩阵</p></li>
<li><p>对矩阵进行旋转并输出</p></li>
<li><p>结束</p></li>
</ol>
<p>2）程序清单 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> re register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n , m ;</span><br><span class="line"><span class="keyword">int</span> a[maxn][maxn] ;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m) ;</span><br><span class="line">    <span class="keyword">for</span>( re <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt;= n ;i++)</span><br><span class="line">        <span class="keyword">for</span>( re <span class="keyword">int</span> j = <span class="number">1</span> ; j &lt;= m ; j++)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i][j]) ;</span><br><span class="line">    <span class="keyword">for</span> ( re <span class="keyword">int</span> i = m ; i &gt;= <span class="number">1</span> ; i-- )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>( re <span class="keyword">int</span> j = <span class="number">1</span> ; j &lt;= n<span class="number">-1</span> ; j++ )</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[j][i]) ;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,a[n][i]) ;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> <img src="/report/experiment/ff82d4baa9d6ba6f34040c59ec340d45.png" alt="图6-10 程序设计题3的程序运行结果示意图"></p>
<p>（4）输入n行文本，每行不超过80个字符，用字符指针数组指向键盘输入的n行文本，且n行文本的存储无冗余，删除每一行中的前置空格（'
'）和水平制表符（'）。要求：将删除一行文本中前置空格和水平制表符的功能定义成函数，在main函数中输出删除前置空格符的各行。</p>
<p>1 解题思路：</p>
<ol type="1">
<li><p>读入字符串s</p></li>
<li><p>调用del()函数进行删除</p></li>
<li><p>在主函数中对字符串进行输出</p></li>
<li><p>结束</p></li>
</ol>
<p>2）程序清单 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> re register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 100</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> s[maxn] ;</span><br><span class="line"><span class="keyword">int</span> cnt ;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">del</span><span class="params">( <span class="keyword">char</span> s[] )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cnt = <span class="number">0</span> ;</span><br><span class="line">    <span class="keyword">char</span> tmp[maxn] ;</span><br><span class="line">    re <span class="keyword">int</span> len = <span class="built_in">strlen</span>(s) , i = <span class="number">0</span> , j , k = <span class="number">0</span> ;</span><br><span class="line">    <span class="keyword">while</span> ( s[i++] == <span class="string">&#x27; &#x27;</span> ) ;</span><br><span class="line">    i-- ;</span><br><span class="line">    <span class="keyword">for</span> ( re <span class="keyword">int</span> j = i ; j &lt; len ; j++ )</span><br><span class="line">    <span class="keyword">if</span> ( s[j] != <span class="string">&#x27;\t&#x27;</span> )</span><br><span class="line">        tmp[k++] = s[j] ;</span><br><span class="line">    cnt = <span class="built_in">strlen</span>(tmp) ;</span><br><span class="line">    <span class="keyword">for</span>( re <span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; cnt ; i++ )</span><br><span class="line">        s[i] = tmp[i] ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> ( gets(s) ) </span><br><span class="line">    &#123;</span><br><span class="line">        del(s) ;</span><br><span class="line">        <span class="keyword">for</span> ( re <span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; cnt ; i++ )</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,s[i]) ;</span><br><span class="line">        <span class="built_in">putchar</span>(<span class="string">&#x27;\n&#x27;</span>) ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> <img src="/report/experiment/c2744de136b914f686d45625bcf02d3c.png" alt="图6-11 程序设计题4的程序运行结果示意图"></p>
<p>（5）编写8个任务函数，一个scheduler调度函数和一个execute执行函数。仅在main函数中调用scheduler函数，scheduler函数要求用最快的方式调度执行用户指定的任务函数。</p>
<p>①先设计task0, task1, task2, task3, task4, task5, task6,
task7共8个任务函数，每个任务函数的任务就是输出该任务被调用的字符串。例如，第0个任务函数输出"task0
is called!"，第1个任务函数输出"task1 is called!"，以此类推。</p>
<p>②scheduler函数根据键盘输入的数字字符的先后顺序，一次调度选择对应的任务函数。例如，输入：1350并回车，则scheduler函数一次调度选择task1,
task3, taks5,
task0，然后以函数指针数组和任务个数为参数将调度选择结果传递给execute函数并调用execute函数。</p>
<p>③execute函数根据scheduler函数传递的指针数组和任务个数为参数，按照指定的先后顺序依此调用执行选定的任务函
数。</p>
<p>例如，当输入13607122并回车，程序运行结果如下： <figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">task1 <span class="keyword">is</span> <span class="keyword">called</span>!</span><br><span class="line"></span><br><span class="line">task3 <span class="keyword">is</span> <span class="keyword">called</span>!</span><br><span class="line"></span><br><span class="line">task6 <span class="keyword">is</span> <span class="keyword">called</span>!</span><br><span class="line"></span><br><span class="line">task0 <span class="keyword">is</span> <span class="keyword">called</span>!</span><br><span class="line"></span><br><span class="line">task7 <span class="keyword">is</span> <span class="keyword">called</span>!</span><br><span class="line"></span><br><span class="line">task1 <span class="keyword">is</span> <span class="keyword">called</span>!</span><br><span class="line"></span><br><span class="line">task2 <span class="keyword">is</span> <span class="keyword">called</span>!</span><br><span class="line"></span><br><span class="line">task2 <span class="keyword">is</span> <span class="keyword">called</span>!</span><br></pre></td></tr></table></figure> 1
解题思路：</p>
<ol type="1">
<li><p>在main()函数中调用scheduler()函数</p></li>
<li><p>读入字符串，并将其转化为数字</p></li>
<li><p>调用对应的task函数</p></li>
<li><p>结束</p></li>
</ol>
<p>2）程序清单 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> re register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 1005</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> s[maxn] ;</span><br><span class="line"><span class="keyword">int</span>  a[maxn] ;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">task0</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="built_in">puts</span>(<span class="string">&quot;task0 is called!&quot;</span>) ;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">task1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="built_in">puts</span>(<span class="string">&quot;task1 is called!&quot;</span>) ;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">task2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="built_in">puts</span>(<span class="string">&quot;task2 is called!&quot;</span>) ;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">task3</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="built_in">puts</span>(<span class="string">&quot;task3 is called!&quot;</span>) ;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">task4</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="built_in">puts</span>(<span class="string">&quot;task4 is called!&quot;</span>) ;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">task5</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="built_in">puts</span>(<span class="string">&quot;task5 is called!&quot;</span>) ;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">task6</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="built_in">puts</span>(<span class="string">&quot;task6 is called!&quot;</span>) ;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">task7</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="built_in">puts</span>(<span class="string">&quot;task7 is called!&quot;</span>) ;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">execute</span> <span class="params">( <span class="keyword">int</span> arr[] , <span class="keyword">int</span> cnt )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>( re <span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; cnt ; i++ )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> ( a[i] == <span class="number">0</span> ) task0() ;</span><br><span class="line">        <span class="keyword">if</span> ( a[i] == <span class="number">1</span> ) task1() ;</span><br><span class="line">        <span class="keyword">if</span> ( a[i] == <span class="number">2</span> ) task2() ;</span><br><span class="line">        <span class="keyword">if</span> ( a[i] == <span class="number">3</span> ) task3() ;</span><br><span class="line">        <span class="keyword">if</span> ( a[i] == <span class="number">4</span> ) task4() ;</span><br><span class="line">        <span class="keyword">if</span> ( a[i] == <span class="number">5</span> ) task5() ;</span><br><span class="line">        <span class="keyword">if</span> ( a[i] == <span class="number">6</span> ) task6() ;</span><br><span class="line">        <span class="keyword">if</span> ( a[i] == <span class="number">7</span> ) task7() ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">scheduler</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,s) ;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="built_in">strlen</span>(s) ;</span><br><span class="line">    <span class="keyword">for</span> ( re <span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; cnt ; i++ )</span><br><span class="line">        a[i] = s[i] - <span class="string">&#x27;0&#x27;</span> ;</span><br><span class="line">    execute ( a , cnt ) ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    scheduler() ;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> <img src="/report/experiment/6d98d6532cae04ed574d5ed52504e312.png" alt="图6-12 程序设计题5的程序运行结果示意图"></p>
<h2 id="实验小结-5">6.3 实验小结</h2>
<p>（1）通过这次实验，我熟练掌握了指针的说明、赋值、使用。</p>
<p>（2）通过这次实验，我掌握了用指针引用数组的元素，熟悉指向数组的指针的使用。</p>
<p>（3）通过这次实验，我熟练掌握了字符数组与字符串的使用，掌握指针数组及字符指针数组的用法。</p>
<p>（4）通过这次实验，我掌握了指针函数与函数指针的用法。</p>
<p>（5）通过这次实验，我掌握了带有参数的main函数的用法。</p>
<h1 id="实验7-结构与联合实验">实验7 结构与联合实验</h1>
<h2 id="实验目的-6">7.1 实验目的</h2>
<p>1．通过实验，熟悉和掌握结构的说明和引用、结构的指针、结构数组、以及函数中使用结构的方法。</p>
<p>2．通过实验，掌握动态储存分配函数的用法，掌握自引用结构，单向链表的创建、遍历、结点的增删、查找等操作。</p>
<p>3．了解字段结构和联合的用法。</p>
<h2 id="实验题目及要求-1">7.2 实验题目及要求</h2>
<h3 id="表达式求值的程序验证题">7.2.1．表达式求值的程序验证题</h3>
<p>设有说明： <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> u[]=<span class="string">&quot;UVWXYZ&quot;</span>;</span><br><span class="line"><span class="keyword">char</span> v[]=<span class="string">&quot;xyz&quot;</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">T</span>&#123;</span></span><br><span class="line">	<span class="keyword">int</span> x;</span><br><span class="line">	<span class="keyword">char</span> c;</span><br><span class="line">	<span class="keyword">char</span> *t;</span><br><span class="line">&#125;a[]=&#123;&#123;<span class="number">11</span>,ˊAˊ,u&#125;,&#123;<span class="number">100</span>, ˊBˊ,v&#125;&#125;,*p=a;</span><br></pre></td></tr></table></figure>
请先自己计算下面表达式的值，然后通过编程计算来加以验证。(各表达式相互无关)</p>
<table>
<thead>
<tr class="header">
<th><strong>序号</strong></th>
<th><strong>表达式</strong></th>
<th><strong>计算值</strong></th>
<th><strong>验证值</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>(++p)-&gt;x</td>
<td>100</td>
<td>100</td>
</tr>
<tr class="even">
<td>2</td>
<td>p++,p-&gt;c</td>
<td>B</td>
<td>B</td>
</tr>
<tr class="odd">
<td>3</td>
<td><em>p++-&gt;t,</em>p-&gt;t</td>
<td>x</td>
<td>x</td>
</tr>
<tr class="even">
<td>4</td>
<td>*(++p)-&gt;t</td>
<td>x</td>
<td>x</td>
</tr>
<tr class="odd">
<td>5</td>
<td>*++p-&gt;t</td>
<td>V</td>
<td>V</td>
</tr>
<tr class="even">
<td>6</td>
<td>++*p-&gt;t</td>
<td>V</td>
<td>V</td>
</tr>
</tbody>
</table>
<h3 id="源程序修改替换题">7.2.2．源程序修改替换题</h3>
<p>给定一批整数，以0作为结束标志且不作为结点，将其建成一个先进先出的链表，先进先出链表的指头指针始终指向最先创建的结点（链头），先建结点指向后建结点，后建结点始终是尾结点。</p>
<ol type="1">
<li>源程序中存在什么样的错误（先观察执行结果）？对程序进行修改、调试，使之能够正确完成指定任务。</li>
</ol>
<p>源程序如下： <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdio.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdlib.h&quot;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">s_list</span>&#123;</span> </span><br><span class="line"><span class="keyword">int</span> data; <span class="comment">/* 数据域 */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">s_list</span> *<span class="title">next</span>;</span> <span class="comment">/* 指针域 */</span> </span><br><span class="line">&#125; ;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">create_list</span> <span class="params">(struct s_list *headp,<span class="keyword">int</span> *p)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">s_list</span> *<span class="title">head</span>=</span><span class="literal">NULL</span>,*p;</span><br><span class="line">	<span class="keyword">int</span> s[]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">0</span>&#125;; <span class="comment">/* 0为结束标记 */</span></span><br><span class="line">	create_list(head,s); <span class="comment">/* 创建新链表 */</span></span><br><span class="line">	p=head; <span class="comment">/*遍历指针p指向链头 */</span></span><br><span class="line">	<span class="keyword">while</span>(p)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d\t&quot;</span>,p-&gt;data); <span class="comment">/* 输出数据域的值 */</span></span><br><span class="line">		p=p-&gt;next; <span class="comment">/*遍历指针p指向下一结点 */</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">create_list</span><span class="params">(struct s_list *headp,<span class="keyword">int</span> *p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">s_list</span> * <span class="title">loc_head</span>=</span><span class="literal">NULL</span>,*tail;</span><br><span class="line">	<span class="keyword">if</span>(p[<span class="number">0</span>]==<span class="number">0</span>) <span class="comment">/* 相当于*p==0 */</span></span><br><span class="line">		;</span><br><span class="line">	<span class="keyword">else</span> &#123; <span class="comment">/* loc_head指向动态分配的第一个结点 */</span></span><br><span class="line">		loc_head=(struct s_list *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(struct s_list));</span><br><span class="line">		loc_head-&gt;data=*p++; <span class="comment">/* 对数据域赋值 */</span></span><br><span class="line">		tail=loc_head; <span class="comment">/* tail指向第一个结点 */</span></span><br><span class="line">		<span class="keyword">while</span>(*p)&#123; <span class="comment">/* tail所指结点的指针域指向动态创建的结点 */</span></span><br><span class="line">			tail-&gt;next=(struct s_list *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(struct s_list));</span><br><span class="line">			tail=tail-&gt;next; <span class="comment">/* tail指向新创建的结点 */</span></span><br><span class="line">			tail-&gt;data=*p++; <span class="comment">/* 向新创建的结点的数据域赋值 */</span></span><br><span class="line">		&#125;</span><br><span class="line">		tail-&gt;next=<span class="literal">NULL</span>; <span class="comment">/* 对指针域赋NULL值 */</span></span><br><span class="line">	&#125;</span><br><span class="line">	headp=loc_head; <span class="comment">/* 使头指针headp指向新创建的链表 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <strong>解答：</strong></p>
<p>替换后的程序如下所示： <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdio.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdlib.h&quot;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">s_list</span></span></span><br><span class="line"><span class="class">&#123;</span> </span><br><span class="line"><span class="keyword">int</span> data; <span class="comment">/* 数据域 */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">s_list</span> *<span class="title">next</span>;</span> <span class="comment">/* 指针域 */</span> </span><br><span class="line">&#125; ;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">create_list</span> <span class="params">(struct s_list **headp,<span class="keyword">int</span> *p)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">s_list</span> *<span class="title">head</span>=</span><span class="literal">NULL</span>,*p;</span><br><span class="line">	<span class="keyword">int</span> s[]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">0</span>&#125;; <span class="comment">/* 0为结束标记 */</span></span><br><span class="line">	create_list(&amp;head,s); <span class="comment">/* 创建新链表 */</span></span><br><span class="line">	p=head; <span class="comment">/*遍历指针p指向链头 */</span></span><br><span class="line">	<span class="keyword">while</span>(p)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d\t&quot;</span>,p-&gt;data); <span class="comment">/* 输出数据域的值 */</span></span><br><span class="line">		p=p-&gt;next; <span class="comment">/*遍历指针p指向下一结点 */</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">create_list</span><span class="params">(struct s_list **headp,<span class="keyword">int</span> *p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">s_list</span> * <span class="title">loc_head</span>=</span><span class="literal">NULL</span>, * tail;</span><br><span class="line">	<span class="keyword">if</span>(p[<span class="number">0</span>]==<span class="number">0</span>) <span class="comment">/* 相当于*p==0 */</span>;</span><br><span class="line">	<span class="keyword">else</span> </span><br><span class="line">	&#123; <span class="comment">/* loc_head指向动态分配的第一个结点 */</span></span><br><span class="line">		loc_head=(struct s_list *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(struct s_list));</span><br><span class="line">		loc_head-&gt;data=*p++; <span class="comment">/* 对数据域赋值 */</span></span><br><span class="line">		tail=loc_head; <span class="comment">/* tail指向第一个结点 */</span></span><br><span class="line">		<span class="keyword">while</span>(*p)</span><br><span class="line">		&#123; <span class="comment">/* tail所指结点的指针域指向动态创建的结点 */</span></span><br><span class="line">			tail-&gt;next=(struct s_list *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(struct s_list));</span><br><span class="line">			tail=tail-&gt;next; <span class="comment">/* tail指向新创建的结点 */</span></span><br><span class="line">			tail-&gt;data=*p++; <span class="comment">/* 向新创建的结点的数据域赋值 */</span></span><br><span class="line">		&#125;</span><br><span class="line">		tail-&gt;next=<span class="literal">NULL</span>; <span class="comment">/* 对指针域赋NULL值 */</span></span><br><span class="line">	&#125;</span><br><span class="line">	*headp=loc_head; <span class="comment">/* 使头指针headp指向新创建的链表 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> 程序运行截图如图所示：</p>
<figure>
<img src="/report/experiment/cf4d61d44f6a7f2a19be6243cc197fbd.png" alt="图7-1 源程序修改替换题的程序运行结果示意图">
<figcaption aria-hidden="true">图7-1
源程序修改替换题的程序运行结果示意图</figcaption>
</figure>
<p>（2）修改替换create_list函数，将其建成一个后进先出的链表，后进先出链表的头指针始终指向最后创建的结点（链头），后建结点指向先建结点，先建结点始终是尾结点。</p>
<p><strong>解答：</strong></p>
<p>替换后的程序如下所示 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdio.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdlib.h&quot;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">s_list</span></span></span><br><span class="line"><span class="class">&#123;</span> </span><br><span class="line"><span class="keyword">int</span> data; <span class="comment">/* 数据域 */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">s_list</span> *<span class="title">next</span>;</span> <span class="comment">/* 指针域 */</span> </span><br><span class="line">&#125; ;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">create_list</span> <span class="params">(struct s_list **headp,<span class="keyword">int</span> *p)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">s_list</span> *<span class="title">head</span>=</span><span class="literal">NULL</span>,*p;</span><br><span class="line">	<span class="keyword">int</span> s[]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">0</span>&#125;; <span class="comment">/* 0为结束标记 */</span></span><br><span class="line">	create_list(&amp;head,s); <span class="comment">/* 创建新链表 */</span></span><br><span class="line">	p=head; <span class="comment">/*遍历指针p指向链头 */</span></span><br><span class="line">	<span class="keyword">while</span>(p)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d\t&quot;</span>,p-&gt;data); <span class="comment">/* 输出数据域的值 */</span></span><br><span class="line">		p=p-&gt;next; <span class="comment">/*遍历指针p指向下一结点 */</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">create_list</span><span class="params">(struct s_list **headp,<span class="keyword">int</span> *p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">s_list</span> * <span class="title">loc_head</span>=</span><span class="literal">NULL</span>, * tail , * tmp = <span class="literal">NULL</span> ;</span><br><span class="line">	<span class="keyword">if</span>(p[<span class="number">0</span>]==<span class="number">0</span>) <span class="comment">/* 相当于*p==0 */</span>;</span><br><span class="line">	<span class="keyword">else</span> </span><br><span class="line">	&#123; <span class="comment">/* loc_head指向动态分配的第一个结点 */</span></span><br><span class="line">		loc_head=(struct s_list *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(struct s_list));</span><br><span class="line">		loc_head-&gt;data=*p++; <span class="comment">/* 对数据域赋值 */</span></span><br><span class="line">		tail=loc_head; <span class="comment">/* tail指向第一个结点 */</span></span><br><span class="line">		<span class="keyword">while</span>(*p)</span><br><span class="line">        &#123; <span class="comment">/* tail所指结点的指针域指向动态创建的结点 */</span></span><br><span class="line">            tmp = (struct s_list *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(struct s_list)) ;</span><br><span class="line">            tmp-&gt;data = *p++;</span><br><span class="line">			tmp-&gt;next = loc_head ;</span><br><span class="line">            loc_head = tmp ;</span><br><span class="line">			<span class="comment">// loc_head-&gt;data = tmp-&gt;data ; </span></span><br><span class="line">		&#125;</span><br><span class="line">		tail-&gt;next=<span class="literal">NULL</span>; <span class="comment">/* 对指针域赋NULL值 */</span></span><br><span class="line">	&#125;</span><br><span class="line">	*headp=loc_head; <span class="comment">/* 使头指针headp指向新创建的链表 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 程序运行截图如图所示：</p>
<figure>
<img src="/report/experiment/0293868b335a2da604a85d9379e4eb83.png" alt="图7-2 源程序修改替换题的程序运行结果示意图">
<figcaption aria-hidden="true">图7-2
源程序修改替换题的程序运行结果示意图</figcaption>
</figure>
<h3 id="程序设计-4">7.2.3 程序设计</h3>
<p>以下（1）至（3）题对应Educoder
教学平台"C语言实验"课程，实验7，第17关实验7-1、第18关实验7-2，以及第19关实验7-3。</p>
<p>（1）本关任务：用单向链表建立一张班级成绩单，包括每个学生的学号、姓名、英语、高等数学、普通物理、C语言程序设计四门课程的成绩。用菜单实现下列功能：</p>
<p>① 输入每个学生的各项信息。</p>
<p>② 输出每个学生的各项信息。</p>
<p>③ 修改指定学生的指定数据项的内容。</p>
<p>④ 统计每个同学的平均成绩（保留2位小数）。</p>
<p>⑤ 输出各位同学的学号、姓名、四门课程的总成绩和平均成绩。</p>
<p>1 解题思路：</p>
<ol type="1">
<li><p>输入指令order，读入0或EOF时停止读入</p></li>
<li><p>调用相应的函数进行处理</p></li>
</ol>
<ul>
<li><p>如果order = 1 , 进行数据的输入</p></li>
<li><p>如果order = 2 , 进行数据的输出</p></li>
<li><p>如果order = 3 , 进行数据的修改</p></li>
<li><p>如果order = 4 , 进行数据的平均值的计算并输出</p></li>
<li><p>如果order = 5 , 进行数据的输出</p></li>
</ul>
<ol start="3" type="1">
<li>结束</li>
</ol>
<p>2）程序清单 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><span class="line">  <span class="number">2</span>）程序清单</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> re register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 20</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> c_lan , English , math , physics ; </span><br><span class="line">    <span class="keyword">char</span> num[maxn] , name[maxn] ;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span> *<span class="title">next</span> ;</span></span><br><span class="line">    <span class="keyword">double</span> average ;</span><br><span class="line">&#125; *head = <span class="literal">NULL</span> , *tail , *p ;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n ; </span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n) ;</span><br><span class="line">    head = (struct node *) <span class="built_in">malloc</span> ( <span class="keyword">sizeof</span> ( struct node ) ) ;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s%s%d%d%d%d&quot;</span>, head-&gt;num , head-&gt;name , &amp;head-&gt;English , &amp;head-&gt;math , &amp;head-&gt;physics , &amp;head-&gt;c_lan ) ;</span><br><span class="line">    tail = head ;</span><br><span class="line">    <span class="keyword">for</span>( re <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; n ; i++ ) </span><br><span class="line">    &#123;</span><br><span class="line">        tail-&gt;next = (struct node *) <span class="built_in">malloc</span> ( <span class="keyword">sizeof</span> ( struct node ) ) ;</span><br><span class="line">        tail = tail-&gt;next ;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s%s%d%d%d%d&quot;</span>, tail-&gt;num , tail-&gt;name , &amp;tail-&gt;English , &amp;tail-&gt;math , &amp;tail-&gt;physics , &amp;tail-&gt;c_lan ) ;</span><br><span class="line">    &#125; </span><br><span class="line">    tail-&gt;next = <span class="literal">NULL</span> ;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span> * <span class="title">tmp</span> =</span> head ;</span><br><span class="line">    <span class="keyword">while</span> ( tmp ) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> sum =  tmp-&gt;English + tmp-&gt;math + tmp-&gt;physics + tmp-&gt;c_lan ;</span><br><span class="line">        tmp-&gt;average = <span class="number">1.0</span>*sum/<span class="number">4</span> ; </span><br><span class="line">        tmp = tmp-&gt;next ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// puts(&quot;finish!&quot;) ;</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;完成了%d位同学的成绩输入。\n&quot;</span>,n) ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span> * <span class="title">tmp</span> =</span> head ;</span><br><span class="line">    <span class="keyword">while</span> ( tmp ) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%s %s %d %d %d %d\n&quot;</span>, tmp-&gt;num , tmp-&gt;name , tmp-&gt;English , tmp-&gt;math , tmp-&gt;physics , tmp-&gt;c_lan ) ;</span><br><span class="line">            tmp = tmp-&gt;next ;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun3</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span> * <span class="title">tmp</span> =</span> head ;</span><br><span class="line">    <span class="keyword">char</span> ctmp[maxn] ;</span><br><span class="line">    <span class="keyword">int</span> task , target ;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s%d&quot;</span> , ctmp , &amp;task ) ;</span><br><span class="line">    <span class="keyword">while</span> ( tmp ) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>( !<span class="built_in">strcmp</span>( ctmp , tmp-&gt;num ) )</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>( task == <span class="number">0</span> )</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">char</span> ntmp[maxn] ;</span><br><span class="line">                    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,ntmp) ;</span><br><span class="line">                    <span class="built_in">strcpy</span>( tmp-&gt;name , ntmp ) ;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>( task == <span class="number">1</span> ) </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;target) ;</span><br><span class="line">                    tmp-&gt;English = target ;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>( task == <span class="number">2</span> )</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;target) ;</span><br><span class="line">                    tmp-&gt;math = target ;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>( task == <span class="number">3</span> ) </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;target) ;</span><br><span class="line">                    tmp-&gt;physics = target ;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>( task == <span class="number">4</span> )</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;target) ;</span><br><span class="line">                    tmp-&gt;c_lan = target ;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%s %s %d %d %d %d\n&quot;</span>, tmp-&gt;num , tmp-&gt;name , tmp-&gt;English , tmp-&gt;math , tmp-&gt;physics , tmp-&gt;c_lan ) ;</span><br><span class="line">                <span class="keyword">break</span> ;</span><br><span class="line">            &#125;</span><br><span class="line">            tmp = tmp-&gt;next ;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun4</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span> * <span class="title">tmp</span> =</span> head ;</span><br><span class="line">    <span class="keyword">while</span> ( tmp ) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> sum =  tmp-&gt;English + tmp-&gt;math + tmp-&gt;physics + tmp-&gt;c_lan ;</span><br><span class="line">        tmp-&gt;average = <span class="number">1.0</span>*sum/<span class="number">4</span> ; </span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s %s %.2lf\n&quot;</span>,tmp-&gt;num,tmp-&gt;name,tmp-&gt;average) ;</span><br><span class="line">        tmp = tmp-&gt;next ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun5</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span> * <span class="title">tmp</span> =</span> head ;</span><br><span class="line">    <span class="keyword">while</span> ( tmp ) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> sum =  tmp-&gt;English + tmp-&gt;math + tmp-&gt;physics + tmp-&gt;c_lan ;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s %s %d %.2lf\n&quot;</span>,tmp-&gt;num,tmp-&gt;name,sum,tmp-&gt;average) ;</span><br><span class="line">        tmp = tmp-&gt;next ;</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun6</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span> *<span class="title">tmp</span> =</span> head ;</span><br><span class="line">    <span class="keyword">while</span> ( tmp-&gt;next )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">node</span> *<span class="title">now</span> =</span> tmp ;</span><br><span class="line">        <span class="keyword">while</span> ( now-&gt;next )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>( now-&gt;average &gt; now-&gt;next-&gt;average ) </span><br><span class="line">            &#123;</span><br><span class="line">                <span class="class"><span class="keyword">struct</span> <span class="title">node</span> <span class="title">tmpp</span> =</span> *now ;</span><br><span class="line">                tmpp.next = now-&gt;next-&gt;next ;</span><br><span class="line">                now-&gt;next-&gt;next = now-&gt;next ;</span><br><span class="line">                *now = *now-&gt;next ;</span><br><span class="line">                *now-&gt;next = tmpp ;</span><br><span class="line">            &#125;</span><br><span class="line">            now = now-&gt;next ;</span><br><span class="line">        &#125;</span><br><span class="line">        tmp = tmp-&gt;next ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// puts(&quot;YES!!!&quot;) ;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> order ; </span><br><span class="line">    <span class="keyword">while</span> ( <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;order) != EOF ) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>( order == <span class="number">1</span> ) fun1() ;</span><br><span class="line">        <span class="keyword">if</span>( order == <span class="number">2</span> ) fun2() ;</span><br><span class="line">        <span class="keyword">if</span>( order == <span class="number">3</span> ) fun3() ;</span><br><span class="line">        <span class="keyword">if</span>( order == <span class="number">4</span> ) fun4() ;</span><br><span class="line">        <span class="keyword">if</span>( order == <span class="number">5</span> ) fun5() ;</span><br><span class="line">        <span class="keyword">if</span>( order == <span class="number">6</span> ) fun6() ;</span><br><span class="line">        <span class="keyword">if</span>( order == <span class="number">0</span> ) <span class="keyword">break</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ; </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> 3)程序运行截图</p>
<figure>
<img src="/report/experiment/275b21504aad549e8107b1eec9113eb2.png" alt="图7-3 程序设计题1的程序运行结果示意图">
<figcaption aria-hidden="true">图7-3
程序设计题1的程序运行结果示意图</figcaption>
</figure>
<p>（2）本关任务：对程序设计题第（1）题的程序，⑥增加按照平均成绩进行升序排序的函数，写出用交换结点数据域的方法升序排序的函数，排序可用选择法或冒泡法。</p>
<p>1 解题思路：</p>
<ol type="1">
<li><p>输入指令order，读入0或EOF时停止读入</p></li>
<li><p>调用相应的函数进行处理</p></li>
</ol>
<ul>
<li><p>如果order = 1 , 进行数据的输入</p></li>
<li><p>如果order = 2 , 进行数据的输出</p></li>
<li><p>如果order = 3 , 进行数据的修改</p></li>
<li><p>如果order = 4 , 进行数据的平均值的计算并输出</p></li>
<li><p>如果order = 5 , 进行数据的输出</p></li>
<li><p>如果order = 6 , 进行数据的排序，运用冒泡排序交换节点域</p></li>
</ul>
<ol start="3" type="1">
<li>结束</li>
</ol>
<p>2）程序清单 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> re register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 20</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> c_lan , English , math , physics ; </span><br><span class="line">    <span class="keyword">char</span> num[maxn] , name[maxn] ;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span> *<span class="title">next</span> ;</span></span><br><span class="line">    <span class="keyword">double</span> average ;</span><br><span class="line">&#125; *head = <span class="literal">NULL</span> , *tail , *p ;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n ; </span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n) ;</span><br><span class="line">    head = (struct node *) <span class="built_in">malloc</span> ( <span class="keyword">sizeof</span> ( struct node ) ) ;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s%s%d%d%d%d&quot;</span>, head-&gt;num , head-&gt;name , &amp;head-&gt;English , &amp;head-&gt;math , &amp;head-&gt;physics , &amp;head-&gt;c_lan ) ;</span><br><span class="line">    tail = head ;</span><br><span class="line">    <span class="keyword">for</span>( re <span class="keyword">int</span> i = <span class="number">1</span> ; i &lt; n ; i++ ) </span><br><span class="line">    &#123;</span><br><span class="line">        tail-&gt;next = (struct node *) <span class="built_in">malloc</span> ( <span class="keyword">sizeof</span> ( struct node ) ) ;</span><br><span class="line">        tail = tail-&gt;next ;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%s%s%d%d%d%d&quot;</span>, tail-&gt;num , tail-&gt;name , &amp;tail-&gt;English , &amp;tail-&gt;math , &amp;tail-&gt;physics , &amp;tail-&gt;c_lan ) ;</span><br><span class="line">    &#125; </span><br><span class="line">    tail-&gt;next = <span class="literal">NULL</span> ;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span> * <span class="title">tmp</span> =</span> head ;</span><br><span class="line">    <span class="keyword">while</span> ( tmp ) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> sum =  tmp-&gt;English + tmp-&gt;math + tmp-&gt;physics + tmp-&gt;c_lan ;</span><br><span class="line">        tmp-&gt;average = <span class="number">1.0</span>*sum/<span class="number">4</span> ; </span><br><span class="line">        tmp = tmp-&gt;next ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// puts(&quot;finish!&quot;) ;</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;完成了%d位同学的成绩输入。\n&quot;</span>,n) ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span> * <span class="title">tmp</span> =</span> head ;</span><br><span class="line">    <span class="keyword">while</span> ( tmp ) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%s %s %d %d %d %d\n&quot;</span>, tmp-&gt;num , tmp-&gt;name , tmp-&gt;English , tmp-&gt;math , tmp-&gt;physics , tmp-&gt;c_lan ) ;</span><br><span class="line">            tmp = tmp-&gt;next ;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun3</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span> * <span class="title">tmp</span> =</span> head ;</span><br><span class="line">    <span class="keyword">char</span> ctmp[maxn] ;</span><br><span class="line">    <span class="keyword">int</span> task , target ;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s%d&quot;</span> , ctmp , &amp;task ) ;</span><br><span class="line">    <span class="keyword">while</span> ( tmp ) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>( !<span class="built_in">strcmp</span>( ctmp , tmp-&gt;num ) )</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>( task == <span class="number">0</span> )</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">char</span> ntmp[maxn] ;</span><br><span class="line">                    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,ntmp) ;</span><br><span class="line">                    <span class="built_in">strcpy</span>( tmp-&gt;name , ntmp ) ;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>( task == <span class="number">1</span> ) </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;target) ;</span><br><span class="line">                    tmp-&gt;English = target ;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>( task == <span class="number">2</span> )</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;target) ;</span><br><span class="line">                    tmp-&gt;math = target ;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>( task == <span class="number">3</span> ) </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;target) ;</span><br><span class="line">                    tmp-&gt;physics = target ;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>( task == <span class="number">4</span> )</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;target) ;</span><br><span class="line">                    tmp-&gt;c_lan = target ;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%s %s %d %d %d %d\n&quot;</span>, tmp-&gt;num , tmp-&gt;name , tmp-&gt;English , tmp-&gt;math , tmp-&gt;physics , tmp-&gt;c_lan ) ;</span><br><span class="line">                <span class="keyword">break</span> ;</span><br><span class="line">            &#125;</span><br><span class="line">            tmp = tmp-&gt;next ;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun4</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span> * <span class="title">tmp</span> =</span> head ;</span><br><span class="line">    <span class="keyword">while</span> ( tmp ) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> sum =  tmp-&gt;English + tmp-&gt;math + tmp-&gt;physics + tmp-&gt;c_lan ;</span><br><span class="line">        tmp-&gt;average = <span class="number">1.0</span>*sum/<span class="number">4</span> ; </span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s %s %.2lf\n&quot;</span>,tmp-&gt;num,tmp-&gt;name,tmp-&gt;average) ;</span><br><span class="line">        tmp = tmp-&gt;next ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun5</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span> * <span class="title">tmp</span> =</span> head ;</span><br><span class="line">    <span class="keyword">while</span> ( tmp ) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> sum =  tmp-&gt;English + tmp-&gt;math + tmp-&gt;physics + tmp-&gt;c_lan ;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s %s %d %.2lf\n&quot;</span>,tmp-&gt;num,tmp-&gt;name,sum,tmp-&gt;average) ;</span><br><span class="line">        tmp = tmp-&gt;next ;</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun6</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span> *<span class="title">tmp</span> =</span> head ;</span><br><span class="line">    <span class="keyword">while</span> ( tmp-&gt;next )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">node</span> *<span class="title">now</span> =</span> tmp ;</span><br><span class="line">        <span class="keyword">while</span> ( now-&gt;next )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>( now-&gt;average &gt; now-&gt;next-&gt;average ) </span><br><span class="line">            &#123;</span><br><span class="line">                <span class="class"><span class="keyword">struct</span> <span class="title">node</span> <span class="title">tmpp</span> =</span> *now ;</span><br><span class="line">                tmpp.next = now-&gt;next-&gt;next ;</span><br><span class="line">                now-&gt;next-&gt;next = now-&gt;next ;</span><br><span class="line">                *now = *now-&gt;next ;</span><br><span class="line">                *now-&gt;next = tmpp ;</span><br><span class="line">            &#125;</span><br><span class="line">            now = now-&gt;next ;</span><br><span class="line">        &#125;</span><br><span class="line">        tmp = tmp-&gt;next ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// puts(&quot;YES!!!&quot;) ;</span></span><br><span class="line">    fun4() ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> order ; </span><br><span class="line">    <span class="keyword">while</span> ( <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;order) != EOF ) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>( order == <span class="number">1</span> ) fun1() ;</span><br><span class="line">        <span class="keyword">if</span>( order == <span class="number">2</span> ) fun2() ;</span><br><span class="line">        <span class="keyword">if</span>( order == <span class="number">3</span> ) fun3() ;</span><br><span class="line">        <span class="keyword">if</span>( order == <span class="number">4</span> ) fun4() ;</span><br><span class="line">        <span class="keyword">if</span>( order == <span class="number">5</span> ) fun5() ;</span><br><span class="line">        <span class="keyword">if</span>( order == <span class="number">6</span> ) fun6() ;</span><br><span class="line">        <span class="keyword">if</span>( order == <span class="number">0</span> ) <span class="keyword">break</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ; </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> 3)程序运行截图</p>
<figure>
<img src="/report/experiment/539724e878c99b6d9f8e3563909aa27b.png" alt="图7-4 程序设计题2的程序运行结果示意图">
<figcaption aria-hidden="true">图7-4
程序设计题2的程序运行结果示意图</figcaption>
</figure>
<h2 id="实验小结-6">7.3 实验小结</h2>
<p>1．通过实验，我熟悉和掌握了结构的说明和引用、结构的指针、结构数组、以及函数中使用结构的方法。</p>
<p>2．通过实验，我掌握动态了储存分配函数的用法，掌握自引用结构，单向链表的创建、遍历、结点的增删、查找等操作。</p>
<p>3．通过实验，我了解了字段结构和联合的用法。</p>
<h1 id="实验8-文件操作实验">实验8 文件操作实验</h1>
<h2 id="实验目的-7">8.1实验目的</h2>
<p>（1）熟悉文本文件和二进制文件在磁盘中的存储方式；</p>
<p>（2）熟练掌握流式文件的读写方法。</p>
<h2 id="实验题目及要求-2">8.2实验题目及要求</h2>
<h3 id="文件类型的程序验证题">文件类型的程序验证题</h3>
<p>设有程序： <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">short</span> a=<span class="number">0x253f</span>,b=<span class="number">0x7b7d</span>;</span><br><span class="line">	<span class="keyword">char</span> ch;</span><br><span class="line">	FILE *fp1,*fp2;</span><br><span class="line">	fp1=fopen(<span class="string">&quot;d:\\abc1.bin&quot;</span>,<span class="string">&quot;wb+&quot;</span>);</span><br><span class="line">    fp2=fopen(<span class="string">&quot;d:\\abc2.txt&quot;</span>,<span class="string">&quot;w+&quot;</span>);</span><br><span class="line">	fwrite(&amp;a,<span class="keyword">sizeof</span>(<span class="keyword">short</span>),<span class="number">1</span>,fp1);</span><br><span class="line">	fwrite(&amp;b,<span class="keyword">sizeof</span>(<span class="keyword">short</span>),<span class="number">1</span>,fp1);   </span><br><span class="line">	<span class="built_in">fprintf</span>(fp2,<span class="string">&quot;%hx %hx&quot;</span>,a,b); </span><br><span class="line"></span><br><span class="line">    rewind(fp1); rewind(fp2);</span><br><span class="line">	<span class="keyword">while</span>((ch = fgetc(fp1)) != EOF) </span><br><span class="line">		<span class="built_in">putchar</span>(ch);</span><br><span class="line">	<span class="built_in">putchar</span>(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">while</span>((ch = fgetc(fp2)) != EOF) </span><br><span class="line">		<span class="built_in">putchar</span>(ch);</span><br><span class="line">	<span class="built_in">putchar</span>(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line"></span><br><span class="line">	fclose(fp1);</span><br><span class="line">	fclose(fp2);</span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> 1.
请思考程序的输出结果，然后通过上机运行来加以验证。</p>
<p>预测结果： <figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">？<span class="comment">%&#125;&#123;</span></span><br><span class="line"><span class="number">253</span>f <span class="number">7</span>b7d</span><br></pre></td></tr></table></figure> 实际结果：</p>
<figure>
<img src="/report/experiment/64eaaafbb113557fc1c158e6cde943d9.png" alt="图8-1 程序验证题的程序运行结果示意图">
<figcaption aria-hidden="true">图8-1
程序验证题的程序运行结果示意图</figcaption>
</figure>
<ol start="2" type="1">
<li>将两处sizeof(short)均改为sizeof(char)结果有什么不同，为什么？</li>
</ol>
<p>结果：</p>
<figure>
<img src="/report/experiment/ea9171f1ffc35f43c0bfaf697afe55a1.png" alt="图8-2 程序验证题的程序运行结果示意图">
<figcaption aria-hidden="true">图8-2
程序验证题的程序运行结果示意图</figcaption>
</figure>
<p>原因：char大小为一个字节，写入fp1时只能写入8位，故只能对应显示高位对应的字符</p>
<ol type="1">
<li>将fprintf(fp2,"%hx %hx",a,b) 改为 fprintf(fp2,"%d
%d",a,b)结果有什么不同。</li>
</ol>
<p>将以十进制的形式写入文件</p>
<p><strong><img src="/report/experiment/f63ad2fbfad7568221777c75b8c3328b.png" alt="图8-3 程序验证题的程序运行结果示意图"></strong></p>
<h3 id="源程序修改替换题-1">源程序修改替换题</h3>
<p>将指定的文本文件内容在屏幕上显示出来，命令行的格式为：</p>
<p><code>type filename</code></p>
<ol type="1">
<li>源程序中存在什么样的逻辑错误（先观察执行结果）？对程序进行修改、调试，使之能够正确完成指定任务。
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> ch;</span><br><span class="line">	FILE *fp;</span><br><span class="line">	<span class="keyword">if</span>(argc!=<span class="number">2</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Arguments error!\n&quot;</span>);</span><br><span class="line">		<span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>((fp=fopen(argv[<span class="number">1</span>],<span class="string">&quot;r&quot;</span>))==<span class="literal">NULL</span>)&#123;       <span class="comment">/* fp 指向 filename */</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Can&#x27;t open %s file!\n&quot;</span>,argv[<span class="number">1</span>]);</span><br><span class="line">		<span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span>(ch=fgetc(fp)!=EOF)          <span class="comment">/* 从filename中读字符 */</span></span><br><span class="line">	   <span class="built_in">putchar</span>(ch);                  <span class="comment">/* 向显示器中写字符 */</span></span><br><span class="line">	fclose(fp);                      <span class="comment">/* 关闭filename */</span></span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 修改：将 while(ch=fgetc(fp)!=EOF)
中ch=fgetc(fp)加上括号</li>
</ol>
<figure>
<img src="/report/experiment/a3468e32561e8af57b78c6cac657cbdb.png" alt="图8-4 源程序修改替换题的程序运行结果示意图">
<figcaption aria-hidden="true">图8-4
源程序修改替换题的程序运行结果示意图</figcaption>
</figure>
<ol start="2" type="1">
<li>用输入输出重定向freopen改写main函数。 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc , <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> ch;</span><br><span class="line">	FILE *fp;</span><br><span class="line">	<span class="keyword">if</span>(argc!=<span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Arguments error!\n&quot;</span>);</span><br><span class="line">		<span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>((freopen(argv[<span class="number">1</span>],<span class="string">&quot;r&quot;</span>,<span class="built_in">stdin</span>))==<span class="literal">NULL</span>)</span><br><span class="line">    &#123;       <span class="comment">/* fp 指向 filename */</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Can&#x27;t open %s file!\n&quot;</span>,argv[<span class="number">1</span>]);</span><br><span class="line">		<span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span>((ch=getchar())!=EOF)          <span class="comment">/* 从filename中读字符 */</span></span><br><span class="line">	   <span class="built_in">putchar</span>(ch);                  <span class="comment">/* 向显示器中写字符 */</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;	</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> <img src="/report/experiment/cb53d1670ccc416d1927af62055c60c4.png" alt="图8-5 源程序修改替换题的程序运行结果示意图"></li>
</ol>
<h3 id="程序设计-5">程序设计</h3>
<p>以下（1）题对应Educoder
教学平台"C语言实验"课程，实验8，第20关实验8-1。</p>
<p>（1）本关任务：编写一个程序，用给定的字符串替换文件中的目标字符串，并显示输出替换的个数。</p>
<p>注意：读取的文件路径请使用experiment/src/step8/source.txt</p>
<p>若文件为 <figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">There are moments <span class="keyword">in</span> life when you miss someone so much <span class="keyword">that</span> you just want <span class="keyword">to</span></span><br><span class="line">pick them <span class="keyword">from</span> your dreams <span class="keyword">and</span> hug them <span class="keyword">for</span> <span class="built_in">real</span>!</span><br></pre></td></tr></table></figure> 样例输入：<code>you they</code></p>
<p>样例输出： <figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span></span><br><span class="line">There are moments <span class="keyword">in</span> life when they miss someone so much <span class="keyword">that</span> they just want</span><br><span class="line"><span class="keyword">to</span> pick them <span class="keyword">from</span> theyr dreams <span class="keyword">and</span> hug them <span class="keyword">for</span> <span class="built_in">real</span>!</span><br></pre></td></tr></table></figure></p>
<p>1 解题思路：</p>
<ol type="1">
<li><p>读入需要替换的字符串s1,s2</p></li>
<li><p>使用freopen函数进行重定向，读取相应文件中的字符串</p></li>
<li><p>使用字符串处理函数进行查找，替换，拼接</p></li>
<li><p>进行处理后的字符串的输出</p></li>
</ol>
<p>2）程序清单 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> re register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 10005</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> s[maxn] , s1[maxn] , s2[maxn] ,ans[maxn] , space[]=<span class="string">&quot; &quot;</span>  , tmp[maxn] ,*p ;</span><br><span class="line"><span class="keyword">int</span> cnt ;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s%s&quot;</span> , s1 , s2 ) ;</span><br><span class="line">    <span class="comment">// freopen(&quot;experiment/src/step8/source.txt&quot;,&quot;r&quot;,stdin) ;</span></span><br><span class="line">    <span class="keyword">while</span> ( <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,s) != EOF)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>( ( p=<span class="built_in">strstr</span>(s,s1) ) != <span class="literal">NULL</span> )</span><br><span class="line">        &#123;</span><br><span class="line">            re <span class="keyword">int</span> num = <span class="number">0</span> ;</span><br><span class="line">            <span class="keyword">for</span>( num = <span class="number">0</span> ; s[num] != *p ; num++ )</span><br><span class="line">                tmp[num] = s[num] ;</span><br><span class="line">            <span class="built_in">strcat</span>( ans , tmp ) ;</span><br><span class="line">            <span class="built_in">memset</span>( tmp , <span class="number">0</span> , <span class="keyword">sizeof</span>(tmp) ) ;</span><br><span class="line">            <span class="built_in">strcat</span>( ans , s2 ) ;</span><br><span class="line">            <span class="keyword">for</span> ( re <span class="keyword">int</span> i = <span class="number">0</span> , j = <span class="built_in">strlen</span>(s1) + num ; s[j] ; j++,i++ )</span><br><span class="line">                tmp[i] = s[j] ;</span><br><span class="line">            <span class="built_in">strcat</span>( ans , tmp ) ;</span><br><span class="line">            <span class="built_in">memset</span>( tmp , <span class="number">0</span> , <span class="keyword">sizeof</span>(tmp) ) ;</span><br><span class="line">            cnt++ ;</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">strcat</span>(ans,s) ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">strcat</span>(ans,space) ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,cnt) ;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s&quot;</span>,ans) ;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> 3）程序运行结果示意图</p>
<figure>
<img src="/report/experiment/9bac5c465f36a334af7c31703876767d.png" alt="图8-6 程序设计题的程序运行结果示意图">
<figcaption aria-hidden="true">图8-6
程序设计题的程序运行结果示意图</figcaption>
</figure>
<h2 id="实验小结-7">8.3 实验小结</h2>
<p>（1）通过这次实验，我熟悉了文本文件和二进制文件在磁盘中的存储方式；</p>
<p>（2）通过这次实验，我熟练掌握了流式文件的读写方法。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">dekrt</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://dekrt.cn/report/experiment/">https://dekrt.cn/report/experiment/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://dekrt.cn" target="_blank">dekrt's blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%8A%A5%E5%91%8A-report/">报告 | report</a><a class="post-meta__tags" href="/tags/%E7%AD%94%E6%A1%88-answer/">答案 | answer</a></div><div class="post_share"><div class="social-share" data-image="https://s1.ax1x.com/2022/03/10/bhIu6J.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechatpay.png" target="_blank"><img class="post-qr-code-img" src="/img/wechatpay.png" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/answer/military/"><img class="prev-cover" src="https://s1.ax1x.com/2022/03/10/bhLM80.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">华科军事理论线上作业答案</div></div></a></div><div class="next-post pull-right"><a href="/answer/problems/"><img class="next-cover" src="https://cdn.luogu.com.cn/upload/image_hosting/9v7j75wu.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">C语言课后习题&amp;头歌答案</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/report/cpsd/" title="软件设计综合实践实验报告"><img class="cover" src="https://s1.ax1x.com/2023/03/14/pplXRSO.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-14</div><div class="title">软件设计综合实践实验报告</div></div></a></div><div><a href="/answer/military/" title="华科军事理论线上作业答案"><img class="cover" src="https://s1.ax1x.com/2022/03/10/bhLM80.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-22</div><div class="title">华科军事理论线上作业答案</div></div></a></div><div><a href="/answer/problems/" title="C语言课后习题&头歌答案"><img class="cover" src="https://cdn.luogu.com.cn/upload/image_hosting/9v7j75wu.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-14</div><div class="title">C语言课后习题&头歌答案</div></div></a></div><div><a href="/answer/homework/" title="C语言程序设计作业"><img class="cover" src="https://s1.ax1x.com/2022/03/10/bhbWTA.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-14</div><div class="title">C语言程序设计作业</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://cdn.luogu.com.cn/upload/image_hosting/7schyg4e.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">dekrt</div><div class="author-info__description">write something casually</div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">21</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/dekrt"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/dekrt" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:dekrt@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://weibo.com/dekrt" target="_blank" title="Weibo"><i class="fab fa-weibo"></i></a><a class="social-icon" href="https://twitter.com/dekrt2" target="_blank" title="Twitter"><i class="fab fa-twitter"></i></a><a class="social-icon" href="https://instagram.com/dekrt" target="_blank" title="Instagram"><i class="fab fa-instagram"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">菜菜，呜呜，捞捞</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C1-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%92%8C%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E4%B8%8E%E8%BE%93%E5%87%BA%E5%AE%9E%E9%AA%8C"><span class="toc-number">1.</span> <span class="toc-text">实验1
表达式和标准输入与输出实验</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E7%9B%AE%E7%9A%84"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 实验目的</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%86%85%E5%AE%B9"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 实验内容</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BA%90%E7%A8%8B%E5%BA%8F%E6%94%B9%E9%94%99"><span class="toc-number">1.2.1.</span> <span class="toc-text">1 源程序改错</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.2.2.</span> <span class="toc-text">2 程序设计</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%B0%8F%E7%BB%93"><span class="toc-number">1.3.</span> <span class="toc-text">1.3 实验小结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C2-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%AE%9E%E9%AA%8C"><span class="toc-number">2.</span> <span class="toc-text">实验2 流程控制实验</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E7%9B%AE%E7%9A%84-1"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 实验目的</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%86%85%E5%AE%B9%E5%8F%8A%E8%A6%81%E6%B1%82"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 实验内容及要求</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E6%94%B9%E9%94%99"><span class="toc-number">2.2.1.</span> <span class="toc-text">2.2.1程序改错</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E4%BF%AE%E6%94%B9%E6%9B%BF%E6%8D%A2"><span class="toc-number">2.2.2.</span> <span class="toc-text">2.2.2程序修改替换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-1"><span class="toc-number">2.2.3.</span> <span class="toc-text">2.2.3程序设计</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%B0%8F%E7%BB%93-1"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 实验小结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C3-%E5%87%BD%E6%95%B0%E4%B8%8E%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%84%E5%AE%9E%E9%AA%8C"><span class="toc-number">3.</span> <span class="toc-text">实验3 函数与程序结构实验</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E7%9B%AE%E7%9A%84-2"><span class="toc-number">3.1.</span> <span class="toc-text">3.1实验目的</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%86%85%E5%AE%B9-1"><span class="toc-number">3.2.</span> <span class="toc-text">3.2实验内容</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E6%94%B9%E9%94%99%E9%A2%98"><span class="toc-number">3.2.1.</span> <span class="toc-text">3.2.1.程序改错题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E4%BF%AE%E6%94%B9%E6%9B%BF%E6%8D%A2%E9%A2%98"><span class="toc-number">3.2.2.</span> <span class="toc-text">3.3.2．程序修改替换题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%9F%E8%B8%AA%E8%B0%83%E8%AF%95%E9%A2%98"><span class="toc-number">3.2.3.</span> <span class="toc-text">3.3.3．跟踪调试题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-2"><span class="toc-number">3.2.4.</span> <span class="toc-text">3.3.4．程序设计</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%B0%8F%E7%BB%93-2"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 实验小结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C4-%E7%BC%96%E8%AF%91%E9%A2%84%E5%A4%84%E7%90%86%E5%AE%9E%E9%AA%8C"><span class="toc-number">4.</span> <span class="toc-text">实验4 编译预处理实验</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E7%9B%AE%E7%9A%84-3"><span class="toc-number">4.1.</span> <span class="toc-text">4.1实验目的</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%86%85%E5%AE%B9-2"><span class="toc-number">4.2.</span> <span class="toc-text">4.2实验内容</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E6%94%B9%E9%94%99-1"><span class="toc-number">4.2.1.</span> <span class="toc-text">4.2.1．程序改错</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E4%BF%AE%E6%94%B9%E6%9B%BF%E6%8D%A2-1"><span class="toc-number">4.2.2.</span> <span class="toc-text">4.2.2．程序修改替换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-3"><span class="toc-number">4.2.3.</span> <span class="toc-text">4.2.4．程序设计</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%B0%8F%E7%BB%93-3"><span class="toc-number">4.3.</span> <span class="toc-text">4.3实验小结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C5-%E6%95%B0%E7%BB%84%E5%AE%9E%E9%AA%8C"><span class="toc-number">5.</span> <span class="toc-text">实验5 数组实验</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E7%9B%AE%E7%9A%84-4"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 实验目的</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%86%85%E5%AE%B9%E5%8F%8A%E8%A6%81%E6%B1%82-1"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 实验内容及要求</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BA%90%E7%A8%8B%E5%BA%8F%E6%94%B9%E9%94%99%E4%B8%8E%E8%B7%9F%E8%B8%AA%E8%B0%83%E8%AF%95"><span class="toc-number">5.2.1.</span> <span class="toc-text">5.2.1 源程序改错与跟踪调试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%B0%8F%E7%BB%93-4"><span class="toc-number">5.2.2.</span> <span class="toc-text">5.3 实验小结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C6-%E6%8C%87%E9%92%88%E5%AE%9E%E9%AA%8C"><span class="toc-number">6.</span> <span class="toc-text">实验6 指针实验</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E7%9B%AE%E7%9A%84-5"><span class="toc-number">6.1.</span> <span class="toc-text">6.1、实验目的</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E9%A2%98%E7%9B%AE%E5%8F%8A%E8%A6%81%E6%B1%82"><span class="toc-number">6.2.</span> <span class="toc-text">6.2、实验题目及要求</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BA%90%E7%A8%8B%E5%BA%8F%E6%94%B9%E9%94%99%E9%A2%98"><span class="toc-number">6.2.1.</span> <span class="toc-text">6.2.1 源程序改错题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BA%90%E7%A8%8B%E5%BA%8F%E5%AE%8C%E5%96%84%E4%BF%AE%E6%94%B9%E6%9B%BF%E6%8D%A2%E9%A2%98"><span class="toc-number">6.2.2.</span> <span class="toc-text">6.2.2源程序完善、修改替换题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%B0%8F%E7%BB%93-5"><span class="toc-number">6.3.</span> <span class="toc-text">6.3 实验小结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C7-%E7%BB%93%E6%9E%84%E4%B8%8E%E8%81%94%E5%90%88%E5%AE%9E%E9%AA%8C"><span class="toc-number">7.</span> <span class="toc-text">实验7 结构与联合实验</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E7%9B%AE%E7%9A%84-6"><span class="toc-number">7.1.</span> <span class="toc-text">7.1 实验目的</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E9%A2%98%E7%9B%AE%E5%8F%8A%E8%A6%81%E6%B1%82-1"><span class="toc-number">7.2.</span> <span class="toc-text">7.2 实验题目及要求</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%B1%82%E5%80%BC%E7%9A%84%E7%A8%8B%E5%BA%8F%E9%AA%8C%E8%AF%81%E9%A2%98"><span class="toc-number">7.2.1.</span> <span class="toc-text">7.2.1．表达式求值的程序验证题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BA%90%E7%A8%8B%E5%BA%8F%E4%BF%AE%E6%94%B9%E6%9B%BF%E6%8D%A2%E9%A2%98"><span class="toc-number">7.2.2.</span> <span class="toc-text">7.2.2．源程序修改替换题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-4"><span class="toc-number">7.2.3.</span> <span class="toc-text">7.2.3 程序设计</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%B0%8F%E7%BB%93-6"><span class="toc-number">7.3.</span> <span class="toc-text">7.3 实验小结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C8-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E5%AE%9E%E9%AA%8C"><span class="toc-number">8.</span> <span class="toc-text">实验8 文件操作实验</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E7%9B%AE%E7%9A%84-7"><span class="toc-number">8.1.</span> <span class="toc-text">8.1实验目的</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E9%A2%98%E7%9B%AE%E5%8F%8A%E8%A6%81%E6%B1%82-2"><span class="toc-number">8.2.</span> <span class="toc-text">8.2实验题目及要求</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%A8%8B%E5%BA%8F%E9%AA%8C%E8%AF%81%E9%A2%98"><span class="toc-number">8.2.1.</span> <span class="toc-text">文件类型的程序验证题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BA%90%E7%A8%8B%E5%BA%8F%E4%BF%AE%E6%94%B9%E6%9B%BF%E6%8D%A2%E9%A2%98-1"><span class="toc-number">8.2.2.</span> <span class="toc-text">源程序修改替换题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-5"><span class="toc-number">8.2.3.</span> <span class="toc-text">程序设计</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%B0%8F%E7%BB%93-7"><span class="toc-number">8.3.</span> <span class="toc-text">8.3 实验小结</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/tutorial/maike/" title="安全教育刷课教程"><img src="https://s1.ax1x.com/2023/04/14/ppzT0Vx.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="安全教育刷课教程"/></a><div class="content"><a class="title" href="/tutorial/maike/" title="安全教育刷课教程">安全教育刷课教程</a><time datetime="2023-04-14T08:04:24.000Z" title="发表于 2023-04-14 16:04:24">2023-04-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/tutorial/book/" title="课本pdf互助站"><img src="https://s1.ax1x.com/2023/03/27/ppyNdwq.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="课本pdf互助站"/></a><div class="content"><a class="title" href="/tutorial/book/" title="课本pdf互助站">课本pdf互助站</a><time datetime="2023-03-27T13:23:13.000Z" title="发表于 2023-03-27 21:23:13">2023-03-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/report/cpsd/" title="软件设计综合实践实验报告"><img src="https://s1.ax1x.com/2023/03/14/pplXRSO.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="软件设计综合实践实验报告"/></a><div class="content"><a class="title" href="/report/cpsd/" title="软件设计综合实践实验报告">软件设计综合实践实验报告</a><time datetime="2023-03-14T10:17:46.000Z" title="发表于 2023-03-14 18:17:46">2023-03-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/tutorial/delicious/" title="华科周边美食推荐"><img src="https://s1.ax1x.com/2022/08/26/vR9n3t.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="华科周边美食推荐"/></a><div class="content"><a class="title" href="/tutorial/delicious/" title="华科周边美食推荐">华科周边美食推荐</a><time datetime="2022-08-26T09:59:56.000Z" title="发表于 2022-08-26 17:59:56">2022-08-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/tutorial/dining-hall/" title="华科食堂美食推荐"><img src="https://s1.ax1x.com/2022/08/16/v0H8gO.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="华科食堂美食推荐"/></a><div class="content"><a class="title" href="/tutorial/dining-hall/" title="华科食堂美食推荐">华科食堂美食推荐</a><time datetime="2022-08-16T14:36:21.000Z" title="发表于 2022-08-16 22:36:21">2022-08-16</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://s1.ax1x.com/2022/03/10/bhIu6J.png')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By dekrt</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">你是宇宙中恰好相遇的浪漫</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">本地搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.2
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container:not\([display]\)').forEach(node => {
            const target = node.parentNode
            if (target.nodeName.toLowerCase() === 'li') {
              target.parentNode.classList.add('has-jax')
            } else {
              target.classList.add('has-jax')
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: '919vOTDx94zr39dk7GN8V5oO-gzGzoHsz',
      appKey: 'SNQo190ERObk522PearaqLyG',
      avatar: 'mp',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>