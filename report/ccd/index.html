<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>编译原理课程实验报告 | dekrt's blog</title><meta name="keywords" content="报告 | report"><meta name="author" content="dekrt"><meta name="copyright" content="dekrt"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="用C++语言实现一个C-语言的编译器前端+后端">
<meta property="og:type" content="article">
<meta property="og:title" content="编译原理课程实验报告">
<meta property="og:url" content="https://dekrt.cn/report/ccd/index.html">
<meta property="og:site_name" content="dekrt&#39;s blog">
<meta property="og:description" content="用C++语言实现一个C-语言的编译器前端+后端">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://z1.ax1x.com/2023/12/12/pifVYB4.png">
<meta property="article:published_time" content="2023-12-12T12:09:46.000Z">
<meta property="article:modified_time" content="2024-02-01T09:13:01.605Z">
<meta property="article:author" content="dekrt">
<meta property="article:tag" content="报告 | report">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://z1.ax1x.com/2023/12/12/pifVYB4.png"><link rel="shortcut icon" href="https://s1.ax1x.com/2023/04/14/ppzvSxK.jpg"><link rel="canonical" href="https://dekrt.cn/report/ccd/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '编译原理课程实验报告',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-02-01 17:13:01'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.0.0"><link rel="alternate" href="/atom.xml" title="dekrt's blog" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://s1.ax1x.com/2023/04/14/ppzvSxK.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">25</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://z1.ax1x.com/2023/12/12/pifVYB4.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">dekrt's blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">编译原理课程实验报告</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-12-12T12:09:46.000Z" title="发表于 2023-12-12 20:09:46">2023-12-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-02-01T09:13:01.605Z" title="更新于 2024-02-01 17:13:01">2024-02-01</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/report/">report</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">23.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>95分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="编译原理课程实验报告"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/report/ccd/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/report/ccd/" itemprop="commentCount"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 align="center">编译原理课程实验报告</h1>


<h2 id="1-概述"><a href="#1-概述" class="headerlink" title="1. 概述"></a>1. 概述</h2><p>本实验报告详细介绍了”C minus”编译器的设计与实现，它是一个简化的编译器，旨在处理”C minus”语言——一种简化版的C语言。整个编译器的设计遵循了编译原理的基本概念和方法，包括词法分析、语法分析、语义分析、中间代码生成、目标代码生成等关键步骤。本报告全面地覆盖了编译器各个模块的具体实现方法和过程，从而为理解编译器的内部工作机制提供了深入的视角。通过对编译器各个模块的深入分析，本报告不仅展示了编译器的内部工作机制，而且为编译原理的学习和理解提供了宝贵的实践经验。</p>
<h2 id="2-系统描述"><a href="#2-系统描述" class="headerlink" title="2. 系统描述"></a>2. 系统描述</h2><h3 id="2-1-自定义语言概述"><a href="#2-1-自定义语言概述" class="headerlink" title="2.1 自定义语言概述"></a>2.1 自定义语言概述</h3><p>本次实验中设计的语言取名为”C minus”语言，下面给出其详细介绍。</p>
<h4 id="2-1-1-设计目的和应用背景"><a href="#2-1-1-设计目的和应用背景" class="headerlink" title="2.1.1 设计目的和应用背景"></a>2.1.1 <strong>设计目的和应用背景</strong></h4><p>“C minus” 语言被设计成一个简化的编程语言，其核心目的是理解编译原理的基本概念，包括语法分析、语义分析、中间代码生成、优化和目标代码生成等。该语言模拟了许多现代编程语言的特性，但以更简化的形式呈现，使得学习者可以更容易地把握编译器设计的核心原理。</p>
<h4 id="2-1-2-语法和特性"><a href="#2-1-2-语法和特性" class="headerlink" title="2.1.2 语法和特性"></a>2.1.2 <strong>语法和特性</strong></h4><p>“C minus” 语言支持基础的程序结构，包括变量声明、函数定义、基本数据类型（如整数、浮点数、字符）、以及控制流语句（如循环和条件判断）。语言设计充分考虑了编译器实现的需要，如明确的数据类型声明、函数声明和定义，以及表达式和控制流的标准化处理。</p>
<h4 id="2-1-3-编译器设计的特点"><a href="#2-1-3-编译器设计的特点" class="headerlink" title="2.1.3 编译器设计的特点"></a>2.1.3 <strong>编译器设计的特点</strong></h4><p>“C minus” 语言的编译器实现包括多个阶段，每个阶段都展现了编译原理的关键环节。从词法分析器和语法分析器的构建，到符号表的管理，再到中间代码的生成和优化，最终到目标代码生成，每个环节都是编译原理课程中不可或缺的部分。</p>
<h4 id="2-1-4-目标代码指令集-MIPS架构"><a href="#2-1-4-目标代码指令集-MIPS架构" class="headerlink" title="2.1.4 目标代码指令集 - MIPS架构"></a>2.1.4 目标代码指令集 - MIPS架构</h4><p>编译器的目标代码选择了 MIPS 指令集。MIPS 作为一种 RISC 架构，其指令集的简洁性和高效性使它成为教学和实践编译原理的理想选择。通过将 “C minus” 语言的中间代码转换为 MIPS 指令，编译器展示了如何将高级语言映射到特定体系结构的机器代码上，这是理解编译器后端设计的关键步骤。</p>
<h4 id="2-1-5-自定义语言总结"><a href="#2-1-5-自定义语言总结" class="headerlink" title="2.1.5 自定义语言总结"></a>2.1.5 自定义语言总结</h4><p>综上所述，”C minus” 语言及其编译器的设计和实现，提供了一个理想的平台，用于教授和学习编译原理的关键概念。它通过简化的语言特性和对经典 MIPS 架构的应用，允许学习者在实践中深入理解从源代码到机器代码的整个转换过程。</p>
<h3 id="2-2-单词文法与语言文法"><a href="#2-2-单词文法与语言文法" class="headerlink" title="2.2 单词文法与语言文法"></a>2.2 单词文法与语言文法</h3><p>“C minus” 语言的文法反映了其结构和语法规则。以下是一些关键的文法规则：</p>
<h4 id="2-2-1-程序结构（Program-Structure）"><a href="#2-2-1-程序结构（Program-Structure）" class="headerlink" title="2.2.1 程序结构（Program Structure）:"></a>2.2.1 <strong>程序结构（Program Structure）</strong>:</h4><ul>
<li>program: ExtDefList 定义了程序的最高级结构，即由一系列外部定义（ExtDefList）组成。</li>
</ul>
<h4 id="2-2-2-外部定义（External-Definitions）"><a href="#2-2-2-外部定义（External-Definitions）" class="headerlink" title="2.2.2 外部定义（External Definitions）:"></a>2.2.2 <strong>外部定义（External Definitions）</strong>:</h4><ul>
<li>ExtDefList 可以为空，或者由一个外部定义和更多的外部定义列表组成。</li>
<li>ExtDef 可以是类型声明后跟一个变量声明列表和分号，函数声明（包括类型、名称、参数列表和复合语句），或者不带函数体的函数声明。</li>
</ul>
<h4 id="2-2-3-类型和声明（Types-and-Declarations）"><a href="#2-2-3-类型和声明（Types-and-Declarations）" class="headerlink" title="2.2.3 类型和声明（Types and Declarations）:"></a>2.2.3 <strong>类型和声明（Types and Declarations）</strong>:</h4><ul>
<li>Specifier 定义了基本的数据类型（如 TYPE）。</li>
<li>VarDec 定义了变量声明，可以是一个标识符或数组声明。</li>
<li>ParamDec 定义了函数参数的类型和名称。</li>
</ul>
<h4 id="2-2-4-复合语句和控制流（Compound-Statements-and-Control-Flow）"><a href="#2-2-4-复合语句和控制流（Compound-Statements-and-Control-Flow）" class="headerlink" title="2.2.4 复合语句和控制流（Compound Statements and Control Flow）:"></a>2.2.4 <strong>复合语句和控制流（Compound Statements and Control Flow）</strong>:</h4><ul>
<li>CompSt 定义了复合语句，由局部变量定义列表和语句列表组成。</li>
<li>Stmt 定义了不同类型的语句，包括表达式语句、复合语句、返回语句、条件语句、循环语句、跳转语句等。</li>
</ul>
<h4 id="2-2-5-表达式（Expressions）"><a href="#2-2-5-表达式（Expressions）" class="headerlink" title="2.2.5 表达式（Expressions）:"></a>2.2.5 <strong>表达式（Expressions）</strong>:</h4><ul>
<li>Exp 定义了表达式的结构，可以是赋值表达式、算术运算、逻辑运算、比较运算等。</li>
<li>支持的操作包括基本的算术运算（如加、减、乘、除）、逻辑运算（如与、或、非）、关系运算（如大于、等于）等。</li>
<li>表达式可以是标识符、整数、浮点数或括号中的表达式。</li>
</ul>
<h4 id="2-2-6-BNF语法描述"><a href="#2-2-6-BNF语法描述" class="headerlink" title="2.2.6 BNF语法描述"></a>2.2.6 BNF语法描述</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">program: ExtDefList		</span><br><span class="line"></span><br><span class="line">ExtDefList:</span><br><span class="line">          | ExtDef ExtDefList</span><br><span class="line">          </span><br><span class="line">ExtDef:     Specifier ExtDecList SEMI</span><br><span class="line">          | Specifier ID LP ParamList RP CompSt</span><br><span class="line">          | Specifier ID LP ParamList RP SEMI</span><br><span class="line">          </span><br><span class="line">Specifier:  TYPE</span><br><span class="line"></span><br><span class="line">ExtDecList: VarDec</span><br><span class="line">          | VarDec COMMA ExtDecList</span><br><span class="line"></span><br><span class="line">VarDec:     ID   </span><br><span class="line">          | VarDec LB INT RB</span><br><span class="line"></span><br><span class="line">ParamVarDec:ID</span><br><span class="line"></span><br><span class="line">ParamList:</span><br><span class="line">          | ParamDec  </span><br><span class="line">          | ParamList COMMA ParamDec</span><br><span class="line">          </span><br><span class="line">ParamDec:   Specifier ParamVarDec</span><br><span class="line"></span><br><span class="line">CompSt:     LC DefList StmList RC</span><br><span class="line"></span><br><span class="line">StmList:</span><br><span class="line">          | Stmt StmList</span><br><span class="line"></span><br><span class="line">DefList: </span><br><span class="line">          | Def DefList</span><br><span class="line"></span><br><span class="line">Def:   		Specifier DecList SEMI </span><br><span class="line"></span><br><span class="line">DecList:    Dec</span><br><span class="line">          | Dec COMMA DecList</span><br><span class="line">          </span><br><span class="line">Dec:  		VarDec</span><br><span class="line">       	  | VarDec ASSIGN Exp</span><br><span class="line"></span><br><span class="line">Case:   	CASE Exp COLON StmList  </span><br><span class="line"></span><br><span class="line">CaseList:	Case               </span><br><span class="line">       	  | Case CaseList</span><br><span class="line"></span><br><span class="line">Stmt:       Exp SEMI    		</span><br><span class="line">      	  | CompSt      		</span><br><span class="line">      	  | RETURN Exp SEMI   	</span><br><span class="line">      	  | RETURN SEMI   	    </span><br><span class="line">      	  | IF LP Exp RP Stmt %prec LOWER_THEN_ELSE </span><br><span class="line">      	  | IF LP Exp RP Stmt ELSE Stmt   		  </span><br><span class="line">      	  | WHILE LP Exp RP Stmt 	</span><br><span class="line">      	  | FOR LP Exp SEMI Exp SEMI Exp RP Stmt </span><br><span class="line">      	  | SWITCH LP Exp RP LC CaseList RC   </span><br><span class="line">      	  | SWITCH LP Exp RP LC CaseList DEFAULT COLON StmList RC</span><br><span class="line">      	  | BREAK SEMI        </span><br><span class="line">      	  | CONTINUE SEMI       </span><br><span class="line">      	  | error SEMI </span><br><span class="line"></span><br><span class="line">Exp:    	Exp ASSIGN Exp</span><br><span class="line">      	  | Exp PLUS Exp </span><br><span class="line">       	  | Exp MINUS Exp</span><br><span class="line">       	  | Exp STAR Exp</span><br><span class="line">       	  | Exp DIV Exp </span><br><span class="line">		  | Exp MOD Exp </span><br><span class="line">       	  | LP Exp RP</span><br><span class="line">       	  | MINUS Exp %prec UMINUS  </span><br><span class="line">       	  | PLUS Exp %prec UPLUS</span><br><span class="line"></span><br><span class="line">       	  | Exp AND Exp   </span><br><span class="line">       	  | Exp OR Exp    </span><br><span class="line">       	  | NOT Exp</span><br><span class="line"></span><br><span class="line">       	  | Exp GT Exp	</span><br><span class="line">       	  | Exp GE Exp 	</span><br><span class="line">       	  | Exp LT Exp 	</span><br><span class="line">       	  | Exp LE Exp 	</span><br><span class="line">       	  | Exp NE Exp </span><br><span class="line">       	  | Exp EQ Exp</span><br><span class="line"></span><br><span class="line">       	  | DPLUS Exp</span><br><span class="line">		  | DMINUS Exp</span><br><span class="line">		  | PLUSD Exp</span><br><span class="line">		  | MINUSD Exp</span><br><span class="line"></span><br><span class="line">       	  | ID LP Args RP</span><br><span class="line">       	  | ID</span><br><span class="line">		  | ID SubList            	</span><br><span class="line">       	  | INT           	</span><br><span class="line">       	  | FLOAT       </span><br><span class="line">       	  </span><br><span class="line">Args:  </span><br><span class="line">       	  |  Exp </span><br><span class="line">       	  |	 Args COMMA  Exp</span><br><span class="line"></span><br><span class="line">Sub:         LB Exp RB</span><br><span class="line"></span><br><span class="line">SubList: 	 Sub                </span><br><span class="line">    	  |  SubList Sub </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="2-3-符号表结构定义"><a href="#2-3-符号表结构定义" class="headerlink" title="2.3 符号表结构定义"></a>2.3 符号表结构定义</h3><p>在 “C minus” 语言的编译器设计中，符号表是一个关键的数据结构，用于存储关于源代码中标识符（如变量名、函数名）的信息。以下是符号表的详细结构和功能描述：</p>
<h4 id="2-3-1-基本符号结构（Symbol-类）"><a href="#2-3-1-基本符号结构（Symbol-类）" class="headerlink" title="2.3.1 基本符号结构（Symbol 类）:"></a>2.3.1 <strong>基本符号结构（Symbol 类）</strong>:</h4><ul>
<li>Name: 标识符的名称。</li>
<li>Type: 标识符的类型，可以是基本类型（字符、整型、浮点型、空类型）。</li>
<li>Kind: 标识符的种类，例如变量（V）、函数（F）、参数（P）、数组（A）等。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**************符号表定义**********************/</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Symbol</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    string Name;</span><br><span class="line">    BasicTypes Type;        <span class="comment">//符号类型，目前仅基本类型T_CHAR,T_INT,T_FLOAT，T_VOID</span></span><br><span class="line">    <span class="keyword">char</span> Kind;       <span class="comment">//符号种类：基本变量V，函数名F，参数P，数组A等</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="2-3-2-变量符号（VarSymbol-类）"><a href="#2-3-2-变量符号（VarSymbol-类）" class="headerlink" title="2.3.2 变量符号（VarSymbol 类）:"></a>2.3.2 <strong>变量符号（VarSymbol 类）</strong>:</h4><ul>
<li>继承自 Symbol 类，专门用于表示变量。</li>
<li>Alias: 变量的别名，解决中间代码中作用域嵌套变量同名的显示时的二义性问题。</li>
<li>Offset: 变量在相应活动记录（AR）中的偏移量。</li>
<li>isGlobal: 表示变量是否为全局变量。</li>
<li>Dims: 数组的维度，用于表示数组类型的变量。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VarSymbol</span> :</span> <span class="keyword">public</span> Symbol &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    string Alias;   <span class="comment">//别名，为解决中间代码中，作用域嵌套变量同名的显示时的二义性问题</span></span><br><span class="line">    <span class="keyword">int</span> Offset;     <span class="comment">//变量在对应AR中的偏移量</span></span><br><span class="line">    <span class="keyword">int</span> isGolbal = <span class="number">0</span>;</span><br><span class="line">    vector&lt;<span class="keyword">int</span>&gt; Dims;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="2-3-3-函数符号（FuncSymbol-类）"><a href="#2-3-3-函数符号（FuncSymbol-类）" class="headerlink" title="2.3.3 函数符号（FuncSymbol 类）:"></a>2.3.3 <strong>函数符号（FuncSymbol 类）</strong>:</h4><ul>
<li>继承自 Symbol 类，专门用于表示函数。</li>
<li>ARSize: 函数的活动记录（AR）的大小，用于函数调用时分配内存单元。</li>
<li>ParamNum: 函数的形式参数个数。</li>
<li>ParamPtr: 指向参数符号表的指针。</li>
<li>Declaration: 表示函数是否已在符号表中定义，0 表示已定义。</li>
<li>Params: 定义时指出的参数类型和数目列表。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FuncSymbol</span> :</span> <span class="keyword">public</span> Symbol &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> ARSize;       <span class="comment">//函数AR的大小，作为调用时分配单元的依据</span></span><br><span class="line">    <span class="keyword">int</span> ParamNum;     <span class="comment">//形式参数个数</span></span><br><span class="line">    SymbolsInAScope *ParamPtr;  <span class="comment">//指向参数的符号表</span></span><br><span class="line">    <span class="keyword">int</span> Declaration;   <span class="comment">//目前在符号表中的是否已经定义，0表示已经定义</span></span><br><span class="line">    <span class="comment">//定义时指出参数类型和参数数目，声明时指出参数类型和参数数目，在定义时参考</span></span><br><span class="line">    vector&lt;ParamAST *&gt; Params;  </span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="2-3-4-作用域内的符号表（SymbolsInAScope-类）"><a href="#2-3-4-作用域内的符号表（SymbolsInAScope-类）" class="headerlink" title="2.3.4 作用域内的符号表（SymbolsInAScope 类）:"></a>2.3.4 <strong>作用域内的符号表（SymbolsInAScope 类）</strong>:</h4><ul>
<li>表示单一作用域内的符号表，每个复合语句对应一个符号表。</li>
<li>Symbols: 存储该作用域内所有符号的向量。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SymbolsInAScope</span> &#123;</span>    <span class="comment">//单一作用域的符号名，每个复合语句对应一个符号表</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;Symbol *&gt; Symbols;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="2-3-5-符号表栈（SymbolStackDef-类）"><a href="#2-3-5-符号表栈（SymbolStackDef-类）" class="headerlink" title="2.3.5 符号表栈（SymbolStackDef 类）:"></a>2.3.5 <strong>符号表栈（SymbolStackDef 类）</strong>:</h4><ul>
<li>用栈结构来管理不同作用域的符号表。</li>
<li>栈底通常存储全局变量和函数定义，每个复合语句对应一张局部符号表。</li>
<li>提供了在当前作用域（LocateNameCurrent）和全局作用域（LocateNameGlobal）查找符号的功能。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SymbolStackDef</span> &#123;</span></span><br><span class="line">    <span class="comment">//符号表类定义,栈结构栈底为全局变量和函数定义，每个复合语句对应一张局部符号表</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;SymbolsInAScope *&gt; Symbols;</span><br><span class="line"></span><br><span class="line">    <span class="function">Symbol *<span class="title">LocateNameCurrent</span><span class="params">(<span class="keyword">const</span> string&amp; Name)</span></span>;<span class="comment">//在当前作用域中查找该符号是否有定义</span></span><br><span class="line">    <span class="function">Symbol *<span class="title">LocateNameGlobal</span><span class="params">(string Name)</span></span>; <span class="comment">//由内向外，在全部作用域中查找该符号是否有定义</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="2-3-6-符号表总结"><a href="#2-3-6-符号表总结" class="headerlink" title="2.3.6 符号表总结"></a>2.3.6 符号表总结</h4><p>这个符号表结构设计不仅支持基本的变量和函数的声明与定义，而且考虑了作用域管理、参数传递和内存布局等编译器设计的关键方面。它通过精心设计的数据结构和管理方法，有效地支持了编译过程中的名字解析、类型检查和内存分配等任务。这种符号表的设计是 “C minus” 编译器实现中的一个重要组成部分，有助于实现语言的静态语义和支持后续的代码生成。</p>
<h3 id="2-4-错误类型码定义"><a href="#2-4-错误类型码定义" class="headerlink" title="2.4 错误类型码定义"></a>2.4 错误类型码定义</h3><p>在 “C minus” 语言的编译器设计中，错误处理是一个至关重要的环节。为此，编译器中定义了一个 Errors 类，用于记录和管理在语法分析和语义分析阶段发现的错误。以下是该类的详细描述及其在编译器中的作用：</p>
<h4 id="2-4-1-错误存储（Errors-类）"><a href="#2-4-1-错误存储（Errors-类）" class="headerlink" title="2.4.1 错误存储（Errors 类）:"></a>2.4.1 <strong>错误存储（Errors 类）</strong>:</h4><ul>
<li>Errs: 静态向量，用于存储错误信息。每个 Error 元素包含错误的位置（行和列）和错误消息。</li>
<li>这种存储机制允许编译器在整个编译过程中收集并保存发现的所有错误。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Errors</span>            //用来记录语法、语义错误</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">static</span> vector &lt;Error&gt; Errs;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ErrorAdd</span><span class="params">(<span class="keyword">int</span> Line, <span class="keyword">int</span> Column, string ErrMsg)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ErrorsDisplay</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">IsEmpty</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> Errs.<span class="built_in">empty</span>(); &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="2-4-2-错误添加（ErrorAdd-方法）"><a href="#2-4-2-错误添加（ErrorAdd-方法）" class="headerlink" title="2.4.2 错误添加（ErrorAdd 方法）:"></a>2.4.2 <strong>错误添加（ErrorAdd 方法）</strong>:</h4><ul>
<li>静态函数，用于向 Errs 向量中添加新的错误。</li>
<li>接受行号、列号和错误消息作为参数，创建一个新的 Error 实例，并将其添加到 Errs 向量中。</li>
<li>这使得编译器能够在发现错误时立即记录相关信息。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Errors::ErrorAdd</span><span class="params">(<span class="keyword">int</span> Line, <span class="keyword">int</span> Column, string ErrMsg)</span> </span>&#123;</span><br><span class="line">    Error e = &#123;Line, Column, std::<span class="built_in">move</span>(ErrMsg)&#125;;</span><br><span class="line">    Errs.<span class="built_in">push_back</span>(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-4-3-错误展示（ErrorsDisplay-方法）"><a href="#2-4-3-错误展示（ErrorsDisplay-方法）" class="headerlink" title="2.4.3 错误展示（ErrorsDisplay 方法）:"></a>2.4.3 <strong>错误展示（ErrorsDisplay 方法）</strong>:</h4><ul>
<li>静态函数，用于展示收集到的所有错误信息。</li>
<li>遍历 Errs 向量，并打印每个错误的详细信息（包括位置和消息）。</li>
<li>这对于用户理解和修正代码中的错误至关重要。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Errors::ErrorsDisplay</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; a: Errs)</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;第&quot;</span> &lt;&lt; a.Line &lt;&lt; <span class="string">&quot;行、第&quot;</span> &lt;&lt; a.Column &lt;&lt; <span class="string">&quot;列处错误: &quot;</span> &lt;&lt; a.ErrMsg &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-4-4-错误检查（IsEmpty-方法）"><a href="#2-4-4-错误检查（IsEmpty-方法）" class="headerlink" title="2.4.4 错误检查（IsEmpty 方法）:"></a>2.4.4 <strong>错误检查（IsEmpty 方法）</strong>:</h4><ul>
<li>提供快速检查 Errs 向量是否为空的功能，即编译过程中是否发现了错误。</li>
<li>这对于在编译器的不同阶段判断是否存在错误非常有用。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">IsEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Errs.<span class="built_in">empty</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-4-5-错误类型总结"><a href="#2-4-5-错误类型总结" class="headerlink" title="2.4.5 错误类型总结"></a>2.4.5 错误类型总结</h4><p>通过 Errors 类的设计，”C minus” 编译器能够有效地处理和报告在代码编译过程中遇到的各种错误。这种错误处理机制不仅对编译器用户（程序员）友好，提供了清晰的错误信息和定位，也对编译器的开发和维护至关重要，因为它使得识别和修复编译器本身的缺陷变得更加容易。</p>
<h3 id="2-5-中间代码结构定义"><a href="#2-5-中间代码结构定义" class="headerlink" title="2.5 中间代码结构定义"></a>2.5 中间代码结构定义</h3><p>在 “C minus” 语言的编译器设计中，中间代码是源代码与目标代码之间的重要阶段。中间代码的设计旨在提供一个与特定机器无关的代码表示，使得编译器的后端可以更容易地将其转换为目标机器代码。在本项目中，中间代码采用了四元式的形式，以下是其详细结构和功能描述：</p>
<h4 id="2-5-1-操作数（Opn-类）"><a href="#2-5-1-操作数（Opn-类）" class="headerlink" title="2.5.1 操作数（Opn 类）:"></a>2.5.1 <strong>操作数（Opn 类）</strong>:</h4><ul>
<li>Name: 表示变量的别名（对于变量而言）或函数名。如果为空，则表示该操作数是一个常量。</li>
<li>Type: 表示操作数的类型（如整数、浮点数、字符等）。</li>
<li>isGlobal: 表示该操作数是否为全局变量。</li>
<li>Offset/SymPtr/constCHAR/constINT/constFLOAT: 根据操作数的不同类型，这个联合体可以存储变量在活动记录（AR）中的偏移量、符号表指针或常量值。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**************中间代码（四元式）定义**********************/</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Opn</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    string Name;       <span class="comment">//变量别名（为空时表示常量）或函数名</span></span><br><span class="line">    <span class="keyword">int</span> Type&#123;&#125;;</span><br><span class="line">    <span class="keyword">int</span> isGolbal = <span class="number">0</span>;</span><br><span class="line">    <span class="class"><span class="keyword">union</span> &#123;</span></span><br><span class="line">        <span class="keyword">int</span> Offset&#123;&#125;;     <span class="comment">//AR中的偏移量</span></span><br><span class="line">        <span class="keyword">void</span> *SymPtr;    <span class="comment">//符号表指针</span></span><br><span class="line">        <span class="keyword">char</span> constCHAR;</span><br><span class="line">        <span class="keyword">int</span> constINT;</span><br><span class="line">        <span class="keyword">float</span> constFLOAT;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Opn</span>(string Name, <span class="keyword">int</span> Type, <span class="keyword">int</span> Offset, <span class="keyword">int</span> isGolbal) : <span class="built_in">Name</span>(std::<span class="built_in">move</span>(Name)), <span class="built_in">Type</span>(Type), <span class="built_in">Offset</span>(Offset), (isGolbal) &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Opn</span>() &#123;&#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="2-5-2-中间代码（四元式，IRCode-类）"><a href="#2-5-2-中间代码（四元式，IRCode-类）" class="headerlink" title="2.5.2 中间代码（四元式，IRCode 类）:"></a>2.5.2 <strong>中间代码（四元式，IRCode 类）</strong>:</h4><ul>
<li>Op: 表示四元式的操作类型，如加法、减法、乘法、除法等。</li>
<li>Opn1 和 Opn2: 表示操作的第一和第二操作数。</li>
<li>Result: 表示操作的结果。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IRCode</span>       //四元式结构</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> Op;</span><br><span class="line">    Opn Opn1;</span><br><span class="line">    Opn Opn2;</span><br><span class="line">    Opn Result;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">IRCode</span>(<span class="keyword">int</span> Op, Opn Opn1, Opn Opn2, Opn Result) : <span class="built_in">Op</span>(Op), <span class="built_in">Opn1</span>(std::<span class="built_in">move</span>(Opn1)), <span class="built_in">Opn2</span>(std::<span class="built_in">move</span>(Opn2)), <span class="built_in">Result</span>(std::<span class="built_in">move</span>(Result)) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="2-5-3-四元式的表示和应用"><a href="#2-5-3-四元式的表示和应用" class="headerlink" title="2.5.3 四元式的表示和应用:"></a>2.5.3 <strong>四元式的表示和应用</strong>:</h4><ul>
<li>每个 IRCode 实例表示一个中间代码的操作，包括了进行什么样的操作、操作的对象以及操作的结果。</li>
<li>例如，一个四元式可以表示为 Opn1 + Opn2 -&gt; Result，其中 Op 指定了 + 操作，Opn1 和 Opn2 作为输入，Result 作为输出。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">default</span>:     <span class="comment">//处理关系运算符</span></span><br><span class="line">    Opn Opn1 = LeftExp-&gt;<span class="built_in">GenIR</span>(TempVarOffset);</span><br><span class="line">    Opn Opn2 = RightExp-&gt;<span class="built_in">GenIR</span>(TempVarOffset);</span><br><span class="line">    it = IRCodes.<span class="built_in">end</span>();</span><br><span class="line">    IRCodes.<span class="built_in">splice</span>(it, LeftExp-&gt;IRCodes);</span><br><span class="line">    it = IRCodes.<span class="built_in">end</span>();</span><br><span class="line">    IRCodes.<span class="built_in">splice</span>(it, RightExp-&gt;IRCodes);</span><br><span class="line">    <span class="function">IRCode <span class="title">IR</span><span class="params">(JGT, Opn1, Opn2, Opn(LabelTrue, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>))</span></span>;</span><br><span class="line">    <span class="keyword">if</span> (Op == GE) IR.Op = JGE;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (Op == LT) IR.Op = JLT;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (Op == LE) IR.Op = JLE;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (Op == EQ) IR.Op = JEQ;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (Op == NE) IR.Op = JNE;</span><br><span class="line">    IRCodes.<span class="built_in">emplace_back</span>(IR);</span><br><span class="line">    IRCodes.<span class="built_in">emplace_back</span>(GOTO, <span class="built_in">Opn</span>(), <span class="built_in">Opn</span>(), <span class="built_in">Opn</span>(LabelFalse, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>));</span><br></pre></td></tr></table></figure>
<h4 id="2-5-4-中间代码总结"><a href="#2-5-4-中间代码总结" class="headerlink" title="2.5.4 中间代码总结"></a>2.5.4 中间代码总结</h4><p>这种中间代码的设计使得编译器能够以一种标准化和简化的形式表示各种复杂的操作，从而为代码优化和目标代码生成提供了便利。四元式作为一种通用的中间表示，可以容易地被转换成各种目标机器的指令集，提高了编译器的可移植性和灵活性。此外，四元式的清晰结构也便于进行各种中间代码优化技术的实现，如公共子表达式消除、死代码消除等，从而提升了编译后代码的效率和性能。</p>
<h3 id="2-6-目标代码指令集选择"><a href="#2-6-目标代码指令集选择" class="headerlink" title="2.6 目标代码指令集选择"></a>2.6 目标代码指令集选择</h3><p>在 “C minus” 编译器项目中，目标代码指令集选择了 MIPS（Microprocessor without Interlocked Pipeline Stages）架构。MIPS 架构是一种经典的精简指令集计算（RISC）体系结构，广泛用于教育和嵌入式系统。以下是 MIPS 架构的详细介绍：</p>
<h4 id="2-6-1-RISC-设计理念"><a href="#2-6-1-RISC-设计理念" class="headerlink" title="2.6.1 RISC 设计理念:"></a>2.6.1 <strong>RISC 设计理念</strong>:</h4><ul>
<li>MIPS 架构基于 RISC 设计理念，这意味着它使用了一组简单且常用的指令，与复杂指令集计算（CISC）体系结构如 x86 形成对比。</li>
<li>RISC 架构的优势在于指令执行的高效率和更简单的硬件实现。</li>
</ul>
<h4 id="2-6-2-寄存器使用"><a href="#2-6-2-寄存器使用" class="headerlink" title="2.6.2 寄存器使用:"></a>2.6.2 <strong>寄存器使用</strong>:</h4><ul>
<li>MIPS 指令集包含了一组固定的 32 个通用寄存器，每个寄存器均为 32 位宽。</li>
<li>包括专用寄存器如程序计数器（PC）、栈指针（$sp）、全局指针（$gp）、返回地址（$ra）等，以及用于函数参数传递（$a0-$a3）和函数返回值（$v0, $v1）的寄存器。</li>
</ul>
<h4 id="2-6-3-指令格式"><a href="#2-6-3-指令格式" class="headerlink" title="2.6.3 指令格式:"></a>2.6.3 <strong>指令格式</strong>:</h4><ul>
<li>MIPS 指令集有三种基本格式：R型（寄存器指令）、I型（立即数指令）和 J型（跳转指令）。</li>
<li>这种统一的指令格式简化了指令的解码过程，使得硬件实现更为高效。</li>
</ul>
<h4 id="2-6-4-流水线执行"><a href="#2-6-4-流水线执行" class="headerlink" title="2.6.4 流水线执行:"></a>2.6.4 <strong>流水线执行</strong>:</h4><ul>
<li>MIPS 支持流水线指令执行，这是实现高指令吞吐率的关键技术之一。</li>
<li>流水线执行允许在一个时钟周期内同时执行多个指令的不同阶段，从而提高执行效率。</li>
</ul>
<h4 id="2-6-5-系统调用和中断处理"><a href="#2-6-5-系统调用和中断处理" class="headerlink" title="2.6.5 系统调用和中断处理:"></a>2.6.5 <strong>系统调用和中断处理</strong>:</h4><ul>
<li>MIPS 架构提供了系统调用指令（syscall）用于执行操作系统级别的功能，如输入输出操作。</li>
<li>它还支持中断和异常处理，这对于实现多任务操作系统和响应外部事件至关重要。</li>
</ul>
<h4 id="2-6-6-应用领域"><a href="#2-6-6-应用领域" class="headerlink" title="2.6.6 应用领域:"></a>2.6.6 <strong>应用领域</strong>:</h4><ul>
<li>由于其简单和高效的特性，MIPS 架构被广泛应用于教育领域，用于教授计算机组成原理和编译原理。</li>
<li>同时，MIPS 架构也被广泛用于嵌入式系统和网络设备，如路由器和交换机。</li>
</ul>
<h4 id="2-6-7-目标代码指令集总结"><a href="#2-6-7-目标代码指令集总结" class="headerlink" title="2.6.7 目标代码指令集总结"></a>2.6.7 目标代码指令集总结</h4><p>在 “C minus” 编译器项目中，选择 MIPS 作为目标代码指令集是基于其教学价值以及简洁高效的指令集设计。通过将中间代码转换为 MIPS 指令，编译器不仅能有效地演示编译原理的关键概念，如指令选择、寄存器分配和函数调用约定，还能体现 RISC 设计理念的优势。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;def.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> YYSTYPE int   <span class="comment">//此行是为了包含parser.tab.hpp不引起错误而加,可以在后面使用相关常量</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;parser.tab.hpp&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function">string <span class="title">LoadFromMem</span><span class="params">(<span class="keyword">const</span> string&amp; Reg1, <span class="keyword">const</span> Opn&amp; opn, string Reg2)</span> </span>&#123;</span><br><span class="line">    string load;</span><br><span class="line">    <span class="keyword">if</span> (!(Reg2 != <span class="string">&quot;$sp&quot;</span> || (Reg2 == <span class="string">&quot;$sp&quot;</span> &amp;&amp; opn.isGolbal == <span class="number">0</span>)))</span><br><span class="line">        Reg2 = <span class="string">&quot;$gp&quot;</span>;</span><br><span class="line">    load = <span class="string">&quot;  lw &quot;</span> + Reg1 + <span class="string">&quot;,  &quot;</span> + <span class="built_in">to_string</span>(opn.Offset) + <span class="string">&quot;(&quot;</span> + Reg2 + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> load;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">string <span class="title">LoadFromMem</span><span class="params">(<span class="keyword">const</span> string&amp; Reg1, <span class="keyword">const</span> Opn&amp; opn1, <span class="keyword">const</span> Opn&amp; opn2, string Reg2)</span> </span>&#123;</span><br><span class="line">    string load;</span><br><span class="line">    <span class="keyword">if</span> (!(Reg2 != <span class="string">&quot;$sp&quot;</span> || (Reg2 == <span class="string">&quot;$sp&quot;</span> &amp;&amp; opn1.isGolbal == <span class="number">0</span>)))</span><br><span class="line">        Reg2 = <span class="string">&quot;$gp&quot;</span>;</span><br><span class="line">    load = <span class="string">&quot;  lw $t4,  &quot;</span> + <span class="built_in">to_string</span>(opn2.Offset) + <span class="string">&quot;(&quot;</span> + <span class="string">&quot;$sp&quot;</span> + <span class="string">&quot;)\n&quot;</span> +</span><br><span class="line">           <span class="string">&quot;  add &quot;</span> + Reg2 + <span class="string">&quot;, &quot;</span> + Reg2 + <span class="string">&quot;, &quot;</span> + <span class="string">&quot;$t4\n&quot;</span> +</span><br><span class="line">           <span class="string">&quot;  lw &quot;</span> + Reg1 + <span class="string">&quot;,  &quot;</span> + <span class="built_in">to_string</span>(opn1.Offset) + <span class="string">&quot;(&quot;</span> + Reg2 + <span class="string">&quot;)\n&quot;</span> +</span><br><span class="line">           <span class="string">&quot;  sub &quot;</span> + Reg2 + <span class="string">&quot;, &quot;</span> + Reg2 + <span class="string">&quot;, $t4&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> load;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">string <span class="title">StoreToMem</span><span class="params">(<span class="keyword">const</span> string&amp; Reg1, <span class="keyword">const</span> Opn&amp; opn, string Reg2)</span> </span>&#123;</span><br><span class="line">    string store;</span><br><span class="line">    <span class="keyword">if</span> (!(Reg2 != <span class="string">&quot;$sp&quot;</span> || (Reg2 == <span class="string">&quot;$sp&quot;</span> &amp;&amp; opn.isGolbal == <span class="number">0</span>)))</span><br><span class="line">        Reg2 = <span class="string">&quot;$gp&quot;</span>;</span><br><span class="line">    store = <span class="string">&quot;  sw &quot;</span> + Reg1 + <span class="string">&quot;,  &quot;</span> + <span class="built_in">to_string</span>(opn.Offset) + <span class="string">&quot;(&quot;</span> + Reg2 + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> store;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">string <span class="title">StoreToMem</span><span class="params">(<span class="keyword">const</span> string&amp; Reg1, <span class="keyword">const</span> Opn&amp; opn1, <span class="keyword">const</span> Opn&amp; opn2, string Reg2)</span> </span>&#123;</span><br><span class="line">    string store;</span><br><span class="line">    <span class="keyword">if</span> (!(Reg2 != <span class="string">&quot;$sp&quot;</span> || (Reg2 == <span class="string">&quot;$sp&quot;</span> &amp;&amp; opn1.isGolbal == <span class="number">0</span>)))</span><br><span class="line">        Reg2 = <span class="string">&quot;$gp&quot;</span>;</span><br><span class="line">    store = <span class="string">&quot;  lw $t4,  &quot;</span> + <span class="built_in">to_string</span>(opn2.Offset) + <span class="string">&quot;(&quot;</span> + <span class="string">&quot;$sp&quot;</span> + <span class="string">&quot;)\n&quot;</span> +</span><br><span class="line">            <span class="string">&quot;  add &quot;</span> + Reg2 + <span class="string">&quot;, &quot;</span> + Reg2 + <span class="string">&quot;, &quot;</span> + <span class="string">&quot;$t4\n&quot;</span> +</span><br><span class="line">            <span class="string">&quot;  sw &quot;</span> + Reg1 + <span class="string">&quot;,  &quot;</span> + <span class="built_in">to_string</span>(opn1.Offset) + <span class="string">&quot;(&quot;</span> + Reg2 + <span class="string">&quot;)\n&quot;</span> +</span><br><span class="line">            <span class="string">&quot;  sub &quot;</span> + Reg2 + <span class="string">&quot;, &quot;</span> + Reg2 + <span class="string">&quot;, $t4&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> store;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h2 id="3-系统设计与实现"><a href="#3-系统设计与实现" class="headerlink" title="3. 系统设计与实现"></a>3. 系统设计与实现</h2><h3 id="3-1-词法分析器"><a href="#3-1-词法分析器" class="headerlink" title="3.1 词法分析器"></a>3.1 词法分析器</h3><p>词法分析器是编译过程中的首要阶段，它负责将源代码文本转换为一系列标记（tokens），为后续的语法分析阶段做准备。在 “C minus” 语言的编译器设计中，词法分析器的实现基于 Flex 工具。以下是对该词法分析器的详细描述：</p>
<h4 id="3-1-1-词法规则定义"><a href="#3-1-1-词法规则定义" class="headerlink" title="3.1.1 词法规则定义:"></a>3.1.1 <strong>词法规则定义</strong>:</h4><ul>
<li>词法分析器通过一系列正则表达式规则定义了 “C minus” 语言的词法单元，包括关键字（如 if, else, while）、标识符、常量（整型和浮点型）、运算符（如 +, -, *, /）、分隔符等。</li>
<li>这些规则确保了词法分析器可以准确地识别源代码中的各种基本元素。</li>
</ul>
<h4 id="3-1-2-动作执行"><a href="#3-1-2-动作执行" class="headerlink" title="3.1.2 动作执行:"></a>3.1.2 <strong>动作执行</strong>:</h4><ul>
<li>对于每个匹配的规则，词法分析器执行相应的动作，这些动作通常包括返回一个特定的标记给语法分析器，并可能包括将识别的值（如常量的值、标识符的名称）保存到相应的数据结构中。</li>
<li>例如，对于匹配到的标识符，词法分析器会将其名称保存并返回 ID 标记。</li>
</ul>
<h4 id="3-1-3-错误处理"><a href="#3-1-3-错误处理" class="headerlink" title="3.1.3 错误处理:"></a>3.1.3 <strong>错误处理</strong>:</h4><ul>
<li>词法分析器能够识别并报告不合法的字符或构造，如未知的符号或不完整的注释。</li>
<li>对于每个不可识别的符号，词法分析器打印错误信息并增加错误计数。</li>
</ul>
<h4 id="3-1-4-位置跟踪"><a href="#3-1-4-位置跟踪" class="headerlink" title="3.1.4 位置跟踪:"></a>3.1.4 <strong>位置跟踪</strong>:</h4><ul>
<li>词法分析器通过内置的 yylineno 和自定义的 yycolumn 变量跟踪当前标记的行号和列号，这对于错误报告和调试非常重要。</li>
<li>在每个标记的动作代码中，更新这些变量以反映当前标记的位置。</li>
</ul>
<h4 id="3-1-5-注释处理"><a href="#3-1-5-注释处理" class="headerlink" title="3.1.5 注释处理:"></a>3.1.5 <strong>注释处理</strong>:</h4><p>词法分析器通过特定的规则识别并忽略源代码中的注释，支持单行（//）和多行（/<em> … </em>/）注释。</p>
<h4 id="3-1-6-lex-l-源代码"><a href="#3-1-6-lex-l-源代码" class="headerlink" title="3.1.6 lex.l 源代码"></a>3.1.6 lex.l 源代码</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">%option  yylineno</span><br><span class="line">%&#123;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;string.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> ErrorCharNum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> yycolumn=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> YY_USER_ACTION    \</span></span><br><span class="line"><span class="meta">	yylloc.first_line=yylloc.last_line=yylineno; \</span></span><br><span class="line"><span class="meta">	yylloc.first_column=yycolumn;\</span></span><br><span class="line"><span class="meta">	yylloc.last_column=yycolumn+yyleng-1;\</span></span><br><span class="line"><span class="meta">	yycolumn+=yyleng;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">	<span class="keyword">int</span> type_int;</span><br><span class="line">	<span class="keyword">int</span> type_float;</span><br><span class="line">	<span class="keyword">char</span> type_id[<span class="number">32</span>];</span><br><span class="line">&#125; YYLVAL;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> YYSTYPE YYLVAL</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;parser.tab.hpp&quot;</span></span></span><br><span class="line"></span><br><span class="line">%&#125;</span><br><span class="line"></span><br><span class="line">id   [A-Za-z][A-Za-z0<span class="number">-9</span>]*</span><br><span class="line">intconst    <span class="number">0</span>|([<span class="number">1</span><span class="number">-9</span>][<span class="number">0</span><span class="number">-9</span>]*)</span><br><span class="line">floatconst    [<span class="number">0</span><span class="number">-9</span>]*\.?[<span class="number">0</span><span class="number">-9</span>]?([eE][-+]?[<span class="number">0</span><span class="number">-9</span>]+)?</span><br><span class="line">Oneline_comment		<span class="string">&quot;//&quot;</span>[^\n]*</span><br><span class="line">Multiline_comment	<span class="string">&quot;/*&quot;</span>([^\*]|(\*)*[^\*/])*(\*)*<span class="string">&quot;*/&quot;</span></span><br><span class="line"></span><br><span class="line">%%</span><br><span class="line"><span class="string">&quot;int&quot;</span>   	&#123;<span class="built_in">strcpy</span>(yylval.type_id,  yytext);<span class="keyword">return</span> TYPE;&#125;</span><br><span class="line"><span class="string">&quot;float&quot;</span>     &#123;<span class="built_in">strcpy</span>(yylval.type_id,  yytext);<span class="keyword">return</span> TYPE;&#125;</span><br><span class="line"><span class="string">&quot;void&quot;</span>      &#123;<span class="built_in">strcpy</span>(yylval.type_id,  yytext);<span class="keyword">return</span> TYPE;&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;return&quot;</span>    &#123;<span class="keyword">return</span> RETURN;&#125;</span><br><span class="line"><span class="string">&quot;if&quot;</span>       	&#123;<span class="keyword">return</span> IF;&#125;</span><br><span class="line"><span class="string">&quot;else&quot;</span>      &#123;<span class="keyword">return</span> ELSE;&#125;</span><br><span class="line"><span class="string">&quot;while&quot;</span>     &#123;<span class="keyword">return</span> WHILE;&#125;</span><br><span class="line"><span class="string">&quot;for&quot;</span>       &#123;<span class="keyword">return</span> FOR;&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;break&quot;</span>		&#123;<span class="keyword">return</span> BREAK;&#125;</span><br><span class="line"><span class="string">&quot;continue&quot;</span>	&#123;<span class="keyword">return</span> CONTINUE;&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;switch&quot;</span>	&#123;<span class="keyword">return</span> SWITCH;&#125;</span><br><span class="line"><span class="string">&quot;case&quot;</span>		&#123;<span class="keyword">return</span> CASE;&#125;</span><br><span class="line"><span class="string">&quot;default&quot;</span>	&#123;<span class="keyword">return</span> DEFAULT;&#125;</span><br><span class="line"></span><br><span class="line">&#123;id&#125;	&#123;<span class="built_in">strcpy</span>(yylval.type_id,yytext); <span class="keyword">return</span> ID;&#125;</span><br><span class="line"><span class="string">&quot;:&quot;</span>		&#123;<span class="keyword">return</span> COLON;&#125;</span><br><span class="line"><span class="string">&quot;;&quot;</span>	    &#123;<span class="keyword">return</span> SEMI;&#125;</span><br><span class="line"><span class="string">&quot;,&quot;</span>	    &#123;<span class="keyword">return</span> COMMA;&#125;</span><br><span class="line"><span class="string">&quot;&gt;=&quot;</span>	&#123;<span class="built_in">strcpy</span>(yylval.type_id, yytext);<span class="keyword">return</span> GE;&#125;</span><br><span class="line"><span class="string">&quot;&gt;&quot;</span>	    &#123;<span class="built_in">strcpy</span>(yylval.type_id, yytext);<span class="keyword">return</span> GT;&#125;</span><br><span class="line"><span class="string">&quot;&lt;=&quot;</span>	&#123;<span class="built_in">strcpy</span>(yylval.type_id, yytext);<span class="keyword">return</span> LE;&#125;</span><br><span class="line"><span class="string">&quot;&lt;&quot;</span>	    &#123;<span class="built_in">strcpy</span>(yylval.type_id, yytext);<span class="keyword">return</span> LT;&#125;</span><br><span class="line"><span class="string">&quot;!=&quot;</span>	&#123;<span class="built_in">strcpy</span>(yylval.type_id, yytext);<span class="keyword">return</span> NE;&#125;</span><br><span class="line"><span class="string">&quot;==&quot;</span>	&#123;<span class="built_in">strcpy</span>(yylval.type_id, yytext);<span class="keyword">return</span> EQ;&#125;</span><br><span class="line"><span class="string">&quot;=&quot;</span>	    &#123;<span class="keyword">return</span> ASSIGN;&#125;</span><br><span class="line"><span class="string">&quot;++&quot;</span>	&#123;<span class="keyword">return</span> DPLUS;&#125;</span><br><span class="line"><span class="string">&quot;--&quot;</span>	&#123;<span class="keyword">return</span> DMINUS;&#125;</span><br><span class="line"><span class="string">&quot;+&quot;</span>	    &#123;<span class="keyword">return</span> PLUS;&#125;</span><br><span class="line"><span class="string">&quot;-&quot;</span>	    &#123;<span class="keyword">return</span> MINUS;&#125;</span><br><span class="line"><span class="string">&quot;*&quot;</span>	    &#123;<span class="keyword">return</span> STAR;&#125;</span><br><span class="line"><span class="string">&quot;/&quot;</span>	    &#123;<span class="keyword">return</span> DIV;&#125;</span><br><span class="line"><span class="string">&quot;%&quot;</span>		&#123;<span class="keyword">return</span> MOD;&#125;</span><br><span class="line"><span class="string">&quot;&amp;&amp;&quot;</span>    &#123;<span class="keyword">return</span> AND;&#125;</span><br><span class="line"><span class="string">&quot;||&quot;</span>    &#123;<span class="keyword">return</span> OR;&#125;</span><br><span class="line"><span class="string">&quot;!&quot;</span>	    &#123;<span class="keyword">return</span> NOT;&#125;</span><br><span class="line"><span class="string">&quot;(&quot;</span>	    &#123;<span class="keyword">return</span> LP;&#125;</span><br><span class="line"><span class="string">&quot;)&quot;</span>	    &#123;<span class="keyword">return</span> RP;&#125;</span><br><span class="line"><span class="string">&quot;&#123;&quot;</span>	    &#123;<span class="keyword">return</span> LC;&#125;</span><br><span class="line"><span class="string">&quot;&#125;&quot;</span>	    &#123;<span class="keyword">return</span> RC;&#125;</span><br><span class="line"><span class="string">&quot;[&quot;</span>		&#123;<span class="keyword">return</span> LB;&#125;</span><br><span class="line"><span class="string">&quot;]&quot;</span>		&#123;<span class="keyword">return</span> RB;&#125;</span><br><span class="line">&#123;intconst&#125;      &#123; yylval.type_int=<span class="built_in">atoi</span>(yytext); <span class="keyword">return</span> INT;&#125;</span><br><span class="line">&#123;floatconst&#125;    &#123; yylval.type_float=<span class="built_in">atof</span>(yytext);     <span class="keyword">return</span> FLOAT;&#125;</span><br><span class="line">[ \r\t]     	&#123;&#125;</span><br><span class="line">&#123;Oneline_comment&#125;			&#123;&#125;		<span class="comment">//单行注释</span></span><br><span class="line">&#123;Multiline_comment&#125; 		&#123;&#125;		<span class="comment">//多行注释</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[\n]        	&#123;yycolumn=<span class="number">1</span>;&#125;</span><br><span class="line">.				&#123; <span class="built_in">printf</span>(<span class="string">&quot;在第 %d 行出现不可识别的符号 \&#x27;%s\&#x27; \n&quot;</span>,yylineno,yytext); ErrorCharNum++;&#125;</span><br><span class="line"></span><br><span class="line">%%</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">yywrap</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="3-1-7-词法分析器总结"><a href="#3-1-7-词法分析器总结" class="headerlink" title="3.1.7 词法分析器总结"></a>3.1.7 词法分析器总结</h4><p>通过上述设计和实现，”C minus” 语言的词法分析器能够高效地将源代码文本转换为一系列标记，为后续的编译过程奠定了坚实的基础。它的实现展示了编译原理中词法分析阶段的关键技术和方法，如词法规则的定义、标记的生成、位置跟踪和错误处理，是编译器设计的基础和关键部分。</p>
<h3 id="3-2-语法分析器"><a href="#3-2-语法分析器" class="headerlink" title="3.2 语法分析器"></a>3.2 语法分析器</h3><p>语法分析器在编译过程中扮演着至关重要的角色，负责根据词法分析器提供的标记序列，构建源程序的抽象语法树（AST）。在 “C minus” 编译器中，语法分析器的实现基于 Bison 工具。以下是对该语法分析器的全面描述：</p>
<h4 id="3-2-1-语法规则定义"><a href="#3-2-1-语法规则定义" class="headerlink" title="3.2.1 语法规则定义:"></a>3.2.1 <strong>语法规则定义</strong>:</h4><ul>
<li>语法分析器利用一系列产生式规则定义了 “C minus” 语言的语法结构，包括程序结构、函数定义、变量声明、表达式、控制流语句等。</li>
<li>这些规则以递归下降的方式编写，确保了语言的语法结构能够被准确地识别和解析。</li>
</ul>
<h4 id="3-2-2-AST节点创建"><a href="#3-2-2-AST节点创建" class="headerlink" title="3.2.2 AST节点创建:"></a>3.2.2 <strong>AST节点创建</strong>:</h4><ul>
<li>对于每个产生式规则，语法分析器在匹配时创建相应的AST节点，例如 ProgAST、FuncDefAST、VarDecAST 等。</li>
<li>通过这种方式，语法分析器将源代码转换为结构化的AST，为后续的语义分析和代码生成阶段奠定了基础。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SavePosition t-&gt;Line=yylloc.first_line;t-&gt;Column=yylloc.first_column</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">YYLVAL</span> &#123;</span></span><br><span class="line">	<span class="keyword">int</span>                  type_int;</span><br><span class="line">	<span class="keyword">float</span>                type_float;</span><br><span class="line">	<span class="keyword">char</span>                 type_id[<span class="number">32</span>];</span><br><span class="line"></span><br><span class="line">	ProgAST                     *program;</span><br><span class="line">	vector &lt;ExtDefAST *&gt;        ExtDefList;  	    <span class="comment">//外部定义（外部变量、函数）列表</span></span><br><span class="line">	ExtDefAST                   *ExtDef;</span><br><span class="line">	vector &lt;VarDecAST*&gt;         ExtDecList;        <span class="comment">//外部、局部变量列表</span></span><br><span class="line">	TypeAST                     *Specifier;</span><br><span class="line">	VarDecAST                   *VarDec;</span><br><span class="line">	CompStmAST                  *CompSt;</span><br><span class="line">	vector &lt;ParamAST *&gt;         ParamList;         <span class="comment">//形参列表</span></span><br><span class="line">	ParamAST                    *ParamDec;</span><br><span class="line"></span><br><span class="line">	vector &lt;StmAST *&gt;           StmList;</span><br><span class="line">	StmAST                      *Stmt;</span><br><span class="line">	vector &lt;DefAST *&gt;           DefList;</span><br><span class="line">	DefAST                      *Def;</span><br><span class="line">	vector &lt;VarDecAST *&gt;        DecList;</span><br><span class="line">	VarDecAST                   *Dec;</span><br><span class="line">	ExpAST                      *Exp;</span><br><span class="line">	vector &lt;ExpAST *&gt;           Args;       	       <span class="comment">//实参列表</span></span><br><span class="line">	CaseStmAST                  *Case;</span><br><span class="line">	vector &lt;CaseStmAST *&gt;       CaseList;</span><br><span class="line">&#125;YYLVAL;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> YYSTYPE YYLVAL</span></span><br></pre></td></tr></table></figure>
<h4 id="3-2-3-错误处理和恢复"><a href="#3-2-3-错误处理和恢复" class="headerlink" title="3.2.3 错误处理和恢复:"></a>3.2.3 <strong>错误处理和恢复</strong>:</h4><ul>
<li>语法分析器能够识别语法错误，并通过 yyerror 函数输出错误信息。</li>
<li>错误处理机制包括记录错误位置和错误信息，这对于开发者和用户调试程序至关重要。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdarg.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">yyerror</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* fmt, ...)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Errors::<span class="built_in">ErrorAdd</span>(yylloc.first_line,yylloc.first_column,fmt);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-2-4-语义值和位置跟踪"><a href="#3-2-4-语义值和位置跟踪" class="headerlink" title="3.2.4 语义值和位置跟踪:"></a>3.2.4 <strong>语义值和位置跟踪</strong>:</h4><ul>
<li>Bison 的 %locations 指令用于启用位置追踪，记录每个语法单元的行和列信息。</li>
<li>%type 指令用于定义非终结符的语义值类型，如 program、ExtDefList 等，这些类型对应于不同的AST节点。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  %type 定义非终结符的语义值类型</span></span><br><span class="line">%type  &lt;program&gt;    program</span><br><span class="line">%type  &lt;ExtDefList&gt; ExtDefList</span><br><span class="line">%type  &lt;ExtDef&gt;     ExtDef</span><br><span class="line">%type  &lt;ExtDecList&gt; ExtDecList</span><br><span class="line">%type  &lt;Specifier&gt;  Specifier</span><br><span class="line">%type  &lt;VarDec&gt;     VarDec</span><br><span class="line">%type  &lt;VarDec&gt;     ParamVarDec</span><br><span class="line">%type  &lt;CompSt&gt;     CompSt</span><br><span class="line">%type  &lt;ParamList&gt;  ParamList</span><br><span class="line">%type  &lt;ParamDec&gt;   ParamDec</span><br><span class="line">%type  &lt;DefList&gt;    DefList</span><br><span class="line">%type  &lt;StmList&gt;    StmList</span><br><span class="line">%type  &lt;Stmt&gt;       Stmt</span><br><span class="line">%type  &lt;Def&gt;        Def</span><br><span class="line">%type  &lt;DecList&gt;    DecList</span><br><span class="line">%type  &lt;Dec&gt;        Dec</span><br><span class="line">%type  &lt;Exp&gt;        Exp</span><br><span class="line">%type  &lt;Exp&gt;        Sub</span><br><span class="line">%type  &lt;Args&gt;       SubList</span><br><span class="line">%type  &lt;Case&gt;       Case;</span><br><span class="line">%type  &lt;CaseList&gt;   CaseList</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">%type  &lt;Args&gt;  Args</span><br></pre></td></tr></table></figure>
<h4 id="3-2-5-操作符优先级和结合性"><a href="#3-2-5-操作符优先级和结合性" class="headerlink" title="3.2.5 操作符优先级和结合性:"></a>3.2.5 <strong>操作符优先级和结合性</strong>:</h4><ul>
<li>%left、%right 和 %nonassoc 指令定义了操作符的优先级和结合性，这对于解析具有潜在歧义的表达式（如算术表达式）非常重要。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">%left COMMA</span><br><span class="line">%left ASSIGN</span><br><span class="line">%left OR</span><br><span class="line">%left AND</span><br><span class="line">%left LT LE GT GE</span><br><span class="line">%left NE EQ</span><br><span class="line">%left MOD</span><br><span class="line">%left PLUS MINUS</span><br><span class="line">%left STAR DIV</span><br><span class="line">%right UMINUS NOT DPLUS DMINUS UPLUS</span><br><span class="line">%left PLUSD MINUSD</span><br><span class="line">%left ARRPRO</span><br><span class="line"></span><br><span class="line">%nonassoc LOWER_THEN_ELSE</span><br><span class="line">%nonassoc ELSE</span><br></pre></td></tr></table></figure>
<h4 id="3-2-6-语法分析过程"><a href="#3-2-6-语法分析过程" class="headerlink" title="3.2.6 语法分析过程:"></a>3.2.6 <strong>语法分析过程</strong>:</h4><ul>
<li>yyparse 函数控制整个语法分析过程，从读取输入（源代码）开始，到最终的AST构建结束。</li>
<li>在解析过程中，语法分析器不断从词法分析器获取标记，并根据定义的产生式规则进行匹配和处理。</li>
</ul>
<h4 id="3-2-7-parser-ypp-源代码"><a href="#3-2-7-parser-ypp-源代码" class="headerlink" title="3.2.7 parser.ypp 源代码"></a>3.2.7 parser.ypp 源代码</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br></pre></td><td class="code"><pre><span class="line">%define parse.error verbose</span><br><span class="line">%locations</span><br><span class="line">%&#123;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;def.h&quot;</span></span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">int</span> ErrorCharNum;</span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">int</span> yylineno;</span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">char</span> *yytext;</span><br><span class="line"><span class="keyword">extern</span> FILE *yyin;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">yyerror</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* fmt, ...)</span></span>;</span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span> <span class="function"><span class="keyword">int</span> <span class="title">yylex</span><span class="params">()</span></span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SavePosition t-&gt;Line=yylloc.first_line;t-&gt;Column=yylloc.first_column</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">YYLVAL</span> &#123;</span></span><br><span class="line">       <span class="keyword">int</span>                  type_int;</span><br><span class="line">	<span class="keyword">float</span>                type_float;</span><br><span class="line">	<span class="keyword">char</span>                 type_id[<span class="number">32</span>];</span><br><span class="line"></span><br><span class="line">	ProgAST                     *program;</span><br><span class="line">	vector &lt;ExtDefAST *&gt;        ExtDefList;  	    <span class="comment">//外部定义（外部变量、函数）列表</span></span><br><span class="line">       ExtDefAST                   *ExtDef;</span><br><span class="line">       vector &lt;VarDecAST*&gt;         ExtDecList;        <span class="comment">//外部、局部变量列表</span></span><br><span class="line">       TypeAST                     *Specifier;</span><br><span class="line">       VarDecAST                   *VarDec;</span><br><span class="line">       CompStmAST                  *CompSt;</span><br><span class="line">	vector &lt;ParamAST *&gt;         ParamList;         <span class="comment">//形参列表</span></span><br><span class="line">	ParamAST                    *ParamDec;</span><br><span class="line"></span><br><span class="line">	vector &lt;StmAST *&gt;           StmList;</span><br><span class="line">	StmAST                      *Stmt;</span><br><span class="line">	vector &lt;DefAST *&gt;           DefList;</span><br><span class="line">	DefAST                      *Def;</span><br><span class="line">       vector &lt;VarDecAST *&gt;        DecList;</span><br><span class="line">       VarDecAST                   *Dec;</span><br><span class="line">       ExpAST                      *Exp;</span><br><span class="line">	vector &lt;ExpAST *&gt;           Args;       	       <span class="comment">//实参列表</span></span><br><span class="line">       CaseStmAST                  *Case;</span><br><span class="line">       vector &lt;CaseStmAST *&gt;       CaseList;</span><br><span class="line">&#125;YYLVAL;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> YYSTYPE YYLVAL</span></span><br><span class="line"></span><br><span class="line">%&#125;</span><br><span class="line"><span class="comment">//  %type 定义非终结符的语义值类型</span></span><br><span class="line">%type  &lt;program&gt;    program</span><br><span class="line">%type  &lt;ExtDefList&gt; ExtDefList</span><br><span class="line">%type  &lt;ExtDef&gt;     ExtDef</span><br><span class="line">%type  &lt;ExtDecList&gt; ExtDecList</span><br><span class="line">%type  &lt;Specifier&gt;  Specifier</span><br><span class="line">%type  &lt;VarDec&gt;     VarDec</span><br><span class="line">%type  &lt;VarDec&gt;     ParamVarDec</span><br><span class="line">%type  &lt;CompSt&gt;     CompSt</span><br><span class="line">%type  &lt;ParamList&gt;  ParamList</span><br><span class="line">%type  &lt;ParamDec&gt;   ParamDec</span><br><span class="line">%type  &lt;DefList&gt;    DefList</span><br><span class="line">%type  &lt;StmList&gt;    StmList</span><br><span class="line">%type  &lt;Stmt&gt;       Stmt</span><br><span class="line">%type  &lt;Def&gt;        Def</span><br><span class="line">%type  &lt;DecList&gt;    DecList</span><br><span class="line">%type  &lt;Dec&gt;        Dec</span><br><span class="line">%type  &lt;Exp&gt;        Exp</span><br><span class="line">%type  &lt;Exp&gt;        Sub</span><br><span class="line">%type  &lt;Args&gt;       SubList</span><br><span class="line">%type  &lt;Case&gt;       Case;</span><br><span class="line">%type  &lt;CaseList&gt;   CaseList</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">%type  &lt;Args&gt;  Args</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//% token 定义终结符的语义值类型</span></span><br><span class="line">%token &lt;type_int&gt; INT                   <span class="comment">/*指定INT常量的语义值是type_int，由词法分析得到的整数数值*/</span></span><br><span class="line">%token &lt;type_id&gt;  ID TYPE               <span class="comment">/*指定ID 的语义值是type_id，由词法分析得到的标识符字符串*/</span></span><br><span class="line">%token &lt;type_float&gt; FLOAT               <span class="comment">/*指定float常量的语义值是type_float*/</span></span><br><span class="line"></span><br><span class="line">%token DPLUS DMINUS PLUSD MINUSD LP RP LB RB LC RC SEMI COMMA     </span><br><span class="line"><span class="comment">/*用bison对该文件编译时，带参数-d，生成的exp.tab.h中给这些单词进行编码，可在lex.l中包含parser.tab.h使用这些单词种类码*/</span></span><br><span class="line">%token PLUS MINUS STAR DIV MOD GE GT LE LT NE EQ ASSIGN AND OR NOT IF ELSE WHILE RETURN FOR</span><br><span class="line">%token BREAK CONTINUE SWITCH CASE DEFAULT COLON</span><br><span class="line"></span><br><span class="line"><span class="comment">/*以下为接在上述token后依次编码的枚举常量，用于后续过程*/</span></span><br><span class="line">%token ARRPRO EXT_DEF_LIST EXT_VAR_DEF FUNC_DEF FUNC_DEC EXT_DEC_LIST PARAM_LIST PARAM_DEC VAR_DEF DEC_LIST DEF_LIST COMP_STM STM_LIST EXP_STMT IF_THEN IF_THEN_ELSE</span><br><span class="line">%token FUNC_CALL ARGS FUNCTION PARAM ARG CALL CALL0 LABEL GOTO JLT JLE JGT JGE JEQ JNE END ARRASSIGN ARRLOAD ARRDPLUS ARRDMINUS ARRPLUSD ARRMINUSD</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">%left COMMA</span><br><span class="line">%left ASSIGN</span><br><span class="line">%left OR</span><br><span class="line">%left AND</span><br><span class="line">%left LT LE GT GE</span><br><span class="line">%left NE EQ</span><br><span class="line">%left MOD</span><br><span class="line">%left PLUS MINUS</span><br><span class="line">%left STAR DIV</span><br><span class="line">%right UMINUS NOT DPLUS DMINUS UPLUS</span><br><span class="line">%left PLUSD MINUSD</span><br><span class="line">%left ARRPRO</span><br><span class="line"></span><br><span class="line">%nonassoc LOWER_THEN_ELSE</span><br><span class="line">%nonassoc ELSE</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">%%</span><br><span class="line"></span><br><span class="line">program: ExtDefList  &#123;$$=<span class="keyword">new</span> <span class="built_in">ProgAST</span>(); $$-&gt;ExtDefs=$<span class="number">1</span>;</span><br><span class="line">                      <span class="keyword">if</span> (Errors::<span class="built_in">IsEmpty</span>() &amp;&amp; ErrorCharNum==<span class="number">0</span>)</span><br><span class="line">                           &#123; $$-&gt;<span class="built_in">DisplayAST</span>(<span class="number">0</span>); &#125;         <span class="comment">//无词法、语法错误显示语法树</span></span><br><span class="line">                      <span class="keyword">else</span> &#123;Errors::<span class="built_in">ErrorsDisplay</span>();<span class="keyword">return</span> <span class="number">0</span>;&#125;</span><br><span class="line">                      $$-&gt;<span class="built_in">Semantics0</span>();                   <span class="comment">//静态语义检查</span></span><br><span class="line">                      <span class="keyword">if</span> (Errors::<span class="built_in">IsEmpty</span>())</span><br><span class="line">                          $$-&gt;<span class="built_in">GenIR</span>();                    <span class="comment">//中间代码生成</span></span><br><span class="line">                      <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">                      &#125;</span><br><span class="line">         ;</span><br><span class="line">ExtDefList: &#123;$$=vector &lt;ExtDefAST*&gt;();&#125;</span><br><span class="line">          | ExtDef ExtDefList &#123;$<span class="number">2.</span><span class="built_in">insert</span>($<span class="number">2.b</span>egin(),$<span class="number">1</span>);$$=$<span class="number">2</span>;&#125;     </span><br><span class="line"><span class="comment">//将ExtDef所指外部定义对象增加到（程序对象的）ExtDefList中</span></span><br><span class="line">          ;</span><br><span class="line"></span><br><span class="line">ExtDef:   Specifier ExtDecList SEMI   &#123; ExtVarDefAST *t=<span class="keyword">new</span> <span class="built_in">ExtVarDefAST</span>();     </span><br><span class="line">                                       <span class="comment">//创建一个外部变量声明的对象</span></span><br><span class="line">                                        t-&gt;Type=$<span class="number">1</span>; t-&gt;ExtVars=$<span class="number">2</span>; $$=t; SavePosition;&#125;</span><br><span class="line">         | Specifier ID LP ParamList RP CompSt &#123;FuncDefAST *t=<span class="keyword">new</span> <span class="built_in">FuncDefAST</span>();t-&gt;Type=$<span class="number">1</span>;t-&gt;Name=$<span class="number">2</span>;t-&gt;Params=$<span class="number">4</span>; t-&gt;Body=$<span class="number">6</span>;$$=t;SavePosition;&#125;<span class="comment">//对应一个函数定义对象</span></span><br><span class="line">         | Specifier ID LP ParamList RP SEMI   &#123;FuncDefAST *t=<span class="keyword">new</span> <span class="built_in">FuncDefAST</span>();t-&gt;Type=$<span class="number">1</span>;t-&gt;Name=$<span class="number">2</span>;t-&gt;Params=$<span class="number">4</span>;$$=t;SavePosition;&#125;<span class="comment">//对应一个函数声明对象，Body为空</span></span><br><span class="line">         ;</span><br><span class="line">Specifier: TYPE  &#123;  BasicTypeAST *t=<span class="keyword">new</span> <span class="built_in">BasicTypeAST</span>(); ;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="built_in">string</span>($<span class="number">1</span>)==<span class="built_in">string</span>(<span class="string">&quot;int&quot;</span>))    t-&gt;Type=T_INT;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="built_in">string</span>($<span class="number">1</span>)==<span class="built_in">string</span>(<span class="string">&quot;float&quot;</span>))  t-&gt;Type=T_FLOAT;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="built_in">string</span>($<span class="number">1</span>)==<span class="built_in">string</span>(<span class="string">&quot;void&quot;</span>))   t-&gt;Type=T_VOID;  $$=t;SavePosition;&#125;</span><br><span class="line">              ;</span><br><span class="line"></span><br><span class="line">ExtDecList:  VarDec  &#123;$$=vector &lt; VarDecAST*&gt;();$$.<span class="built_in">push_back</span>($<span class="number">1</span>);&#125;      </span><br><span class="line"><span class="comment">/*ExtDecList对应一个外部变量VarDec的序列,目前后续只考虑是标识符，可扩展为数组*/</span></span><br><span class="line">           | VarDec COMMA ExtDecList &#123;$<span class="number">3.</span><span class="built_in">insert</span>($<span class="number">3.b</span>egin(),$<span class="number">1</span>);$$=$<span class="number">3</span>;&#125;</span><br><span class="line">           ;</span><br><span class="line">VarDec:  ID   &#123;VarDecAST *t=<span class="keyword">new</span> <span class="built_in">VarDecAST</span>(); t-&gt;Name=<span class="built_in">string</span>($<span class="number">1</span>); $$=t; SavePosition;&#125;             <span class="comment">//变量对象，dims.size()为0表示简单变量，大于0表示数组</span></span><br><span class="line">          | VarDec LB INT RB   &#123;$<span class="number">1</span>-&gt;Dims.<span class="built_in">push_back</span>($<span class="number">3</span>);$$=$<span class="number">1</span>;&#125;</span><br><span class="line"><span class="comment">//将数组的每维大小添加到属性Dims中</span></span><br><span class="line">          ;</span><br><span class="line">ParamVarDec:ID   &#123;VarDecAST *t=<span class="keyword">new</span> <span class="built_in">VarDecAST</span>(); t-&gt;Name=<span class="built_in">string</span>($<span class="number">1</span>); $$=t; SavePosition;&#125;             <span class="comment">//变量对象，dims.size()为0表示简单变量，大于0表示数组</span></span><br><span class="line">          ;</span><br><span class="line"></span><br><span class="line">ParamList: &#123;$$=vector &lt; ParamAST *&gt;();&#125;</span><br><span class="line">        | ParamDec  &#123;$$=vector &lt; ParamAST *&gt;(); $$.<span class="built_in">push_back</span>($<span class="number">1</span>); &#125;    </span><br><span class="line">	<span class="comment">//初始化形式参数序列</span></span><br><span class="line">        | ParamList COMMA  ParamDec  &#123;$<span class="number">1.</span><span class="built_in">push_back</span>($<span class="number">3</span>); $$=$<span class="number">1</span>;&#125;        </span><br><span class="line">	<span class="comment">//添加一个形式参数</span></span><br><span class="line">        ;</span><br><span class="line">ParamDec: Specifier ParamVarDec   &#123;ParamAST* t=<span class="keyword">new</span> <span class="built_in">ParamAST</span>();t-&gt;Type=$<span class="number">1</span>;t-&gt;ParamName=$<span class="number">2</span>; $$=t; SavePosition;&#125;</span><br><span class="line">         ;</span><br><span class="line"></span><br><span class="line">CompSt: LC DefList StmList RC    &#123;CompStmAST *t=<span class="keyword">new</span> <span class="built_in">CompStmAST</span>();t-&gt;Decls=$<span class="number">2</span>;t-&gt;Stms=$<span class="number">3</span>;$$=t;SavePosition;&#125;</span><br><span class="line">       ;</span><br><span class="line">StmList: &#123;$$=vector &lt;StmAST *&gt;(); &#125;</span><br><span class="line">        | Stmt StmList  &#123;$$=$<span class="number">2</span>;$$.<span class="built_in">insert</span>($$.<span class="built_in">begin</span>(),$<span class="number">1</span>);&#125;</span><br><span class="line">        ;</span><br><span class="line">DefList: &#123;$$=vector &lt;DefAST *&gt;();  &#125;</span><br><span class="line">        | Def DefList &#123;$$=$<span class="number">2</span>;$$.<span class="built_in">insert</span>($$.<span class="built_in">begin</span>(),$<span class="number">1</span>);&#125;</span><br><span class="line">        ;</span><br><span class="line">Def:   Specifier DecList SEMI &#123;DefAST *t=<span class="keyword">new</span> <span class="built_in">DefAST</span>();t-&gt;Type=$<span class="number">1</span>;t-&gt;LocVars=$<span class="number">2</span>;$$=t;SavePosition;&#125;</span><br><span class="line">              ;</span><br><span class="line">DecList: Dec  &#123;$$=vector &lt;VarDecAST *&gt;(); $$.<span class="built_in">push_back</span>($<span class="number">1</span>);&#125;</span><br><span class="line">       | Dec COMMA DecList  &#123;$$=$<span class="number">3</span>;$$.<span class="built_in">insert</span>($$.<span class="built_in">begin</span>(),$<span class="number">1</span>);&#125;</span><br><span class="line">	   ;</span><br><span class="line">Dec:   VarDec  &#123;$$=$<span class="number">1</span>;&#125;                  </span><br><span class="line">	<span class="comment">//如何将多种形式的局部变量加上一个父类，简单，数组，初始化</span></span><br><span class="line">       | VarDec ASSIGN Exp  &#123;$$=$<span class="number">1</span>;$$-&gt;Exp=$<span class="number">3</span>; &#125;      </span><br><span class="line">	<span class="comment">//带初始化的变量定义</span></span><br><span class="line">      ;</span><br><span class="line"></span><br><span class="line">Case:   CASE Exp COLON StmList  &#123;CaseStmAST *t=<span class="keyword">new</span> <span class="built_in">CaseStmAST</span>(); t-&gt;Cond=$<span class="number">2</span>; t-&gt;Body=$<span class="number">4</span>; $$=t; SavePosition;&#125;</span><br><span class="line"></span><br><span class="line">CaseList:Case               &#123;$$=vector &lt;CaseStmAST *&gt;(); $$.<span class="built_in">push_back</span>($<span class="number">1</span>); &#125;</span><br><span class="line">       | Case CaseList      &#123;$$=$<span class="number">2</span>; $$.<span class="built_in">insert</span>($$.<span class="built_in">begin</span>(),$<span class="number">1</span>); &#125;</span><br><span class="line"></span><br><span class="line">Stmt:   Exp SEMI    		&#123;ExprStmAST *t=<span class="keyword">new</span> <span class="built_in">ExprStmAST</span>();t-&gt;Exp=$<span class="number">1</span>;$$=t;SavePosition;&#125;</span><br><span class="line">      | CompSt      		&#123;$$=$<span class="number">1</span>;&#125;      <span class="comment">//复合语句不再生成新的结点</span></span><br><span class="line">      | RETURN Exp SEMI   	&#123;ReturnStmAST *t=<span class="keyword">new</span> <span class="built_in">ReturnStmAST</span>();t-&gt;Exp=$<span class="number">2</span>;$$=t;SavePosition;&#125;</span><br><span class="line">      | RETURN SEMI   	&#123;ReturnStmAST *t=<span class="keyword">new</span> <span class="built_in">ReturnStmAST</span>();t-&gt;Exp=<span class="literal">NULL</span>;$$=t;SavePosition;&#125;</span><br><span class="line">      | IF LP Exp RP Stmt %prec LOWER_THEN_ELSE &#123;IfStmAST *t=<span class="keyword">new</span> <span class="built_in">IfStmAST</span>();t-&gt;Cond=$<span class="number">3</span>;t-&gt;ThenStm=$<span class="number">5</span>;$$=t; SavePosition;&#125;</span><br><span class="line">      | IF LP Exp RP Stmt ELSE Stmt   		    &#123;IfElseStmAST *t=<span class="keyword">new</span> <span class="built_in">IfElseStmAST</span>();t-&gt;Cond=$<span class="number">3</span>;t-&gt;ThenStm=$<span class="number">5</span>;t-&gt;ElseStm=$<span class="number">7</span>;$$=t;SavePosition;&#125;</span><br><span class="line">      | WHILE LP Exp RP Stmt 	&#123;WhileStmAST *t=<span class="keyword">new</span> <span class="built_in">WhileStmAST</span>();t-&gt;Cond=$<span class="number">3</span>;t-&gt;Body=$<span class="number">5</span>; $$=t; SavePosition; &#125;</span><br><span class="line">      | FOR LP Exp SEMI Exp SEMI Exp RP Stmt </span><br><span class="line">              &#123;ForStmAST *t=<span class="keyword">new</span> <span class="built_in">ForStmAST</span>(); t-&gt;SinExp=$<span class="number">3</span>; t-&gt;Cond=$<span class="number">5</span>; t-&gt;EndExp=$<span class="number">7</span>; t-&gt;Body=$<span class="number">9</span>; $$=t; SavePosition;&#125;</span><br><span class="line">      | SWITCH LP Exp RP LC CaseList RC   &#123;SwitchStmAST *t=<span class="keyword">new</span> <span class="built_in">SwitchStmAST</span>(); t-&gt;Exp=$<span class="number">3</span>; t-&gt;Cases=$<span class="number">6</span>; t-&gt;containDefault=<span class="number">0</span>; $$=t; SavePosition;&#125;</span><br><span class="line">      | SWITCH LP Exp RP LC CaseList DEFAULT COLON StmList RC</span><br><span class="line">              &#123;SwitchStmAST *t=<span class="keyword">new</span> <span class="built_in">SwitchStmAST</span>(); t-&gt;Exp=$<span class="number">3</span>; t-&gt;Cases=$<span class="number">6</span>; t-&gt;containDefault=<span class="number">1</span>; t-&gt;Default=$<span class="number">9</span>; $$=t; SavePosition;&#125;</span><br><span class="line">      | BREAK SEMI          &#123;BreakStmAST *t=<span class="keyword">new</span> <span class="built_in">BreakStmAST</span>(); $$=t; SavePosition; &#125;</span><br><span class="line">      | CONTINUE SEMI       &#123;ContinueStmAST *t=<span class="keyword">new</span> <span class="built_in">ContinueStmAST</span>(); $$=t; SavePosition; &#125;</span><br><span class="line">      | error SEMI   &#123;$$=<span class="literal">NULL</span>;&#125;</span><br><span class="line">      ;</span><br><span class="line"></span><br><span class="line">Exp:    Exp ASSIGN Exp &#123;AssignAST *t=<span class="keyword">new</span> <span class="built_in">AssignAST</span>();t-&gt;Op=ASSIGN;</span><br><span class="line">                t-&gt;LeftValExp=$<span class="number">1</span>;t-&gt;RightValExp=$<span class="number">3</span>;$$=t;SavePosition;&#125;</span><br><span class="line"></span><br><span class="line">      | Exp PLUS Exp &#123;BinaryExprAST *t=<span class="keyword">new</span> <span class="built_in">BinaryExprAST</span>();t-&gt;Op=PLUS;t-&gt;LeftExp=$<span class="number">1</span>;t-&gt;RightExp=$<span class="number">3</span>;$$=t;SavePosition;&#125;    <span class="comment">//算术运算符</span></span><br><span class="line">      | Exp MINUS Exp&#123;BinaryExprAST *t=<span class="keyword">new</span> <span class="built_in">BinaryExprAST</span>();t-&gt;Op=MINUS;t-&gt;LeftExp=$<span class="number">1</span>;t-&gt;RightExp=$<span class="number">3</span>;$$=t;SavePosition;&#125;</span><br><span class="line">      | Exp STAR Exp &#123;BinaryExprAST *t=<span class="keyword">new</span> <span class="built_in">BinaryExprAST</span>();t-&gt;Op=STAR;t-&gt;LeftExp=$<span class="number">1</span>;t-&gt;RightExp=$<span class="number">3</span>;$$=t;SavePosition;&#125;</span><br><span class="line">      | Exp DIV Exp  &#123;BinaryExprAST *t=<span class="keyword">new</span> <span class="built_in">BinaryExprAST</span>();t-&gt;Op=DIV;t-&gt;LeftExp=$<span class="number">1</span>;t-&gt;RightExp=$<span class="number">3</span>;$$=t;SavePosition;&#125;</span><br><span class="line">      | Exp MOD Exp  &#123;BinaryExprAST *t=<span class="keyword">new</span> <span class="built_in">BinaryExprAST</span>();t-&gt;Op=MOD;t-&gt;LeftExp=$<span class="number">1</span>;t-&gt;RightExp=$<span class="number">3</span>;$$=t;SavePosition;&#125;</span><br><span class="line">      | LP Exp RP    &#123;$$=$<span class="number">2</span>;&#125;</span><br><span class="line">      | MINUS Exp %prec UMINUS  &#123;UnaryExprAST *t=<span class="keyword">new</span> <span class="built_in">UnaryExprAST</span>();t-&gt;Op=UMINUS;t-&gt;Exp=$<span class="number">2</span>;$$=t;SavePosition;&#125;  <span class="comment">//单目减</span></span><br><span class="line">      | PLUS Exp %prec UPLUS    &#123;UnaryExprAST *t=<span class="keyword">new</span> <span class="built_in">UnaryExprAST</span>();t-&gt;Op=UPLUS;t-&gt;Exp=$<span class="number">2</span>;$$=t;SavePosition;&#125;   <span class="comment">//单目加</span></span><br><span class="line"></span><br><span class="line">      | Exp AND Exp   &#123;BinaryExprAST *t=<span class="keyword">new</span> <span class="built_in">BinaryExprAST</span>();t-&gt;Op=AND;t-&gt;LeftExp=$<span class="number">1</span>;t-&gt;RightExp=$<span class="number">3</span>;$$=t;SavePosition;&#125; <span class="comment">//逻辑运算符</span></span><br><span class="line">      | Exp OR Exp    &#123;BinaryExprAST *t=<span class="keyword">new</span> <span class="built_in">BinaryExprAST</span>();t-&gt;Op=OR;t-&gt;LeftExp=$<span class="number">1</span>;t-&gt;RightExp=$<span class="number">3</span>;$$=t;SavePosition;&#125;</span><br><span class="line">      | NOT Exp       &#123;UnaryExprAST *t=<span class="keyword">new</span> <span class="built_in">UnaryExprAST</span>();t-&gt;Op=NOT;t-&gt;Exp=$<span class="number">2</span>;$$=t;SavePosition;&#125;</span><br><span class="line"></span><br><span class="line">      | Exp GT Exp	&#123;BinaryExprAST *t=<span class="keyword">new</span> <span class="built_in">BinaryExprAST</span>();t-&gt;Op=GT;t-&gt;LeftExp=$<span class="number">1</span>;t-&gt;RightExp=$<span class="number">3</span>;$$=t;SavePosition;&#125;  <span class="comment">//关系运算符</span></span><br><span class="line">      | Exp GE Exp 	&#123;BinaryExprAST *t=<span class="keyword">new</span> <span class="built_in">BinaryExprAST</span>();t-&gt;Op=GE;t-&gt;LeftExp=$<span class="number">1</span>;t-&gt;RightExp=$<span class="number">3</span>;$$=t;SavePosition;&#125;</span><br><span class="line">      | Exp LT Exp 	&#123;BinaryExprAST *t=<span class="keyword">new</span> <span class="built_in">BinaryExprAST</span>();t-&gt;Op=LT;t-&gt;LeftExp=$<span class="number">1</span>;t-&gt;RightExp=$<span class="number">3</span>;$$=t;SavePosition;&#125;</span><br><span class="line">      | Exp LE Exp 	&#123;BinaryExprAST *t=<span class="keyword">new</span> <span class="built_in">BinaryExprAST</span>();t-&gt;Op=LE;t-&gt;LeftExp=$<span class="number">1</span>;t-&gt;RightExp=$<span class="number">3</span>;$$=t;SavePosition;&#125;</span><br><span class="line">      | Exp NE Exp 	&#123;BinaryExprAST *t=<span class="keyword">new</span> <span class="built_in">BinaryExprAST</span>();t-&gt;Op=NE;t-&gt;LeftExp=$<span class="number">1</span>;t-&gt;RightExp=$<span class="number">3</span>;$$=t;SavePosition;&#125;</span><br><span class="line">      | Exp EQ Exp 	&#123;BinaryExprAST *t=<span class="keyword">new</span> <span class="built_in">BinaryExprAST</span>();t-&gt;Op=EQ;t-&gt;LeftExp=$<span class="number">1</span>;t-&gt;RightExp=$<span class="number">3</span>;$$=t;SavePosition;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      | DPLUS  Exp      &#123;UnaryExprAST *t=<span class="keyword">new</span> <span class="built_in">UnaryExprAST</span>();t-&gt;Op=DPLUS;t-&gt;Exp=$<span class="number">2</span>;$$=t;SavePosition;&#125;    <span class="comment">//自增、自减运算符，可区分前后缀形式</span></span><br><span class="line">      | DMINUS  Exp     &#123;UnaryExprAST *t=<span class="keyword">new</span> <span class="built_in">UnaryExprAST</span>();t-&gt;Op=DMINUS;t-&gt;Exp=$<span class="number">2</span>;$$=t;SavePosition;&#125;   </span><br><span class="line">      | Exp DPLUS       &#123;UnaryExprAST *t=<span class="keyword">new</span> <span class="built_in">UnaryExprAST</span>();t-&gt;Op=PLUSD;t-&gt;Exp=$<span class="number">1</span>;$$=t;SavePosition;&#125;</span><br><span class="line">      | Exp DMINUS      &#123;UnaryExprAST *t=<span class="keyword">new</span> <span class="built_in">UnaryExprAST</span>();t-&gt;Op=MINUSD;t-&gt;Exp=$<span class="number">1</span>;$$=t;SavePosition;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      | ID LP Args RP %prec ARRPRO	&#123;FuncCallAST *t=<span class="keyword">new</span> <span class="built_in">FuncCallAST</span>();t-&gt;Name=$<span class="number">1</span>;t-&gt;Params=$<span class="number">3</span>;$$=t;SavePosition;&#125;</span><br><span class="line">      | ID            	&#123;VarAST *t=<span class="keyword">new</span> <span class="built_in">VarAST</span>();t-&gt;Name=$<span class="number">1</span>;$$=t;SavePosition;&#125;</span><br><span class="line">      | ID SubList          &#123;VarAST *t=<span class="keyword">new</span> <span class="built_in">VarAST</span>();t-&gt;Name=$<span class="number">1</span>;t-&gt;index=$<span class="number">2</span>;$$=t;SavePosition;&#125;</span><br><span class="line">      | INT           	&#123;ConstAST *t=<span class="keyword">new</span> <span class="built_in">ConstAST</span>();t-&gt;Type=T_INT;t-&gt;ConstVal.constINT=$<span class="number">1</span>;$$=t;SavePosition;&#125;</span><br><span class="line">      | FLOAT         	&#123;ConstAST *t=<span class="keyword">new</span> <span class="built_in">ConstAST</span>();t-&gt;Type=T_FLOAT;t-&gt;ConstVal.constFLOAT=$<span class="number">1</span>;$$=t;SavePosition;&#125;</span><br><span class="line">       ;</span><br><span class="line">Args:   &#123;&#125;</span><br><span class="line">       |  Exp &#123;$$=vector &lt;ExpAST *&gt;(); $$.<span class="built_in">push_back</span>($<span class="number">1</span>); &#125;</span><br><span class="line">       |  Args COMMA  Exp   &#123;$$=$<span class="number">1</span>;$$.<span class="built_in">push_back</span>($<span class="number">3</span>);&#125;</span><br><span class="line">       ;</span><br><span class="line"></span><br><span class="line">Sub:     LB Exp RB           &#123;$$=$<span class="number">2</span>; &#125;</span><br><span class="line"></span><br><span class="line">SubList: Sub                 &#123;$$=vector &lt;ExpAST *&gt;(); $$.<span class="built_in">push_back</span>($<span class="number">1</span>); &#125;</span><br><span class="line">       | SubList Sub         &#123;$$=$<span class="number">1</span>; $$.<span class="built_in">push_back</span>($<span class="number">2</span>);&#125;</span><br><span class="line"></span><br><span class="line">%%</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span>&#123;</span><br><span class="line">	yyin=<span class="built_in">fopen</span>(argv[<span class="number">1</span>],<span class="string">&quot;r&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (!yyin) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	yylineno=<span class="number">1</span>;</span><br><span class="line">	<span class="built_in">yyparse</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdarg.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">yyerror</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* fmt, ...)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Errors::<span class="built_in">ErrorAdd</span>(yylloc.first_line,yylloc.first_column,fmt);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="3-2-8-语法分析总结"><a href="#3-2-8-语法分析总结" class="headerlink" title="3.2.8 语法分析总结"></a>3.2.8 语法分析总结</h4><p>通过这种设计，”C minus” 语法分析器能够准确地解析源代码，构建出反映程序结构的AST。这不仅展现了编译原理中语法分析的关键技术，也反映了构建高效且准确语法分析器的实际挑战。该语法分析器的实现是理解编译器核心功能的重要部分，特别是在处理复杂的语法结构和确保编译器的健壮性方面。</p>
<h3 id="3-3-符号表管理"><a href="#3-3-符号表管理" class="headerlink" title="3.3 符号表管理"></a>3.3 符号表管理</h3><p>在编译过程中，符号表管理是一个关键环节，它负责存储和管理源程序中使用的标识符（如变量名、函数名）及其属性（如类型、作用域）。在 “C minus” 语言编译器中，符号表管理的实现具有以下特点：</p>
<h4 id="3-3-1-符号表结构"><a href="#3-3-1-符号表结构" class="headerlink" title="3.3.1 符号表结构:"></a>3.3.1 <strong>符号表结构</strong>:</h4><ul>
<li>符号表使用堆栈结构（SymbolStackDef 类）来管理不同作用域的符号表（SymbolsInAScope 类）。</li>
<li>符号表项（Symbol 类）包含基本属性，如标识符名称、类型、种类（变量、函数、形参、数组等）。</li>
<li>特定于变量的符号表项（VarSymbol 类）还包括别名、偏移量、是否全局以及数组维度信息。</li>
<li>函数符号表项（FuncSymbol 类）包含函数的活动记录大小、参数个数、参数列表指针等。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SymbolStackDef</span> &#123;</span></span><br><span class="line">    <span class="comment">//符号表类定义,栈结构栈底为全局变量和函数定义，每个复合语句对应一张局部符号表</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;SymbolsInAScope *&gt; Symbols;</span><br><span class="line">    <span class="comment">//在当前作用域中查找该符号是否有定义</span></span><br><span class="line">    <span class="function">Symbol *<span class="title">LocateNameCurrent</span><span class="params">(<span class="keyword">const</span> string&amp; Name)</span></span>;</span><br><span class="line">    <span class="comment">//由内向外，在全部作用域中查找该符号是否有定义</span></span><br><span class="line">    <span class="function">Symbol *<span class="title">LocateNameGlobal</span><span class="params">(<span class="keyword">const</span> string&amp; Name)</span></span>; </span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="3-3-2-符号表操作"><a href="#3-3-2-符号表操作" class="headerlink" title="3.3.2 符号表操作:"></a>3.3.2 <strong>符号表操作</strong>:</h4><ul>
<li>符号表支持在当前作用域和全局作用域中查找标识符，以及将新的标识符加入符号表。</li>
<li>通过 LocateNameCurrent 和 LocateNameGlobal 函数实现标识符的查找。</li>
<li>新的符号表项在语义分析过程中创建并添加到符号表中。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Symbol *<span class="title">SymbolStackDef::LocateNameCurrent</span><span class="params">(<span class="keyword">const</span> string&amp; Name)</span>  <span class="comment">//在当前(最内层)作用域中查找该符号是否有定义</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    SymbolsInAScope *curScope = Symbols.<span class="built_in">back</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp; Symbol : curScope-&gt;Symbols)</span><br><span class="line">        <span class="keyword">if</span> (Symbol-&gt;Name == Name)</span><br><span class="line">            <span class="keyword">return</span> Symbol;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Symbol *<span class="title">SymbolStackDef::LocateNameGlobal</span><span class="params">(<span class="keyword">const</span> string&amp; Name)</span><span class="comment">//由内向外，整个符号表中查找该符号是否有定义</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = Symbols.<span class="built_in">size</span>() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> &amp; Symbol : Symbols.<span class="built_in">at</span>(i)-&gt;Symbols)</span><br><span class="line">            <span class="keyword">if</span> (Symbol-&gt;Name == Name)</span><br><span class="line">                <span class="keyword">return</span> Symbol;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-3-3-符号表的展示"><a href="#3-3-3-符号表的展示" class="headerlink" title="3.3.3 符号表的展示:"></a>3.3.3 <strong>符号表的展示</strong>:</h4><ul>
<li>提供了 DisplaySymbolTable 函数来打印符号表的当前状态，这对于编译过程的调试非常有用。</li>
<li>该函数显示每个作用域的符号，包括名称、别名、类型、类别和其他相关信息。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DisplaySymbolTable</span><span class="params">(SymbolStackDef *SYM)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> i = <span class="number">0</span>; i &lt; SYM-&gt;Symbols.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;----------------------------------------------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot; 层号: &quot;</span> &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot; 符 号 名           别名    类型    种 类   其它信息&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;----------------------------------------------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">if</span> (SYM-&gt;Symbols.<span class="built_in">at</span>(i)-&gt;Symbols.<span class="built_in">empty</span>())</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;  空 表&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">auto</span> SymPtr : SYM-&gt;Symbols.<span class="built_in">at</span>(i)-&gt;Symbols) &#123;</span><br><span class="line">                <span class="comment">//取第i层第j个符号对象的指针</span></span><br><span class="line">                cout.<span class="built_in">width</span>(<span class="number">20</span>);</span><br><span class="line">                cout &lt;&lt; SymPtr-&gt;Name;</span><br><span class="line">                cout.<span class="built_in">width</span>(<span class="number">8</span>);</span><br><span class="line">                <span class="keyword">if</span> (SymPtr-&gt;Kind == <span class="string">&#x27;V&#x27;</span> || SymPtr-&gt;Kind == <span class="string">&#x27;A&#x27;</span> || SymPtr-&gt;Kind == <span class="string">&#x27;P&#x27;</span>)   <span class="comment">//符号是变量,形参,显示别名</span></span><br><span class="line">                    cout &lt;&lt; ((VarSymbol *) SymPtr)-&gt;Alias;</span><br><span class="line">                <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">                cout.<span class="built_in">width</span>(<span class="number">8</span>);</span><br><span class="line">                cout &lt;&lt; SymbolMap[SymPtr-&gt;Type];</span><br><span class="line">                cout.<span class="built_in">width</span>(<span class="number">8</span>);</span><br><span class="line">                cout &lt;&lt; KindName[SymPtr-&gt;Kind];</span><br><span class="line">                <span class="keyword">if</span> (SymPtr-&gt;Kind == <span class="string">&#x27;V&#x27;</span> || SymPtr-&gt;Kind == <span class="string">&#x27;P&#x27;</span>)   <span class="comment">//符号是变量,形参</span></span><br><span class="line">                    cout &lt;&lt; <span class="string">&quot;偏移量: &quot;</span> &lt;&lt; ((VarSymbol *) SymPtr)-&gt;Offset &lt;&lt; <span class="string">&quot;  全局: &quot;</span></span><br><span class="line">                         &lt;&lt; ((VarSymbol *) SymPtr)-&gt;isGolbal;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (SymPtr-&gt;Kind == <span class="string">&#x27;F&#x27;</span>)  <span class="comment">//符号是函数</span></span><br><span class="line">                &#123;</span><br><span class="line">                    cout &lt;&lt; <span class="string">&quot;形参数: &quot;</span> &lt;&lt; ((FuncSymbol *) SymPtr)-&gt;ParamNum;</span><br><span class="line">                    cout &lt;&lt; <span class="string">&quot;  变量空间: &quot;</span> &lt;&lt; ((FuncSymbol *) SymPtr)-&gt;ARSize;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (SymPtr-&gt;Kind == <span class="string">&#x27;A&#x27;</span>) <span class="comment">//符号是数组，需要显示各维大小</span></span><br><span class="line">                &#123;</span><br><span class="line">                    cout &lt;&lt; <span class="string">&quot;偏移量: &quot;</span> &lt;&lt; ((VarSymbol *) SymPtr)-&gt;Offset &lt;&lt; <span class="string">&quot;  全局: &quot;</span></span><br><span class="line">                         &lt;&lt; ((VarSymbol *) SymPtr)-&gt;isGolbal &lt;&lt; <span class="string">&quot;  &quot;</span>;</span><br><span class="line">                    cout &lt;&lt; ((VarSymbol *) SymPtr)-&gt;Dims.<span class="built_in">size</span>() &lt;&lt; <span class="string">&quot;维：&quot;</span>;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> Dim : ((VarSymbol *) SymPtr)-&gt;Dims)</span><br><span class="line">                        cout &lt;&lt; Dim &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                cout &lt;&lt; endl;</span><br><span class="line">            &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;----------------------------------------------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-3-4-函数调用表"><a href="#3-3-4-函数调用表" class="headerlink" title="3.3.4 函数调用表:"></a>3.3.4 <strong>函数调用表</strong>:</h4><ul>
<li>编译器还维护了一个函数调用表（FunctionCallTable 类），用于记录函数调用的信息，包括行号、列号和函数名。这对于检查未定义函数的调用和处理函数调用的语义分析非常重要。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FunctionCallTable</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector &lt;FunctionCall&gt; FuncCalls;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addFuncCalls</span><span class="params">(<span class="keyword">int</span> Line, <span class="keyword">int</span> Column, string Name)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteFuncCalls</span><span class="params">(string Name)</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="3-3-5-错误处理"><a href="#3-3-5-错误处理" class="headerlink" title="3.3.5 错误处理:"></a>3.3.5 <strong>错误处理</strong>:</h4><p>编译器使用符号表进行静态语义检查，例如检查变量和函数的重复声明、类型匹配等。通过符号表，编译器可以判断标识符是否已在当前作用域中定义，从而捕获重复定义等错误。通过 Errors 类记录和显示编译过程中发现的错误，例如变量重复定义、类型不匹配等。错误信息包括错误的位置（行和列）和描述性消息。详情请见3.5节。</p>
<h4 id="3-3-6-符号表总结"><a href="#3-3-6-符号表总结" class="headerlink" title="3.3.6 符号表总结"></a>3.3.6 符号表总结</h4><p>在 “C minus” 编译器中，符号表的管理是实现编译器功能的关键部分。它不仅支持编译器的静态语义分析，还为代码生成阶段提供必要的信息。符号表的设计和实现体现了编译器设计中对于数据结构和算法的精细考虑，确保了编译器的准确性和高效性。</p>
<h3 id="3-4-语义检查"><a href="#3-4-语义检查" class="headerlink" title="3.4 语义检查"></a>3.4 语义检查</h3><p>在 “C minus” 编译器中，语义检查是编译过程的一个重要环节，它负责确保源代码中的各种构造在语义上是合法和一致的。以下是对该编译器中语义检查实现的详细分析：</p>
<h4 id="3-4-1-基本原理和目的"><a href="#3-4-1-基本原理和目的" class="headerlink" title="3.4.1 基本原理和目的:"></a>3.4.1 <strong>基本原理和目的</strong>:</h4><ul>
<li>语义检查的主要目的是验证源程序的语义正确性，包括标识符的声明与使用、类型的一致性、表达式的有效性等。</li>
<li>通过在解析源代码的同时进行语义分析，编译器能够及时发现并报告语义错误。</li>
</ul>
<h4 id="3-4-2-错误检测与报告"><a href="#3-4-2-错误检测与报告" class="headerlink" title="3.4.2 错误检测与报告:"></a>3.4.2 <strong>错误检测与报告</strong>:</h4><ul>
<li>通过 Errors::ErrorAdd 方法，编译器在检测到语义错误时记录错误信息，包括错误的位置（行号和列号）和描述。</li>
<li>Errors::ErrorsDisplay 方法用于输出所有收集的错误信息，为用户提供问题的具体位置和原因。</li>
</ul>
<h4 id="3-4-3-符号表的应用"><a href="#3-4-3-符号表的应用" class="headerlink" title="3.4.3 符号表的应用:"></a>3.4.3 <strong>符号表的应用</strong>:</h4><ul>
<li>在语义分析过程中，编译器依赖于符号表来验证标识符的声明和作用域。</li>
<li>例如，通过符号表，编译器检查变量是否在使用前已经声明，函数调用是否符合函数定义等。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> Offset = <span class="number">12</span>;            <span class="comment">//局部变量偏移量初始化,预留12个字节存放返回地址等信息，可根据实际情况修改</span></span><br><span class="line">MaxVarSize = <span class="number">12</span>;            <span class="comment">//计算函数变量需要的最大容量</span></span><br><span class="line">FuncDefPtr = ((FuncSymbol *) SymbolStack.<span class="built_in">LocateNameCurrent</span>(Name));</span><br><span class="line"><span class="keyword">if</span> (((BasicTypeAST *) Type)-&gt;Type != FuncDefPtr-&gt;Type)</span><br><span class="line">    Errors::<span class="built_in">ErrorAdd</span>(Line, Column, <span class="string">&quot;函数声明和定义的返回类型不同&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (FuncDefPtr-&gt;ParamNum != Params.<span class="built_in">size</span>())</span><br><span class="line">    Errors::<span class="built_in">ErrorAdd</span>(Line, Column, <span class="string">&quot;函数声明和定义的参数数目不同&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">auto</span> *Local = <span class="keyword">new</span> <span class="built_in">SymbolsInAScope</span>();  <span class="comment">//生成函数体作用域变量表</span></span><br><span class="line">FuncDefPtr-&gt;ParamPtr = Local;                    <span class="comment">//函数符号表项，指向形参</span></span><br><span class="line">SymbolStack.Symbols.<span class="built_in">push_back</span>(Local);          <span class="comment">//函数体符号表（含形参）进栈</span></span><br><span class="line"><span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> a: Params) &#123;</span><br><span class="line">    a-&gt;<span class="built_in">Semantics</span>(Offset);               <span class="comment">//未考虑参数用寄存器，只是简单在AR中分配单元</span></span><br><span class="line">    <span class="keyword">auto</span> *param = (ParamAST *) ((FuncDefPtr-&gt;Params).<span class="built_in">at</span>(i++));</span><br><span class="line">    <span class="keyword">if</span> (((BasicTypeAST *) (param-&gt;Type))-&gt;Type != ((BasicTypeAST *) (a-&gt;Type))-&gt;Type) &#123;</span><br><span class="line">        Errors::<span class="built_in">ErrorAdd</span>(Line, Column, <span class="string">&quot;函数声明和定义的形参类型不一致 &quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Body-&gt;LocalSymbolTable = Local;</span><br></pre></td></tr></table></figure>
<h4 id="3-4-4-类型检查"><a href="#3-4-4-类型检查" class="headerlink" title="3.4.4 类型检查:"></a>3.4.4 <strong>类型检查</strong>:</h4><ul>
<li>编译器执行类型检查以确保变量赋值、表达式计算和函数参数传递的类型一致性。</li>
<li>例如，对于二元运算符，编译器检查两个操作数的类型，并确定结果的类型。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AssignAST::Semantics</span><span class="params">(<span class="keyword">int</span> &amp;Offset)</span> </span>&#123;</span><br><span class="line">    LeftValExp-&gt;<span class="built_in">Semantics</span>(Offset);</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">IsLeftValue</span>(LeftValExp))</span><br><span class="line">        Errors::<span class="built_in">ErrorAdd</span>(Line, Column, <span class="string">&quot;非左值表达式赋值&quot;</span>);</span><br><span class="line">    RightValExp-&gt;<span class="built_in">Semantics</span>(Offset);</span><br><span class="line">    <span class="keyword">if</span> (LeftValExp-&gt;Type == T_VOID || RightValExp-&gt;Type == T_VOID)</span><br><span class="line">        Errors::<span class="built_in">ErrorAdd</span>(Line, Column, <span class="string">&quot;弱类型语言里void类型也不允许赋值&quot;</span>);</span><br><span class="line">    Type = LeftValExp-&gt;Type;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-4-5-函数调用处理"><a href="#3-4-5-函数调用处理" class="headerlink" title="3.4.5 函数调用处理:"></a>3.4.5 <strong>函数调用处理</strong>:</h4><ul>
<li>函数调用时，编译器验证函数是否已声明或定义，并检查实参和形参的数量及类型是否匹配。</li>
<li>未定义函数的调用会被记录并报告。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">FuncCallAST::Semantics</span><span class="params">(<span class="keyword">int</span> &amp;Offset)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (FuncRef = (FuncSymbol *) SymbolStack.<span class="built_in">LocateNameGlobal</span>(Name)) &#123;</span><br><span class="line">        <span class="keyword">if</span> (FuncRef-&gt;Kind != <span class="string">&#x27;F&#x27;</span>)</span><br><span class="line">            Errors::<span class="built_in">ErrorAdd</span>(Line, Column, <span class="string">&quot;对非函数名采用函数调用形式 &quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (FuncRef-&gt;ParamNum != Params.<span class="built_in">size</span>())</span><br><span class="line">            Errors::<span class="built_in">ErrorAdd</span>(Line, Column, <span class="string">&quot;实参表达式个数和形参不一致 &quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">            Type = FuncRef-&gt;Type;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">auto</span> a: Params) &#123;</span><br><span class="line">                <span class="comment">//未考虑参数用寄存器，只是简单在AR中分配单元</span></span><br><span class="line">                a-&gt;<span class="built_in">Semantics</span>(Offset);               </span><br><span class="line">                <span class="keyword">if</span> (Name != <span class="string">&quot;write&quot;</span>) &#123;</span><br><span class="line">                    <span class="keyword">auto</span> *param = (ParamAST *) ((FuncRef-&gt;Params).<span class="built_in">at</span>(i++));</span><br><span class="line">                    <span class="keyword">if</span> (((BasicTypeAST *) (param-&gt;Type))-&gt;Type != a-&gt;Type) &#123;</span><br><span class="line">                        Errors::<span class="built_in">ErrorAdd</span>(Line, Column, <span class="string">&quot;实参表达式类型和形参不一致 &quot;</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (FuncRef-&gt;Declaration == <span class="number">1</span>)</span><br><span class="line">                functionCallTable.<span class="built_in">addFuncCalls</span>(Line, Column, Name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> Errors::<span class="built_in">ErrorAdd</span>(Line, Column, <span class="string">&quot;引用未定义的函数 &quot;</span> + Name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="3-4-6-左值和常量检查"><a href="#3-4-6-左值和常量检查" class="headerlink" title="3.4.6 左值和常量检查:"></a>3.4.6 <strong>左值和常量检查</strong>:</h4><ul>
<li>对于赋值表达式和自增自减运算，编译器检查左侧表达式是否为有效的左值。</li>
<li>对于 case 语句中的条件，编译器检查是否为常量。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UnaryExprAST::Semantics</span><span class="params">(<span class="keyword">int</span> &amp;Offset)</span> </span>&#123;</span><br><span class="line">    Exp-&gt;<span class="built_in">Semantics</span>(Offset);</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">IsLeftValue</span>(Exp) &amp;&amp; (Op != UPLUS &amp;&amp; Op != UMINUS &amp;&amp; Op != NOT))</span><br><span class="line">        Errors::<span class="built_in">ErrorAdd</span>(Line, Column, <span class="string">&quot;非左值表达式自增、自减&quot;</span>);</span><br><span class="line">    Type = Exp-&gt;Type;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-4-7-循环和分支语句验证"><a href="#3-4-7-循环和分支语句验证" class="headerlink" title="3.4.7 循环和分支语句验证:"></a>3.4.7 <strong>循环和分支语句验证</strong>:</h4><ul>
<li>对于循环（如 while、for）和条件分支（如 if）语句，编译器检查条件表达式的有效性。</li>
<li>对于 break 和 continue 语句，编译器验证它们是否在循环或 switch 语句的合法范围内使用。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">BreakStmAST::Semantics</span><span class="params">(<span class="keyword">int</span> &amp;Offset, <span class="keyword">int</span> canBreak, <span class="keyword">int</span> canContinue, <span class="keyword">int</span> &amp;isReturn, BasicTypes returnType)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (canBreak == <span class="number">0</span>)</span><br><span class="line">        Errors::<span class="built_in">ErrorAdd</span>(Line, Column, <span class="string">&quot;break语句不在循环语句或switch语句中&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ContinueStmAST::Semantics</span><span class="params">(<span class="keyword">int</span> &amp;Offset, <span class="keyword">int</span> canBreak, <span class="keyword">int</span> canContinue, <span class="keyword">int</span> &amp;isReturn, BasicTypes returnType)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (canContinue == <span class="number">0</span>)</span><br><span class="line">        Errors::<span class="built_in">ErrorAdd</span>(Line, Column, <span class="string">&quot;continue语句不在循环语句中&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="3-4-8-返回语句检查"><a href="#3-4-8-返回语句检查" class="headerlink" title="3.4.8 返回语句检查:"></a>3.4.8 <strong>返回语句检查</strong>:</h4><ul>
<li>对于函数定义，编译器检查是否有符合函数返回类型的 return 语句。</li>
<li>对于无返回值（void 类型）的函数，编译器验证是否避免了返回值。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ReturnStmAST::Semantics</span><span class="params">(<span class="keyword">int</span> &amp;Offset, <span class="keyword">int</span> canBreak, <span class="keyword">int</span> canContinue, <span class="keyword">int</span> &amp;isReturn, BasicTypes returnType)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (Exp) Exp-&gt;<span class="built_in">Semantics</span>(Offset);</span><br><span class="line">    <span class="keyword">if</span> ((returnType == T_VOID &amp;&amp; Exp) || (returnType != T_VOID &amp;&amp; !Exp) ||</span><br><span class="line">        (returnType != T_VOID &amp;&amp; Exp &amp;&amp; returnType != Exp-&gt;Type))</span><br><span class="line">        Errors::<span class="built_in">ErrorAdd</span>(Line, Column, <span class="string">&quot;函数返回值类型与函数定义的返回值类型不匹配&quot;</span>);</span><br><span class="line">    isReturn = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-4-9-语义检查总结"><a href="#3-4-9-语义检查总结" class="headerlink" title="3.4.9 语义检查总结"></a>3.4.9 语义检查总结</h4><p>通过上述语义检查机制，”C minus” 编译器能够确保源代码在语义上的正确性和一致性。这些检查不仅提高了编译器的可靠性，还有助于程序员及早发现和修正代码中的错误。语义检查的实现展示了编译器如何将语法分析与深入的语义验证结合起来，体现了编译器设计中对程序语言理论和实现技术的综合运用。</p>
<h3 id="3-5-报错功能"><a href="#3-5-报错功能" class="headerlink" title="3.5 报错功能"></a>3.5 报错功能</h3><p>在 “C minus” 编译器中，报错功能是确保编译过程可靠性和用户友好性的关键组成部分。这一功能涉及检测、记录和报告编译过程中遇到的各类错误。以下是对该编译器中报错功能的详细分析：</p>
<h4 id="3-5-1-错误检测机制"><a href="#3-5-1-错误检测机制" class="headerlink" title="3.5.1 错误检测机制:"></a>3.5.1 <strong>错误检测机制</strong>:</h4><ul>
<li>编译器在各个阶段（词法分析、语法分析、语义分析等）实施错误检测。</li>
<li>错误类型包括语法错误、语义错误（如类型不匹配、未声明的标识符使用）、运行时错误等。</li>
</ul>
<h4 id="3-5-2-错误信息记录"><a href="#3-5-2-错误信息记录" class="headerlink" title="3.5.2 错误信息记录:"></a>3.5.2 <strong>错误信息记录</strong>:</h4><ul>
<li>错误信息通过 Errors 类的静态成员 Errs 进行集中管理。</li>
<li>ErrorAdd 函数用于在检测到错误时向 Errs 中添加错误记录，包括错误发生的行号、列号和错误消息。</li>
</ul>
<h4 id="3-5-3-错误报告"><a href="#3-5-3-错误报告" class="headerlink" title="3.5.3 错误报告:"></a>3.5.3 <strong>错误报告</strong>:</h4><ul>
<li>ErrorsDisplay 函数负责遍历 Errs 并打印所有收集的错误信息。</li>
<li>错误报告提供了详细的位置信息和描述性消息，帮助用户定位和理解错误的原因。</li>
</ul>
<h4 id="3-5-4-错误上下文和定位"><a href="#3-5-4-错误上下文和定位" class="headerlink" title="3.5.4 错误上下文和定位:"></a>3.5.4 <strong>错误上下文和定位</strong>:</h4><ul>
<li>编译器利用 Bison 的位置跟踪功能和 Flex 的行号跟踪功能来精确地定位错误发生的位置。</li>
<li>yyerror 函数被设计用于输出语法错误信息，它使用 Bison 生成的位置信息来指示错误位置。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdarg.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">yyerror</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* fmt, ...)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Errors::<span class="built_in">ErrorAdd</span>(yylloc.first_line,yylloc.first_column,fmt);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="3-5-5-用户友好的错误信息"><a href="#3-5-5-用户友好的错误信息" class="headerlink" title="3.5.5 用户友好的错误信息:"></a>3.5.5 <strong>用户友好的错误信息</strong>:</h4><ul>
<li>错误消息被设计为用户友好和描述性强，使非专业用户也能理解错误的本质。</li>
<li>例如，“未声明的标识符”、“类型不匹配”等错误信息直接指向问题的实质，便于用户快速定位问题。</li>
</ul>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">第5行、第9列处错误: 变量 a 重复定义</span></span><br><span class="line"><span class="section">第7行、第7列处错误: 引用未定义的符号 c</span></span><br><span class="line"><span class="section">第8行、第8列处错误: 对非函数名采用函数调用形式 </span></span><br><span class="line"><span class="section">第9行、第9列处错误: 对函数名采用非函数调用形式访问 </span></span><br><span class="line"><span class="section">第10行、第11列处错误: 引用未定义的函数 test</span></span><br><span class="line"><span class="section">第11行、第11列处错误: 实参表达式个数和形参不一致 </span></span><br><span class="line"><span class="section">第12行、第10列处错误: break语句不在循环语句或switch语句中</span></span><br><span class="line"><span class="section">第13行、第13列处错误: continue语句不在循环语句中</span></span><br><span class="line"><span class="section">第19行、第5列处错误: case中不是常量</span></span><br><span class="line"><span class="section">第23行、第5列处错误: switch语句的key值相等</span></span><br><span class="line"><span class="section">第23行、第5列处错误: switch语句的key值相等</span></span><br><span class="line"><span class="section">第31行、第1列处错误: 函数声明和定义的参数数目不同</span></span><br><span class="line"><span class="section">第30行、第22列处错误: 实参表达式个数和形参不一致 </span></span><br><span class="line"><span class="section">第30行、第34列处错误: 实参表达式个数和形参不一致 </span></span><br><span class="line"><span class="section">第30行、第35列处错误: 函数返回值类型与函数定义的返回值类型不匹配</span></span><br><span class="line"><span class="section">第24行、第11列处错误: 调用的函数未定义</span></span><br></pre></td></tr></table></figure>
<h4 id="3-5-6-报错功能总结"><a href="#3-5-6-报错功能总结" class="headerlink" title="3.5.6 报错功能总结"></a>3.5.6 报错功能总结</h4><p>通过以上的报错功能实现，”C minus” 编译器在有效地检测和报告错误的同时，也提供了对用户友好的错误信息。这种设计不仅提高了编译器的鲁棒性，也提升了用户的编码体验，使得调试过程更加高效和直观。报错功能的实现展示了编译器设计中对于用户交互和体验的关注，是编译器可用性的重要体现。</p>
<h3 id="3-6-中间代码生成"><a href="#3-6-中间代码生成" class="headerlink" title="3.6 中间代码生成"></a>3.6 中间代码生成</h3><p>“C minus” 编译器中的中间代码生成阶段是编译过程的关键部分，它将源程序的抽象语法树（AST）转换为中间表示形式。这一阶段的目标是生成与平台无关的中间代码，为后续的目标代码生成做准备。以下是对该编译器中中间代码生成功能的详细分析：</p>
<h4 id="3-6-1-基本原理"><a href="#3-6-1-基本原理" class="headerlink" title="3.6.1 基本原理:"></a>3.6.1 <strong>基本原理</strong>:</h4><ul>
<li>中间代码生成阶段遍历抽象语法树，为每个节点生成相应的中间代码。</li>
<li>使用四元式（IRCode 类）作为中间表示，每个四元式包含操作符、操作数和结果。</li>
</ul>
<h4 id="3-6-2-临时变量和标签生成"><a href="#3-6-2-临时变量和标签生成" class="headerlink" title="3.6.2 临时变量和标签生成:"></a>3.6.2 <strong>临时变量和标签生成</strong>:</h4><ul>
<li>通过 NewTemp 和 NewLabel 函数动态生成临时变量和标签名称，以支持复杂表达式和控制结构的处理。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">string <span class="title">NewTemp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Temp_&quot;</span> + <span class="built_in">to_string</span>(++num);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">string <span class="title">NewLabel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Label_&quot;</span> + <span class="built_in">to_string</span>(++num);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-6-3-中间代码的类型"><a href="#3-6-3-中间代码的类型" class="headerlink" title="3.6.3 中间代码的类型:"></a>3.6.3 <strong>中间代码的类型</strong>:</h4><ul>
<li>中间代码包括各种操作符，如赋值（ASSIGN）、算术运算（PLUS、MINUS、STAR、DIV等）、跳转（GOTO）、条件分支（JLE、JLT、JGE等）。</li>
<li>特殊的中间代码表示函数调用（CALL）、参数传递（PARAM、ARG）、返回指令（RETURN）。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">map&lt;<span class="keyword">int</span>, string&gt; Instruction = &#123;&#123;LABEL,     <span class="string">&quot;LABEL &quot;</span>&#125;,</span><br><span class="line">                                &#123;FUNCTION,  <span class="string">&quot;FUNCTION  &quot;</span>&#125;,</span><br><span class="line">                                &#123;ASSIGN,    <span class="string">&quot;:=&quot;</span>&#125;,</span><br><span class="line">                                &#123;PLUS,      <span class="string">&quot;+&quot;</span>&#125;,</span><br><span class="line">                                &#123;UPLUS,     <span class="string">&quot;+&quot;</span>&#125;,</span><br><span class="line">                                &#123;MINUS,     <span class="string">&quot;-&quot;</span>&#125;,</span><br><span class="line">                                &#123;UMINUS,    <span class="string">&quot;-&quot;</span>&#125;,</span><br><span class="line">                                &#123;NOT,       <span class="string">&quot;!&quot;</span>&#125;,</span><br><span class="line">                                &#123;DPLUS,     <span class="string">&quot;++&quot;</span>&#125;,</span><br><span class="line">                                &#123;DMINUS,    <span class="string">&quot;--&quot;</span>&#125;,</span><br><span class="line">                                &#123;PLUSD,     <span class="string">&quot;++&quot;</span>&#125;,</span><br><span class="line">                                &#123;MINUSD,    <span class="string">&quot;--&quot;</span>&#125;,</span><br><span class="line">                                &#123;STAR,      <span class="string">&quot;*&quot;</span>&#125;,</span><br><span class="line">                                &#123;DIV,       <span class="string">&quot;/&quot;</span>&#125;,</span><br><span class="line">                                &#123;GOTO,      <span class="string">&quot;  GOTO  &quot;</span>&#125;,</span><br><span class="line">                                &#123;ARRDPLUS,  <span class="string">&quot;++&quot;</span>&#125;,</span><br><span class="line">                                &#123;ARRDMINUS, <span class="string">&quot;--&quot;</span>&#125;,</span><br><span class="line">                                &#123;ARRPLUSD,  <span class="string">&quot;++&quot;</span>&#125;,</span><br><span class="line">                                &#123;ARRMINUSD, <span class="string">&quot;--&quot;</span>&#125;,</span><br><span class="line">                                &#123;GT,        <span class="string">&quot;&gt;&quot;</span>&#125;,</span><br><span class="line">                                &#123;GE,        <span class="string">&quot;&gt;=&quot;</span>&#125;,</span><br><span class="line">                                &#123;LT,        <span class="string">&quot;&lt;&quot;</span>&#125;,</span><br><span class="line">                                &#123;LE,        <span class="string">&quot;&lt;=&quot;</span>&#125;,</span><br><span class="line">                                &#123;EQ,        <span class="string">&quot;==&quot;</span>&#125;,</span><br><span class="line">                                &#123;NE,        <span class="string">&quot;!=&quot;</span>&#125;,</span><br><span class="line">                                &#123;JGT,       <span class="string">&quot;&gt;&quot;</span>&#125;,</span><br><span class="line">                                &#123;JGE,       <span class="string">&quot;&gt;=&quot;</span>&#125;,</span><br><span class="line">                                &#123;JLT,       <span class="string">&quot;&lt;&quot;</span>&#125;,</span><br><span class="line">                                &#123;JLE,       <span class="string">&quot;&lt;=&quot;</span>&#125;,</span><br><span class="line">                                &#123;JEQ,       <span class="string">&quot;==&quot;</span>&#125;,</span><br><span class="line">                                &#123;JNE,       <span class="string">&quot;!=&quot;</span>&#125;,</span><br><span class="line">                                &#123;RETURN,    <span class="string">&quot;  RETURN  &quot;</span>&#125;,</span><br><span class="line">                                &#123;ARG,       <span class="string">&quot;  ARG  &quot;</span>&#125;,</span><br><span class="line">                                &#123;PARAM,     <span class="string">&quot;  PARAM  &quot;</span>&#125;&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="3-6-4-表达式的处理"><a href="#3-6-4-表达式的处理" class="headerlink" title="3.6.4 表达式的处理:"></a>3.6.4 <strong>表达式的处理</strong>:</h4><ul>
<li>对于每个表达式节点，生成相应的中间代码序列。例如，对于二元运算符，生成对应的算术运算四元式。</li>
<li>复杂表达式可能需要多个中间代码，并可能涉及临时变量的使用。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Opn <span class="title">VarAST::GenIR</span><span class="params">(<span class="keyword">int</span> &amp;TempVarOffset)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//通过语义检查后，VarRef指向对应表项，否则为空，程序会崩溃</span></span><br><span class="line">    <span class="keyword">if</span> (VarRef-&gt;Kind == <span class="string">&#x27;V&#x27;</span> || VarRef-&gt;Kind == <span class="string">&#x27;P&#x27;</span>) &#123;</span><br><span class="line">        <span class="function">Opn <span class="title">VarOpn</span><span class="params">(VarRef-&gt;Alias, VarRef-&gt;Type, VarRef-&gt;Offset, VarRef-&gt;isGolbal)</span></span>;</span><br><span class="line">        <span class="keyword">return</span> VarOpn;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (VarRef-&gt;Kind == <span class="string">&#x27;A&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">auto</span> it = IRCodes.<span class="built_in">end</span>();</span><br><span class="line">        Opn Result = index[<span class="number">0</span>]-&gt;<span class="built_in">GenIR</span>(TempVarOffset);</span><br><span class="line">        it = IRCodes.<span class="built_in">end</span>();</span><br><span class="line">        IRCodes.<span class="built_in">splice</span>(it, index[<span class="number">0</span>]-&gt;IRCodes);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; index.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            <span class="comment">//生成临时变量保存常量值</span></span><br><span class="line">            <span class="function">Opn <span class="title">DimValue</span><span class="params">(NewTemp(), T_INT, TempVarOffset + MaxVarSize, <span class="number">0</span>)</span></span>; </span><br><span class="line">            TempVarOffset += TypeWidth[T_INT];           <span class="comment">//修改临时变量的偏移量</span></span><br><span class="line">            <span class="keyword">if</span> (TempVarOffset &gt; MaxTempVarOffset)</span><br><span class="line">                MaxTempVarOffset = TempVarOffset;</span><br><span class="line">            <span class="function">Opn <span class="title">Opn1</span><span class="params">(<span class="string">&quot;_CONST&quot;</span>, T_INT, <span class="number">0</span>, <span class="number">0</span>)</span></span>;             <span class="comment">//别名或临时变量名为_CONST时，表示常量</span></span><br><span class="line">            Opn1.constINT = VarRef-&gt;Dims[i];</span><br><span class="line">            IRCodes.<span class="built_in">emplace_back</span>(ASSIGN, Opn1, <span class="built_in">Opn</span>(), DimValue);</span><br><span class="line"></span><br><span class="line">            <span class="function">Opn <span class="title">MultiResult</span><span class="params">(NewTemp(), T_INT, TempVarOffset + MaxVarSize, <span class="number">0</span>)</span></span>; <span class="comment">//生成临时变量保存运算结果，结果类型应该根据运算结果来定</span></span><br><span class="line">            TempVarOffset += TypeWidth[T_INT];           <span class="comment">//这里只是简单处理成和左右操作数类型相同，修改临时变量的偏移量</span></span><br><span class="line">            <span class="keyword">if</span> (TempVarOffset &gt; MaxTempVarOffset)</span><br><span class="line">                MaxTempVarOffset = TempVarOffset;</span><br><span class="line">            IRCodes.<span class="built_in">emplace_back</span>(STAR, Result, DimValue, MultiResult);</span><br><span class="line"></span><br><span class="line">            Opn IndexValue = index[i]-&gt;<span class="built_in">GenIR</span>(TempVarOffset);</span><br><span class="line">            it = IRCodes.<span class="built_in">end</span>();</span><br><span class="line">            IRCodes.<span class="built_in">splice</span>(it, index[i]-&gt;IRCodes);</span><br><span class="line"></span><br><span class="line">            <span class="function">Opn <span class="title">AddResult</span><span class="params">(NewTemp(), T_INT, TempVarOffset + MaxVarSize, <span class="number">0</span>)</span></span>; <span class="comment">//生成临时变量保存运算结果，结果类型应该根据运算结果来定</span></span><br><span class="line">            TempVarOffset += TypeWidth[T_INT];           <span class="comment">//这里只是简单处理成和左右操作数类型相同，修改临时变量的偏移量</span></span><br><span class="line">            <span class="keyword">if</span> (TempVarOffset &gt; MaxTempVarOffset)</span><br><span class="line">                MaxTempVarOffset = TempVarOffset;</span><br><span class="line">            IRCodes.<span class="built_in">emplace_back</span>(PLUS, MultiResult, IndexValue, AddResult);</span><br><span class="line"></span><br><span class="line">            Result = AddResult;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function">Opn <span class="title">TypeValue</span><span class="params">(NewTemp(), T_INT, TempVarOffset + MaxVarSize, <span class="number">0</span>)</span></span>; <span class="comment">//生成临时变量保存常量值</span></span><br><span class="line">        TempVarOffset += TypeWidth[T_INT];           <span class="comment">//修改临时变量的偏移量</span></span><br><span class="line">        <span class="keyword">if</span> (TempVarOffset &gt; MaxTempVarOffset)</span><br><span class="line">            MaxTempVarOffset = TempVarOffset;</span><br><span class="line">        <span class="function">Opn <span class="title">Opn2</span><span class="params">(<span class="string">&quot;_CONST&quot;</span>, T_INT, <span class="number">0</span>, <span class="number">0</span>)</span></span>;             <span class="comment">//别名或临时变量名为_CONST时，表示常量</span></span><br><span class="line">        Opn2.constINT = TypeWidth[VarRef-&gt;Type];</span><br><span class="line">        IRCodes.<span class="built_in">emplace_back</span>(ASSIGN, Opn2, <span class="built_in">Opn</span>(), TypeValue);</span><br><span class="line"></span><br><span class="line">        <span class="function">Opn <span class="title">OffsetResult</span><span class="params">(NewTemp(), T_INT, TempVarOffset + MaxVarSize, <span class="number">0</span>)</span></span>; <span class="comment">//生成临时变量保存运算结果，结果类型应该根据运算结果来定</span></span><br><span class="line">        TempVarOffset += TypeWidth[T_INT];           <span class="comment">//这里只是简单处理成和左右操作数类型相同，修改临时变量的偏移量</span></span><br><span class="line">        <span class="keyword">if</span> (TempVarOffset &gt; MaxTempVarOffset)</span><br><span class="line">            MaxTempVarOffset = TempVarOffset;</span><br><span class="line">        IRCodes.<span class="built_in">emplace_back</span>(STAR, Result, TypeValue, OffsetResult);</span><br><span class="line"></span><br><span class="line">        <span class="function">Opn <span class="title">LoadEnd</span><span class="params">(NewTemp(), VarRef-&gt;Type, TempVarOffset + MaxVarSize, <span class="number">0</span>)</span></span>; <span class="comment">//生成临时变量保存常量值</span></span><br><span class="line">        TempVarOffset += TypeWidth[VarRef-&gt;Type];           <span class="comment">//修改临时变量的偏移量</span></span><br><span class="line">        <span class="keyword">if</span> (TempVarOffset &gt; MaxTempVarOffset)</span><br><span class="line">            MaxTempVarOffset = TempVarOffset;</span><br><span class="line"></span><br><span class="line">        <span class="function">Opn <span class="title">Arr</span><span class="params">(VarRef-&gt;Alias, VarRef-&gt;Type, VarRef-&gt;Offset, VarRef-&gt;isGolbal)</span></span>;</span><br><span class="line"></span><br><span class="line">        IRCodes.<span class="built_in">emplace_back</span>(ARRLOAD, Arr, OffsetResult, LoadEnd);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> LoadEnd;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-6-5-函数调用和参数传递"><a href="#3-6-5-函数调用和参数传递" class="headerlink" title="3.6.5 函数调用和参数传递:"></a>3.6.5 <strong>函数调用和参数传递</strong>:</h4><ul>
<li>函数调用会生成 CALL 类型的中间代码，其中包括函数名称和返回值的处理。</li>
<li>参数传递通过 ARG 类型的中间代码实现，与函数调用紧密关联。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function">Opn <span class="title">FuncCallAST::GenIR</span><span class="params">(<span class="keyword">int</span> &amp;TempVarOffset)</span> </span>&#123;</span><br><span class="line">    list&lt;IRCode&gt; ARGS;</span><br><span class="line">    list&lt;IRCode&gt;::iterator it;</span><br><span class="line">    Opn Opn1, Result;</span><br><span class="line">    SymbolsInAScope *ParamPtr = FuncRef-&gt;ParamPtr;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> a: Params) &#123;</span><br><span class="line">        <span class="keyword">if</span> (Name != <span class="built_in">string</span>(<span class="string">&quot;write&quot;</span>))  <span class="comment">//write函数特殊处理，参数传递用的寄存器</span></span><br><span class="line">        &#123;   <span class="comment">//用Opn1的Offset保存形参的偏移量,方便目标代码参数传递,将实参值保存在AR中</span></span><br><span class="line">            <span class="keyword">auto</span> *Sym = (VarSymbol *) ((ParamPtr-&gt;Symbols).<span class="built_in">at</span>(i++));</span><br><span class="line">            Opn1.Offset = Sym-&gt;Offset;</span><br><span class="line">        &#125;</span><br><span class="line">        Result = a-&gt;<span class="built_in">GenIR</span>(TempVarOffset);        <span class="comment">//计算实参表达式的值</span></span><br><span class="line">        it = IRCodes.<span class="built_in">end</span>();</span><br><span class="line">        IRCodes.<span class="built_in">splice</span>(it, a-&gt;IRCodes);</span><br><span class="line">        ARGS.<span class="built_in">emplace_back</span>(ARG, Opn1, <span class="built_in">Opn</span>(), Result);</span><br><span class="line">    &#125;</span><br><span class="line">    it = IRCodes.<span class="built_in">end</span>();</span><br><span class="line">    IRCodes.<span class="built_in">splice</span>(it, ARGS);</span><br><span class="line">    Opn1.Name = Name;</span><br><span class="line">    Opn1.Type = FuncRef-&gt;Type;</span><br><span class="line">    Opn1.SymPtr = FuncRef;</span><br><span class="line">    <span class="keyword">if</span> (FuncRef-&gt;Type != T_VOID) &#123;</span><br><span class="line">        <span class="comment">//临时变量保存返回结果</span></span><br><span class="line">        Result = <span class="built_in">Opn</span>(<span class="built_in">NewTemp</span>(), FuncRef-&gt;Type, TempVarOffset + MaxVarSize, <span class="number">0</span>);</span><br><span class="line">        TempVarOffset += TypeWidth[FuncRef-&gt;Type];</span><br><span class="line">        <span class="keyword">if</span> (TempVarOffset &gt; MaxTempVarOffset)</span><br><span class="line">            MaxTempVarOffset = TempVarOffset;</span><br><span class="line">        IRCodes.<span class="built_in">emplace_back</span>(CALL, Opn1, <span class="built_in">Opn</span>(), Result);</span><br><span class="line">    &#125; <span class="keyword">else</span> IRCodes.<span class="built_in">emplace_back</span>(CALL0, Opn1, <span class="built_in">Opn</span>(), <span class="built_in">Opn</span>()); <span class="comment">//返回值为void</span></span><br><span class="line">    <span class="keyword">return</span> Result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">FuncCallAST::GenIR</span><span class="params">(<span class="keyword">int</span> &amp;TempVarOffset, string LabelTrue, string LabelFalse)</span> </span>&#123;</span><br><span class="line">    Opn Result = <span class="built_in">GenIR</span>(TempVarOffset);</span><br><span class="line">    <span class="function">Opn <span class="title">Zero</span><span class="params">(<span class="string">&quot;_CONST&quot;</span>, T_INT, <span class="number">0</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">    Zero.constINT = <span class="number">0</span>;</span><br><span class="line">    IRCodes.<span class="built_in">emplace_back</span>(JNE, Result, Zero, <span class="built_in">Opn</span>(LabelTrue, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>));</span><br><span class="line">    IRCodes.<span class="built_in">emplace_back</span>(GOTO, <span class="built_in">Opn</span>(), <span class="built_in">Opn</span>(), <span class="built_in">Opn</span>(LabelFalse, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="3-6-6-中间代码的显示和输出"><a href="#3-6-6-中间代码的显示和输出" class="headerlink" title="3.6.6 中间代码的显示和输出:"></a>3.6.6 <strong>中间代码的显示和输出</strong>:</h4><ul>
<li>通过 DisplayIR 函数输出生成的中间代码，方便调试和验证。</li>
<li>中间代码以人类可读的格式显示，展示了每条指令的操作符、操作数和结果。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DisplayIR</span><span class="params">(<span class="keyword">const</span> list&lt;IRCode&gt;&amp; IRCodes)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; a: IRCodes) &#123;</span><br><span class="line">        string OpnStr1, OpnStr2 = a.Opn2.Name, ResultStr = a.Result.Name;</span><br><span class="line">        <span class="keyword">if</span> (a.Opn1.Name == <span class="built_in">string</span>(<span class="string">&quot;_CONST&quot;</span>))</span><br><span class="line">            <span class="built_in"><span class="keyword">switch</span></span> (a.Opn1.Type) &#123;</span><br><span class="line">                <span class="keyword">case</span> T_CHAR:</span><br><span class="line">                    OpnStr1 = <span class="built_in">string</span>(<span class="string">&quot;#&quot;</span>) + <span class="built_in">to_string</span>(a.Opn1.constCHAR);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> T_INT:</span><br><span class="line">                    OpnStr1 = <span class="built_in">string</span>(<span class="string">&quot;#&quot;</span>) + <span class="built_in">to_string</span>(a.Opn1.constINT);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> T_FLOAT:</span><br><span class="line">                    OpnStr1 = <span class="built_in">string</span>(<span class="string">&quot;#&quot;</span>) + <span class="built_in">to_string</span>(a.Opn1.constFLOAT);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">else</span> OpnStr1 = a.Opn1.Name;</span><br><span class="line"></span><br><span class="line">        <span class="built_in"><span class="keyword">switch</span></span> (a.Op) &#123;</span><br><span class="line">            <span class="keyword">case</span> ASSIGN:</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;  &quot;</span> &lt;&lt; ResultStr &lt;&lt; <span class="string">&quot; := &quot;</span> &lt;&lt; OpnStr1 &lt;&lt; endl;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> UPLUS:</span><br><span class="line">            <span class="keyword">case</span> UMINUS:</span><br><span class="line">            <span class="keyword">case</span> NOT:</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;  &quot;</span> &lt;&lt; ResultStr &lt;&lt; <span class="string">&quot; := &quot;</span> &lt;&lt; Instruction[a.Op] &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; OpnStr1 &lt;&lt; endl;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> PLUS:</span><br><span class="line">            <span class="keyword">case</span> MINUS:</span><br><span class="line">            <span class="keyword">case</span> STAR:</span><br><span class="line">            <span class="keyword">case</span> DIV:</span><br><span class="line">            <span class="keyword">case</span> LE:</span><br><span class="line">            <span class="keyword">case</span> LT:</span><br><span class="line">            <span class="keyword">case</span> GE:</span><br><span class="line">            <span class="keyword">case</span> GT:</span><br><span class="line">            <span class="keyword">case</span> EQ:</span><br><span class="line">            <span class="keyword">case</span> NE:</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;  &quot;</span> &lt;&lt; ResultStr &lt;&lt; <span class="string">&quot;:= &quot;</span> &lt;&lt; OpnStr1 &lt;&lt; Instruction[a.Op] &lt;&lt; OpnStr2 &lt;&lt; endl;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> JLE:</span><br><span class="line">            <span class="keyword">case</span> JLT:</span><br><span class="line">            <span class="keyword">case</span> JGE:</span><br><span class="line">            <span class="keyword">case</span> JGT:</span><br><span class="line">            <span class="keyword">case</span> JEQ:</span><br><span class="line">            <span class="keyword">case</span> JNE:</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;  &quot;</span> &lt;&lt; <span class="string">&quot;IF &quot;</span> &lt;&lt; OpnStr1 &lt;&lt; Instruction[a.Op] &lt;&lt; OpnStr2 &lt;&lt; <span class="string">&quot; GOTO &quot;</span> &lt;&lt; ResultStr &lt;&lt; endl;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> DPLUS:</span><br><span class="line">            <span class="keyword">case</span> DMINUS:</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;  &quot;</span> &lt;&lt; ResultStr &lt;&lt; <span class="string">&quot;:= &quot;</span> &lt;&lt; Instruction[a.Op] &lt;&lt; OpnStr1 &lt;&lt; endl;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> ARRDPLUS:</span><br><span class="line">            <span class="keyword">case</span> ARRDMINUS:</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;  &quot;</span> &lt;&lt; ResultStr &lt;&lt; <span class="string">&quot;:= &quot;</span> &lt;&lt; Instruction[a.Op] &lt;&lt; OpnStr1 &lt;&lt; <span class="string">&quot;[&quot;</span> &lt;&lt; OpnStr2 &lt;&lt; <span class="string">&quot;]&quot;</span> &lt;&lt; endl;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> PLUSD:</span><br><span class="line">            <span class="keyword">case</span> MINUSD:</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;  &quot;</span> &lt;&lt; ResultStr &lt;&lt; <span class="string">&quot;:= &quot;</span> &lt;&lt; OpnStr1 &lt;&lt; Instruction[a.Op] &lt;&lt; endl;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> ARRPLUSD:</span><br><span class="line">            <span class="keyword">case</span> ARRMINUSD:</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;  &quot;</span> &lt;&lt; ResultStr &lt;&lt; <span class="string">&quot;:= &quot;</span> &lt;&lt; OpnStr1 &lt;&lt; <span class="string">&quot;[&quot;</span> &lt;&lt; OpnStr2 &lt;&lt; <span class="string">&quot;]&quot;</span> &lt;&lt; Instruction[a.Op] &lt;&lt; endl;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> GOTO:</span><br><span class="line">            <span class="keyword">case</span> PARAM:</span><br><span class="line">            <span class="keyword">case</span> ARG:</span><br><span class="line">            <span class="keyword">case</span> RETURN:</span><br><span class="line">                cout &lt;&lt; Instruction[a.Op] &lt;&lt; ResultStr &lt;&lt; endl;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> FUNCTION:</span><br><span class="line">            <span class="keyword">case</span> LABEL:</span><br><span class="line">                cout &lt;&lt; Instruction[a.Op] &lt;&lt; ResultStr &lt;&lt; <span class="string">&quot;:&quot;</span> &lt;&lt; endl;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> CALL:</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;  &quot;</span> &lt;&lt; ResultStr &lt;&lt; <span class="string">&quot; := &quot;</span> &lt;&lt; <span class="string">&quot;CALL &quot;</span> &lt;&lt; OpnStr1 &lt;&lt; endl;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> CALL0:</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;  CALL &quot;</span> &lt;&lt; OpnStr1 &lt;&lt; endl;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> ARRLOAD:</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;  &quot;</span> &lt;&lt; ResultStr &lt;&lt; <span class="string">&quot;:=&quot;</span> &lt;&lt; OpnStr1 &lt;&lt; <span class="string">&quot;[&quot;</span> &lt;&lt; OpnStr2 &lt;&lt; <span class="string">&quot;]&quot;</span> &lt;&lt; endl;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> ARRASSIGN:</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;  &quot;</span> &lt;&lt; ResultStr &lt;&lt; <span class="string">&quot;[&quot;</span> &lt;&lt; OpnStr1 &lt;&lt; <span class="string">&quot;]&quot;</span> &lt;&lt; <span class="string">&quot;:=&quot;</span> &lt;&lt; OpnStr2 &lt;&lt; endl;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> END:</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;  End Of Program&quot;</span> &lt;&lt; endl;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="3-6-7-中间代码生产总结"><a href="#3-6-7-中间代码生产总结" class="headerlink" title="3.6.7 中间代码生产总结"></a>3.6.7 中间代码生产总结</h4><p>通过上述方法，”C minus” 编译器能够有效地将源程序的语法结构转换为中间代码，为后续的优化和目标代码生成打下基础。中间代码生成阶段体现了编译器将抽象语法结构转换为具体指令序列的能力，是编译器设计中的核心部分。</p>
<h3 id="3-7-汇编代码生成"><a href="#3-7-汇编代码生成" class="headerlink" title="3.7 汇编代码生成"></a>3.7 汇编代码生成</h3><p>在”C minus”编译器中，汇编代码生成是编译流程的最后阶段，它将前一阶段生成的中间代码转换为目标机器可以执行的汇编代码。以下是针对汇编代码生成阶段的详细分析：</p>
<h4 id="3-7-1-基本过程："><a href="#3-7-1-基本过程：" class="headerlink" title="3.7.1 基本过程："></a>3.7.1 <strong>基本过程</strong>：</h4><ul>
<li>汇编代码生成过程涉及将中间代码（IRCode）转换为特定于目标机器的汇编语言指令。</li>
<li>在这个示例中，目标机器是基于MIPS架构的，因此生成的汇编代码遵循MIPS指令集。</li>
</ul>
<h4 id="3-7-2-加载和存储操作："><a href="#3-7-2-加载和存储操作：" class="headerlink" title="3.7.2 加载和存储操作："></a>3.7.2 <strong>加载和存储操作</strong>：</h4><ul>
<li>LoadFromMem 和 StoreToMem 函数负责从内存中加载值到寄存器和从寄存器存储值到内存。</li>
<li>这些函数处理全局变量和栈变量的加载和存储操作，使用 $sp（栈指针）和 $gp（全局指针）寄存器。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function">string <span class="title">LoadFromMem</span><span class="params">(<span class="keyword">const</span> string&amp; Reg1, <span class="keyword">const</span> Opn&amp; opn, string Reg2)</span> </span>&#123;</span><br><span class="line">    string load;</span><br><span class="line">    <span class="keyword">if</span> (!(Reg2 != <span class="string">&quot;$sp&quot;</span> || (Reg2 == <span class="string">&quot;$sp&quot;</span> &amp;&amp; opn.isGolbal == <span class="number">0</span>)))</span><br><span class="line">        Reg2 = <span class="string">&quot;$gp&quot;</span>;</span><br><span class="line">    load = <span class="string">&quot;  lw &quot;</span> + Reg1 + <span class="string">&quot;,  &quot;</span> + <span class="built_in">to_string</span>(opn.Offset) + <span class="string">&quot;(&quot;</span> + Reg2 + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> load;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">string <span class="title">LoadFromMem</span><span class="params">(<span class="keyword">const</span> string&amp; Reg1, <span class="keyword">const</span> Opn&amp; opn1, <span class="keyword">const</span> Opn&amp; opn2, string Reg2)</span> </span>&#123;</span><br><span class="line">    string load;</span><br><span class="line">    <span class="keyword">if</span> (!(Reg2 != <span class="string">&quot;$sp&quot;</span> || (Reg2 == <span class="string">&quot;$sp&quot;</span> &amp;&amp; opn1.isGolbal == <span class="number">0</span>)))</span><br><span class="line">        Reg2 = <span class="string">&quot;$gp&quot;</span>;</span><br><span class="line">    load = <span class="string">&quot;  lw $t4,  &quot;</span> + <span class="built_in">to_string</span>(opn2.Offset) + <span class="string">&quot;(&quot;</span> + <span class="string">&quot;$sp&quot;</span> + <span class="string">&quot;)\n&quot;</span> +</span><br><span class="line">           <span class="string">&quot;  add &quot;</span> + Reg2 + <span class="string">&quot;, &quot;</span> + Reg2 + <span class="string">&quot;, &quot;</span> + <span class="string">&quot;$t4\n&quot;</span> +</span><br><span class="line">           <span class="string">&quot;  lw &quot;</span> + Reg1 + <span class="string">&quot;,  &quot;</span> + <span class="built_in">to_string</span>(opn1.Offset) + <span class="string">&quot;(&quot;</span> + Reg2 + <span class="string">&quot;)\n&quot;</span> +</span><br><span class="line">           <span class="string">&quot;  sub &quot;</span> + Reg2 + <span class="string">&quot;, &quot;</span> + Reg2 + <span class="string">&quot;, $t4&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> load;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">string <span class="title">StoreToMem</span><span class="params">(<span class="keyword">const</span> string&amp; Reg1, <span class="keyword">const</span> Opn&amp; opn, string Reg2)</span> </span>&#123;</span><br><span class="line">    string store;</span><br><span class="line">    <span class="keyword">if</span> (!(Reg2 != <span class="string">&quot;$sp&quot;</span> || (Reg2 == <span class="string">&quot;$sp&quot;</span> &amp;&amp; opn.isGolbal == <span class="number">0</span>)))</span><br><span class="line">        Reg2 = <span class="string">&quot;$gp&quot;</span>;</span><br><span class="line">    store = <span class="string">&quot;  sw &quot;</span> + Reg1 + <span class="string">&quot;,  &quot;</span> + <span class="built_in">to_string</span>(opn.Offset) + <span class="string">&quot;(&quot;</span> + Reg2 + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> store;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">string <span class="title">StoreToMem</span><span class="params">(<span class="keyword">const</span> string&amp; Reg1, <span class="keyword">const</span> Opn&amp; opn1, <span class="keyword">const</span> Opn&amp; opn2, string Reg2)</span> </span>&#123;</span><br><span class="line">    string store;</span><br><span class="line">    <span class="keyword">if</span> (!(Reg2 != <span class="string">&quot;$sp&quot;</span> || (Reg2 == <span class="string">&quot;$sp&quot;</span> &amp;&amp; opn1.isGolbal == <span class="number">0</span>)))</span><br><span class="line">        Reg2 = <span class="string">&quot;$gp&quot;</span>;</span><br><span class="line">    store = <span class="string">&quot;  lw $t4,  &quot;</span> + <span class="built_in">to_string</span>(opn2.Offset) + <span class="string">&quot;(&quot;</span> + <span class="string">&quot;$sp&quot;</span> + <span class="string">&quot;)\n&quot;</span> +</span><br><span class="line">            <span class="string">&quot;  add &quot;</span> + Reg2 + <span class="string">&quot;, &quot;</span> + Reg2 + <span class="string">&quot;, &quot;</span> + <span class="string">&quot;$t4\n&quot;</span> +</span><br><span class="line">            <span class="string">&quot;  sw &quot;</span> + Reg1 + <span class="string">&quot;,  &quot;</span> + <span class="built_in">to_string</span>(opn1.Offset) + <span class="string">&quot;(&quot;</span> + Reg2 + <span class="string">&quot;)\n&quot;</span> +</span><br><span class="line">            <span class="string">&quot;  sub &quot;</span> + Reg2 + <span class="string">&quot;, &quot;</span> + Reg2 + <span class="string">&quot;, $t4&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> store;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-7-3-寄存器使用："><a href="#3-7-3-寄存器使用：" class="headerlink" title="3.7.3 寄存器使用："></a>3.7.3 <strong>寄存器使用</strong>：</h4><ul>
<li>MIPS架构具有一组固定的寄存器，例如$t0-$t9用于临时存储，$v0用于存放函数返回值，$a0-$a3用于参数传递。</li>
<li>编译器在生成汇编代码时，需合理分配这些寄存器。</li>
</ul>
<h4 id="3-7-4-函数调用和返回："><a href="#3-7-4-函数调用和返回：" class="headerlink" title="3.7.4 函数调用和返回："></a>3.7.4 <strong>函数调用和返回</strong>：</h4><ul>
<li>对于函数调用，生成jal（Jump And Link）指令，以及相关的参数准备和返回值处理代码。</li>
<li>特殊处理像read和write这样的内置函数。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*预先给出read和write的目标代码*/</span></span><br><span class="line">ObjectFile &lt;&lt; <span class="string">&quot;read:\n&quot;</span>;</span><br><span class="line">ObjectFile &lt;&lt; <span class="string">&quot;  li $v0,4\n&quot;</span>;</span><br><span class="line">ObjectFile &lt;&lt; <span class="string">&quot;  la $a0,_Prompt\n&quot;</span>;</span><br><span class="line">ObjectFile &lt;&lt; <span class="string">&quot;  syscall\n&quot;</span>;</span><br><span class="line">ObjectFile &lt;&lt; <span class="string">&quot;  li $v0,5\n&quot;</span>;</span><br><span class="line">ObjectFile &lt;&lt; <span class="string">&quot;  syscall\n&quot;</span>;</span><br><span class="line">ObjectFile &lt;&lt; <span class="string">&quot;  jr $ra\n\n&quot;</span>;</span><br><span class="line">ObjectFile &lt;&lt; <span class="string">&quot;write:\n&quot;</span>;</span><br><span class="line">ObjectFile &lt;&lt; <span class="string">&quot;  li $v0,1\n&quot;</span>;</span><br><span class="line">ObjectFile &lt;&lt; <span class="string">&quot;  syscall\n&quot;</span>;</span><br><span class="line">ObjectFile &lt;&lt; <span class="string">&quot;  li $v0,4\n&quot;</span>;</span><br><span class="line">ObjectFile &lt;&lt; <span class="string">&quot;  la $a0,_ret\n&quot;</span>;</span><br><span class="line">ObjectFile &lt;&lt; <span class="string">&quot;  syscall\n&quot;</span>;</span><br><span class="line">ObjectFile &lt;&lt; <span class="string">&quot;  move $v0,$0\n&quot;</span>;</span><br><span class="line">ObjectFile &lt;&lt; <span class="string">&quot;  jr $ra\n&quot;</span>;</span><br></pre></td></tr></table></figure>
<h4 id="3-7-5-控制流程："><a href="#3-7-5-控制流程：" class="headerlink" title="3.7.5 控制流程："></a>3.7.5 <strong>控制流程</strong>：</h4><ul>
<li><p>生成条件跳转指令，如beq、bne等，来实现if-else和循环等控制结构。</p>
</li>
<li><p>使用标签（如Label_x）来标识跳转的目标位置。</p>
</li>
<li><p>```cpp<br>case JLE:<br>case JLT:<br>case JGE:<br>case JGT:<br>case JEQ:<br>case JNE:</p>
<pre><code>ObjectFile &lt;&lt; LoadFromMem(&quot;$t1&quot;, it-&gt;Opn1, &quot;$sp&quot;) &lt;&lt; endl;
ObjectFile &lt;&lt; LoadFromMem(&quot;$t2&quot;, it-&gt;Opn2, &quot;$sp&quot;) &lt;&lt; endl;
if (it-&gt;Op == JLE) ObjectFile &lt;&lt; &quot;  ble $t1,$t2,&quot; &lt;&lt; it-&gt;Result.Name &lt;&lt; endl;
else if (it-&gt;Op == JLT) ObjectFile &lt;&lt; &quot;  blt $t1,$t2,&quot; &lt;&lt; it-&gt;Result.Name &lt;&lt; endl;
else if (it-&gt;Op == JGE) ObjectFile &lt;&lt; &quot;  bge $t1,$t2,&quot; &lt;&lt; it-&gt;Result.Name &lt;&lt; endl;
else if (it-&gt;Op == JGT) ObjectFile &lt;&lt; &quot;  bgt $t1,$t2,&quot; &lt;&lt; it-&gt;Result.Name &lt;&lt; endl;
else if (it-&gt;Op == JEQ) ObjectFile &lt;&lt; &quot;  beq $t1,$t2,&quot; &lt;&lt; it-&gt;Result.Name &lt;&lt; endl;
else ObjectFile &lt;&lt; &quot;  bne $t1,$t2,&quot; &lt;&lt; it-&gt;Result.Name &lt;&lt; endl;
break;
</code></pre><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#### 3.7.6 **算术和逻辑操作**：</span></span><br><span class="line"></span><br><span class="line">- 根据中间代码的操作符生成相应的MIPS指令，如add、sub、mul、div等。</span><br><span class="line"></span><br><span class="line">```cpp</span><br><span class="line"><span class="keyword">case</span> PLUS:</span><br><span class="line"><span class="keyword">case</span> MINUS:</span><br><span class="line"><span class="keyword">case</span> STAR:</span><br><span class="line"><span class="keyword">case</span> DIV:</span><br><span class="line"><span class="keyword">case</span> MOD:</span><br><span class="line">ObjectFile &lt;&lt; LoadFromMem(<span class="string">&quot;<span class="subst">$t1</span>&quot;</span>, it-&gt;Opn1, <span class="string">&quot;<span class="subst">$sp</span>&quot;</span>) &lt;&lt; endl;</span><br><span class="line">ObjectFile &lt;&lt; LoadFromMem(<span class="string">&quot;<span class="subst">$t2</span>&quot;</span>, it-&gt;Opn2, <span class="string">&quot;<span class="subst">$sp</span>&quot;</span>) &lt;&lt; endl;</span><br><span class="line"><span class="keyword">if</span> (it-&gt;Op == PLUS) ObjectFile &lt;&lt; <span class="string">&quot;  add <span class="subst">$t3</span>,<span class="subst">$t1</span>,<span class="subst">$t2</span>&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (it-&gt;Op == MINUS) ObjectFile &lt;&lt; <span class="string">&quot;  sub <span class="subst">$t3</span>,<span class="subst">$t1</span>,<span class="subst">$t2</span>&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (it-&gt;Op == STAR) ObjectFile &lt;&lt; <span class="string">&quot;  mul <span class="subst">$t3</span>,<span class="subst">$t1</span>,<span class="subst">$t2</span>&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (it-&gt;Op == DIV) &#123;</span><br><span class="line">    ObjectFile &lt;&lt; <span class="string">&quot;  div <span class="subst">$t1</span>, <span class="subst">$t2</span>&quot;</span> &lt;&lt; endl;</span><br><span class="line">    ObjectFile &lt;&lt; <span class="string">&quot;  mflo <span class="subst">$t3</span>&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    ObjectFile &lt;&lt; <span class="string">&quot;  div <span class="subst">$t1</span>, <span class="subst">$t2</span>&quot;</span> &lt;&lt; endl;</span><br><span class="line">    ObjectFile &lt;&lt; <span class="string">&quot;  mfhi <span class="subst">$t3</span>&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">ObjectFile &lt;&lt; StoreToMem(<span class="string">&quot;<span class="subst">$t3</span>&quot;</span>, it-&gt;Result, <span class="string">&quot;<span class="subst">$sp</span>&quot;</span>) &lt;&lt; endl;</span><br><span class="line"><span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="3-7-7-汇编代码的组织和输出："><a href="#3-7-7-汇编代码的组织和输出：" class="headerlink" title="3.7.7 汇编代码的组织和输出："></a>3.7.7 <strong>汇编代码的组织和输出</strong>：</h4><ul>
<li>使用fstream库将生成的汇编代码写入文件，通常是.s后缀的文件。</li>
<li>汇编代码以.data部分开始，定义了全局数据，接着是.text部分，包含了所有的指令。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ObjectFile &lt;&lt; <span class="string">&quot;.data\n&quot;</span>;</span><br><span class="line">ObjectFile &lt;&lt; <span class="string">&quot;_Prompt: .asciiz \&quot;Enter an integer:  \&quot;\n&quot;</span>;</span><br><span class="line">ObjectFile &lt;&lt; <span class="string">&quot;_ret: .asciiz \&quot;\\n\&quot;\n&quot;</span>;</span><br><span class="line">ObjectFile &lt;&lt; <span class="string">&quot;.globl main\n&quot;</span>;</span><br><span class="line">ObjectFile &lt;&lt; <span class="string">&quot;.text\n\n&quot;</span>;</span><br></pre></td></tr></table></figure>
<h4 id="3-7-8-汇编代码生产总结"><a href="#3-7-8-汇编代码生产总结" class="headerlink" title="3.7.8 汇编代码生产总结"></a>3.7.8 汇编代码生产总结</h4><p>通过以上步骤，”C minus”编译器能够将中间代码有效地转换为可在MIPS架构上运行的汇编代码。这一阶段是编译过程的重要组成部分，它直接影响到生成程序的性能和效率。</p>
<h2 id="4-系统测试与评价"><a href="#4-系统测试与评价" class="headerlink" title="4. 系统测试与评价"></a>4. 系统测试与评价</h2><p>在开发编译器的过程中，系统测试是一个关键环节，它确保了编译器的可靠性和稳定性。以下是对”C minus”编译器进行系统测试和评价的详细分析：</p>
<h3 id="4-1-测试用例"><a href="#4-1-测试用例" class="headerlink" title="4.1 测试用例"></a>4.1 测试用例</h3><h4 id="4-1-1-基本测试："><a href="#4-1-1-基本测试：" class="headerlink" title="4.1.1 基本测试："></a>4.1.1 <strong>基本测试</strong>：</h4><p>包括变量声明、基本运算、控制结构（如if-else, for, while循环）等。本测试将采用fibo.c文件进行测试，代码如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a, b, c;</span><br><span class="line"><span class="keyword">float</span> m ,n;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fibo</span><span class="params">(<span class="keyword">int</span> a)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (a == <span class="number">1</span> || a == <span class="number">2</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">fibo</span>(a - <span class="number">1</span>) + <span class="built_in">fibo</span>(a - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m, n, i;</span><br><span class="line">    m = <span class="built_in">read</span>();</span><br><span class="line">    i = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt;= m)</span><br><span class="line">    &#123;</span><br><span class="line">        n = <span class="built_in">fibo</span>(i);</span><br><span class="line">        <span class="built_in">write</span>(n);</span><br><span class="line">        i = i + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="4-1-2-复杂功能测试："><a href="#4-1-2-复杂功能测试：" class="headerlink" title="4.1.2 复杂功能测试："></a>4.1.2 <strong>复杂功能测试</strong>：</h4><p>包括多维数组的处理、函数调用（包括递归调用）以及参数传递等。本测试将采用array.c文件进行测试，代码如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fibo</span> <span class="params">(<span class="keyword">int</span> a)</span> </span>&#123; <span class="comment">// compute the Fibonacci sequence recursively </span></span><br><span class="line">    <span class="keyword">if</span> (a == <span class="number">1</span> || a == <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">fibo</span>(a - <span class="number">1</span>)+<span class="built_in">fibo</span>(a - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> b[<span class="number">5</span>][<span class="number">5</span>];</span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) </span><br><span class="line">        <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; <span class="number">5</span>; j++)</span><br><span class="line">            b[i][j] = i+j;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">        <span class="built_in">write</span>(b[i][i]);</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">write</span>(<span class="built_in">fibo</span>(b[<span class="number">1</span>][<span class="number">3</span>]));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-1-3-集成测试："><a href="#4-1-3-集成测试：" class="headerlink" title="4.1.3 集成测试："></a>4.1.3 <strong>集成测试</strong>：</h4><p>将基本测试和复杂功能测试集成在一起，测试编译器对复杂程序的处理能力。将采用quicksort.c文件进行测试，代码如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> arr[<span class="number">20</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">QuickSort</span><span class="params">(<span class="keyword">int</span> begin, <span class="keyword">int</span> end)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> tmp, i, j, t;</span><br><span class="line">    <span class="keyword">if</span>(begin &gt; end)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    tmp = arr[begin];</span><br><span class="line">    i = begin;</span><br><span class="line">    j = end;</span><br><span class="line">    <span class="keyword">while</span>(i != j)&#123;</span><br><span class="line">        <span class="keyword">while</span>(arr[j] &gt;= tmp &amp;&amp; j &gt; i)</span><br><span class="line">            j--;</span><br><span class="line">        <span class="keyword">while</span>(arr[i] &lt;= tmp &amp;&amp; j &gt; i)</span><br><span class="line">            i++;</span><br><span class="line">        <span class="keyword">if</span>(j &gt; i)&#123;</span><br><span class="line">            t = arr[i];</span><br><span class="line">            arr[i] = arr[j];</span><br><span class="line">            arr[j] = t;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    arr[begin] = arr[i];</span><br><span class="line">    arr[i] = tmp;</span><br><span class="line">    <span class="built_in">QuickSort</span>(begin, i<span class="number">-1</span>);</span><br><span class="line">    <span class="built_in">QuickSort</span>(i+<span class="number">1</span>, end);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, n;</span><br><span class="line">    </span><br><span class="line">    n=<span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        arr[i]=<span class="built_in">read</span>();</span><br><span class="line">    <span class="built_in">QuickSort</span>(<span class="number">1</span>, n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">write</span>(arr[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-2-正确性测试"><a href="#4-2-正确性测试" class="headerlink" title="4.2 正确性测试"></a>4.2 正确性测试</h3><h4 id="4-2-1-符号表与语法树："><a href="#4-2-1-符号表与语法树：" class="headerlink" title="4.2.1 符号表与语法树："></a>4.2.1 <strong>符号表与语法树：</strong></h4><h5 id="fibo-c"><a href="#fibo-c" class="headerlink" title="fibo.c"></a>fibo.c</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br></pre></td><td class="code"><pre><span class="line">外部变量定义:</span><br><span class="line">    类 型 名: <span class="keyword">int</span>   </span><br><span class="line"></span><br><span class="line">    变量列表: </span><br><span class="line">               a</span><br><span class="line">               b</span><br><span class="line">               c</span><br><span class="line">外部变量定义:</span><br><span class="line">    类 型 名: <span class="keyword">float</span> </span><br><span class="line"></span><br><span class="line">    变量列表: </span><br><span class="line">               m</span><br><span class="line">               n</span><br><span class="line">函数定义:</span><br><span class="line">    返回类型：<span class="keyword">int</span>   </span><br><span class="line"></span><br><span class="line">    函 数 名：fibo</span><br><span class="line">    形 参 表：</span><br><span class="line">              <span class="keyword">int</span>   </span><br><span class="line">              a</span><br><span class="line">    函 数 体：  </span><br><span class="line">          语句部分:</span><br><span class="line">            <span class="keyword">if</span>语句：</span><br><span class="line">              条件：</span><br><span class="line">                    ||</span><br><span class="line">                        ==</span><br><span class="line">                            a</span><br><span class="line"></span><br><span class="line">                            <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                        ==</span><br><span class="line">                            a</span><br><span class="line"></span><br><span class="line">                            <span class="number">2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">              <span class="keyword">if</span>子句：</span><br><span class="line">                    返回表达式：</span><br><span class="line">                        <span class="number">1</span></span><br><span class="line"></span><br><span class="line">            返回表达式：</span><br><span class="line">                +</span><br><span class="line">                    函数调用: 函数名：fibo</span><br><span class="line">                              <span class="number">1</span>个实参表达式:</span><br><span class="line"></span><br><span class="line">                                  -</span><br><span class="line">                                      a</span><br><span class="line"></span><br><span class="line">                                      <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                    函数调用: 函数名：fibo</span><br><span class="line">                              <span class="number">1</span>个实参表达式:</span><br><span class="line"></span><br><span class="line">                                  -</span><br><span class="line">                                      a</span><br><span class="line"></span><br><span class="line">                                      <span class="number">2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">函数定义:</span><br><span class="line">    返回类型：<span class="keyword">int</span>   </span><br><span class="line"></span><br><span class="line">    函 数 名：main</span><br><span class="line">    形 参 表：无</span><br><span class="line">    函 数 体：  </span><br><span class="line">          说明部分:</span><br><span class="line">            类型：<span class="keyword">int</span>   </span><br><span class="line"></span><br><span class="line">            变量列表: </span><br><span class="line">                      m</span><br><span class="line">                      n</span><br><span class="line">                      i</span><br><span class="line"></span><br><span class="line">          语句部分:</span><br><span class="line">            表达式语句：</span><br><span class="line">                赋值运算符：=</span><br><span class="line">                  左值表达式：</span><br><span class="line">                                m</span><br><span class="line">                  右值表达式：</span><br><span class="line">                                函数调用: 函数名：read &lt;无实参表达式&gt;</span><br><span class="line"></span><br><span class="line">            表达式语句：</span><br><span class="line">                赋值运算符：=</span><br><span class="line">                  左值表达式：</span><br><span class="line">                                i</span><br><span class="line">                  右值表达式：</span><br><span class="line">                                <span class="number">1</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span>语句：</span><br><span class="line">              循环条件：</span><br><span class="line">                    &lt;=</span><br><span class="line">                        i</span><br><span class="line"></span><br><span class="line">                        m</span><br><span class="line"></span><br><span class="line">              循环体：</span><br><span class="line">                    复合语句：</span><br><span class="line">                      语句部分:</span><br><span class="line">                        表达式语句：</span><br><span class="line">                            赋值运算符：=</span><br><span class="line">                              左值表达式：</span><br><span class="line">                                            n</span><br><span class="line">                              右值表达式：</span><br><span class="line">                                            函数调用: 函数名：fibo</span><br><span class="line">                                                      <span class="number">1</span>个实参表达式:</span><br><span class="line"></span><br><span class="line">                                                          i</span><br><span class="line"></span><br><span class="line">                        函数调用: 函数名：write</span><br><span class="line">                                  <span class="number">1</span>个实参表达式:</span><br><span class="line"></span><br><span class="line">                                      n</span><br><span class="line">                        表达式语句：</span><br><span class="line">                            赋值运算符：=</span><br><span class="line">                              左值表达式：</span><br><span class="line">                                            i</span><br><span class="line">                              右值表达式：</span><br><span class="line">                                            +</span><br><span class="line">                                                i</span><br><span class="line"></span><br><span class="line">                                                <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            返回表达式：</span><br><span class="line">                <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">********************当前复合语句符号表状态**************************</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">0</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">read                        <span class="keyword">int</span>     函数  形参数: <span class="number">0</span>  变量空间: <span class="number">12</span></span><br><span class="line">write                       <span class="keyword">void</span>    函数  形参数: <span class="number">1</span>  变量空间: <span class="number">4</span></span><br><span class="line">x                   x       <span class="keyword">int</span>     形参  偏移量: <span class="number">4</span>  全局: <span class="number">0</span></span><br><span class="line">a                   V_1     <span class="keyword">int</span>     变量  偏移量: <span class="number">0</span>  全局: <span class="number">1</span></span><br><span class="line">b                   V_2     <span class="keyword">int</span>     变量  偏移量: <span class="number">4</span>  全局: <span class="number">1</span></span><br><span class="line">c                   V_3     <span class="keyword">int</span>     变量  偏移量: <span class="number">8</span>  全局: <span class="number">1</span></span><br><span class="line">m                   V_4     <span class="keyword">float</span>   变量  偏移量: <span class="number">0</span>  全局: <span class="number">1</span></span><br><span class="line">n                   V_5     <span class="keyword">float</span>   变量  偏移量: <span class="number">8</span>  全局: <span class="number">1</span></span><br><span class="line">fibo                        <span class="keyword">int</span>     函数  形参数: <span class="number">1</span>  变量空间: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">1</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">a                   V_6     <span class="keyword">int</span>     形参  偏移量: <span class="number">12</span>  全局: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">********************当前复合语句符号表状态**************************</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">0</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">read                        <span class="keyword">int</span>     函数  形参数: <span class="number">0</span>  变量空间: <span class="number">12</span></span><br><span class="line">write                       <span class="keyword">void</span>    函数  形参数: <span class="number">1</span>  变量空间: <span class="number">4</span></span><br><span class="line">x                   x       <span class="keyword">int</span>     形参  偏移量: <span class="number">4</span>  全局: <span class="number">0</span></span><br><span class="line">a                   V_1     <span class="keyword">int</span>     变量  偏移量: <span class="number">0</span>  全局: <span class="number">1</span></span><br><span class="line">b                   V_2     <span class="keyword">int</span>     变量  偏移量: <span class="number">4</span>  全局: <span class="number">1</span></span><br><span class="line">c                   V_3     <span class="keyword">int</span>     变量  偏移量: <span class="number">8</span>  全局: <span class="number">1</span></span><br><span class="line">m                   V_4     <span class="keyword">float</span>   变量  偏移量: <span class="number">0</span>  全局: <span class="number">1</span></span><br><span class="line">n                   V_5     <span class="keyword">float</span>   变量  偏移量: <span class="number">8</span>  全局: <span class="number">1</span></span><br><span class="line">fibo                        <span class="keyword">int</span>     函数  形参数: <span class="number">1</span>  变量空间: <span class="number">16</span></span><br><span class="line">main                        <span class="keyword">int</span>     函数  形参数: <span class="number">0</span>  变量空间: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">1</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">m                   V_7     <span class="keyword">int</span>     变量  偏移量: <span class="number">12</span>  全局: <span class="number">0</span></span><br><span class="line">n                   V_8     <span class="keyword">int</span>     变量  偏移量: <span class="number">16</span>  全局: <span class="number">0</span></span><br><span class="line">i                   V_9     <span class="keyword">int</span>     变量  偏移量: <span class="number">20</span>  全局: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">2</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">  空 表</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">********************当前复合语句符号表状态**************************</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">0</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">read                        <span class="keyword">int</span>     函数  形参数: <span class="number">0</span>  变量空间: <span class="number">12</span></span><br><span class="line">write                       <span class="keyword">void</span>    函数  形参数: <span class="number">1</span>  变量空间: <span class="number">4</span></span><br><span class="line">x                   x       <span class="keyword">int</span>     形参  偏移量: <span class="number">4</span>  全局: <span class="number">0</span></span><br><span class="line">a                   V_1     <span class="keyword">int</span>     变量  偏移量: <span class="number">0</span>  全局: <span class="number">1</span></span><br><span class="line">b                   V_2     <span class="keyword">int</span>     变量  偏移量: <span class="number">4</span>  全局: <span class="number">1</span></span><br><span class="line">c                   V_3     <span class="keyword">int</span>     变量  偏移量: <span class="number">8</span>  全局: <span class="number">1</span></span><br><span class="line">m                   V_4     <span class="keyword">float</span>   变量  偏移量: <span class="number">0</span>  全局: <span class="number">1</span></span><br><span class="line">n                   V_5     <span class="keyword">float</span>   变量  偏移量: <span class="number">8</span>  全局: <span class="number">1</span></span><br><span class="line">fibo                        <span class="keyword">int</span>     函数  形参数: <span class="number">1</span>  变量空间: <span class="number">16</span></span><br><span class="line">main                        <span class="keyword">int</span>     函数  形参数: <span class="number">0</span>  变量空间: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">1</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">m                   V_7     <span class="keyword">int</span>     变量  偏移量: <span class="number">12</span>  全局: <span class="number">0</span></span><br><span class="line">n                   V_8     <span class="keyword">int</span>     变量  偏移量: <span class="number">16</span>  全局: <span class="number">0</span></span><br><span class="line">i                   V_9     <span class="keyword">int</span>     变量  偏移量: <span class="number">20</span>  全局: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">0</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">read                        <span class="keyword">int</span>     函数  形参数: <span class="number">0</span>  变量空间: <span class="number">12</span></span><br><span class="line">write                       <span class="keyword">void</span>    函数  形参数: <span class="number">1</span>  变量空间: <span class="number">4</span></span><br><span class="line">x                   x       <span class="keyword">int</span>     形参  偏移量: <span class="number">4</span>  全局: <span class="number">0</span></span><br><span class="line">a                   V_1     <span class="keyword">int</span>     变量  偏移量: <span class="number">0</span>  全局: <span class="number">1</span></span><br><span class="line">b                   V_2     <span class="keyword">int</span>     变量  偏移量: <span class="number">4</span>  全局: <span class="number">1</span></span><br><span class="line">c                   V_3     <span class="keyword">int</span>     变量  偏移量: <span class="number">8</span>  全局: <span class="number">1</span></span><br><span class="line">m                   V_4     <span class="keyword">float</span>   变量  偏移量: <span class="number">0</span>  全局: <span class="number">1</span></span><br><span class="line">n                   V_5     <span class="keyword">float</span>   变量  偏移量: <span class="number">8</span>  全局: <span class="number">1</span></span><br><span class="line">fibo                        <span class="keyword">int</span>     函数  形参数: <span class="number">1</span>  变量空间: <span class="number">16</span></span><br><span class="line">main                        <span class="keyword">int</span>     函数  形参数: <span class="number">0</span>  变量空间: <span class="number">24</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="array-c"><a href="#array-c" class="headerlink" title="array.c"></a>array.c</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br></pre></td><td class="code"><pre><span class="line">函数定义:</span><br><span class="line">    返回类型：<span class="keyword">int</span>   </span><br><span class="line"></span><br><span class="line">    函 数 名：fibo</span><br><span class="line">    形 参 表：</span><br><span class="line">              <span class="keyword">int</span>   </span><br><span class="line">              a</span><br><span class="line">    函 数 体：  </span><br><span class="line">          语句部分:</span><br><span class="line">            <span class="keyword">if</span>语句：</span><br><span class="line">              条件：</span><br><span class="line">                    ||</span><br><span class="line">                        ==</span><br><span class="line">                            a</span><br><span class="line"></span><br><span class="line">                            <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                        ==</span><br><span class="line">                            a</span><br><span class="line"></span><br><span class="line">                            <span class="number">2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">              <span class="keyword">if</span>子句：</span><br><span class="line">                    返回表达式：</span><br><span class="line">                        <span class="number">1</span></span><br><span class="line"></span><br><span class="line">            返回表达式：</span><br><span class="line">                +</span><br><span class="line">                    函数调用: 函数名：fibo</span><br><span class="line">                              <span class="number">1</span>个实参表达式:</span><br><span class="line"></span><br><span class="line">                                  -</span><br><span class="line">                                      a</span><br><span class="line"></span><br><span class="line">                                      <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                    函数调用: 函数名：fibo</span><br><span class="line">                              <span class="number">1</span>个实参表达式:</span><br><span class="line"></span><br><span class="line">                                  -</span><br><span class="line">                                      a</span><br><span class="line"></span><br><span class="line">                                      <span class="number">2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">函数定义:</span><br><span class="line">    返回类型：<span class="keyword">int</span>   </span><br><span class="line"></span><br><span class="line">    函 数 名：main</span><br><span class="line">    形 参 表：无</span><br><span class="line">    函 数 体：  </span><br><span class="line">          说明部分:</span><br><span class="line">            类型：<span class="keyword">int</span>   </span><br><span class="line"></span><br><span class="line">            变量列表: </span><br><span class="line">                      b[<span class="number">5</span>][<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line">            类型：<span class="keyword">int</span>   </span><br><span class="line"></span><br><span class="line">            变量列表: </span><br><span class="line">                      i</span><br><span class="line">                      j</span><br><span class="line"></span><br><span class="line">          语句部分:</span><br><span class="line">            <span class="keyword">for</span>语句：</span><br><span class="line">              单次表达式：</span><br><span class="line">                    赋值运算符：=</span><br><span class="line">                      左值表达式：</span><br><span class="line">                                    i</span><br><span class="line">                      右值表达式：</span><br><span class="line">                                    <span class="number">0</span></span><br><span class="line">              循环条件：</span><br><span class="line">                    &lt;</span><br><span class="line">                        i</span><br><span class="line"></span><br><span class="line">                        <span class="number">5</span></span><br><span class="line"></span><br><span class="line">              末尾循环体：</span><br><span class="line">                    单目：N++</span><br><span class="line">                            i</span><br><span class="line">              循环体：</span><br><span class="line">                    <span class="keyword">for</span>语句：</span><br><span class="line">                      单次表达式：</span><br><span class="line">                            赋值运算符：=</span><br><span class="line">                              左值表达式：</span><br><span class="line">                                            j</span><br><span class="line">                              右值表达式：</span><br><span class="line">                                            <span class="number">0</span></span><br><span class="line">                      循环条件：</span><br><span class="line">                            &lt;</span><br><span class="line">                                j</span><br><span class="line"></span><br><span class="line">                                <span class="number">5</span></span><br><span class="line"></span><br><span class="line">                      末尾循环体：</span><br><span class="line">                            单目：N++</span><br><span class="line">                                    j</span><br><span class="line">                      循环体：</span><br><span class="line">                            表达式语句：</span><br><span class="line">                                赋值运算符：=</span><br><span class="line">                                  左值表达式：</span><br><span class="line">                                                b</span><br><span class="line">                                                          <span class="number">2</span>个下标:</span><br><span class="line"></span><br><span class="line">                                                                i</span><br><span class="line">                                                                j</span><br><span class="line">                                  右值表达式：</span><br><span class="line">                                                +</span><br><span class="line">                                                    i</span><br><span class="line"></span><br><span class="line">                                                    j</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>语句：</span><br><span class="line">              单次表达式：</span><br><span class="line">                    赋值运算符：=</span><br><span class="line">                      左值表达式：</span><br><span class="line">                                    i</span><br><span class="line">                      右值表达式：</span><br><span class="line">                                    <span class="number">0</span></span><br><span class="line">              循环条件：</span><br><span class="line">                    &lt;</span><br><span class="line">                        i</span><br><span class="line"></span><br><span class="line">                        <span class="number">5</span></span><br><span class="line"></span><br><span class="line">              末尾循环体：</span><br><span class="line">                    单目：N++</span><br><span class="line">                            i</span><br><span class="line">              循环体：</span><br><span class="line">                    函数调用: 函数名：write</span><br><span class="line">                              <span class="number">1</span>个实参表达式:</span><br><span class="line"></span><br><span class="line">                                  b</span><br><span class="line">                                            <span class="number">2</span>个下标:</span><br><span class="line"></span><br><span class="line">                                                  i</span><br><span class="line">                                                  i</span><br><span class="line">            函数调用: 函数名：write</span><br><span class="line">                      <span class="number">1</span>个实参表达式:</span><br><span class="line"></span><br><span class="line">                          函数调用: 函数名：fibo</span><br><span class="line">                                    <span class="number">1</span>个实参表达式:</span><br><span class="line"></span><br><span class="line">                                        b</span><br><span class="line">                                                  <span class="number">2</span>个下标:</span><br><span class="line"></span><br><span class="line">                                                        <span class="number">1</span></span><br><span class="line">                                                        <span class="number">3</span></span><br><span class="line">            返回表达式：</span><br><span class="line">                <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">********************当前复合语句符号表状态**************************</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">0</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">read                        <span class="keyword">int</span>     函数  形参数: <span class="number">0</span>  变量空间: <span class="number">12</span></span><br><span class="line">write                       <span class="keyword">void</span>    函数  形参数: <span class="number">1</span>  变量空间: <span class="number">4</span></span><br><span class="line">x                   x       <span class="keyword">int</span>     形参  偏移量: <span class="number">4</span>  全局: <span class="number">0</span></span><br><span class="line">fibo                        <span class="keyword">int</span>     函数  形参数: <span class="number">1</span>  变量空间: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">1</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">a                   V_1     <span class="keyword">int</span>     形参  偏移量: <span class="number">12</span>  全局: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">********************当前复合语句符号表状态**************************</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">0</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">read                        <span class="keyword">int</span>     函数  形参数: <span class="number">0</span>  变量空间: <span class="number">12</span></span><br><span class="line">write                       <span class="keyword">void</span>    函数  形参数: <span class="number">1</span>  变量空间: <span class="number">4</span></span><br><span class="line">x                   x       <span class="keyword">int</span>     形参  偏移量: <span class="number">4</span>  全局: <span class="number">0</span></span><br><span class="line">fibo                        <span class="keyword">int</span>     函数  形参数: <span class="number">1</span>  变量空间: <span class="number">16</span></span><br><span class="line">main                        <span class="keyword">int</span>     函数  形参数: <span class="number">0</span>  变量空间: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">1</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">b                   V_2     <span class="keyword">int</span>     数组  偏移量: <span class="number">12</span>  全局: <span class="number">0</span>  <span class="number">2</span>维：<span class="number">5</span> <span class="number">5</span> </span><br><span class="line">i                   V_3     <span class="keyword">int</span>     变量  偏移量: <span class="number">112</span>  全局: <span class="number">0</span></span><br><span class="line">j                   V_4     <span class="keyword">int</span>     变量  偏移量: <span class="number">116</span>  全局: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">0</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">read                        <span class="keyword">int</span>     函数  形参数: <span class="number">0</span>  变量空间: <span class="number">12</span></span><br><span class="line">write                       <span class="keyword">void</span>    函数  形参数: <span class="number">1</span>  变量空间: <span class="number">4</span></span><br><span class="line">x                   x       <span class="keyword">int</span>     形参  偏移量: <span class="number">4</span>  全局: <span class="number">0</span></span><br><span class="line">fibo                        <span class="keyword">int</span>     函数  形参数: <span class="number">1</span>  变量空间: <span class="number">16</span></span><br><span class="line">main                        <span class="keyword">int</span>     函数  形参数: <span class="number">0</span>  变量空间: <span class="number">120</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="quicksort-c"><a href="#quicksort-c" class="headerlink" title="quicksort.c"></a>quicksort.c</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br></pre></td><td class="code"><pre><span class="line">外部变量定义:</span><br><span class="line">    类 型 名: <span class="keyword">int</span>   </span><br><span class="line"></span><br><span class="line">    变量列表: </span><br><span class="line">               arr[<span class="number">20</span>]</span><br><span class="line">函数定义:</span><br><span class="line">    返回类型：<span class="keyword">int</span>   </span><br><span class="line"></span><br><span class="line">    函 数 名：QuickSort</span><br><span class="line">    形 参 表：</span><br><span class="line">              <span class="keyword">int</span>   </span><br><span class="line">              begin</span><br><span class="line">              <span class="keyword">int</span>   </span><br><span class="line">              end</span><br><span class="line">    函 数 体：  </span><br><span class="line">          说明部分:</span><br><span class="line">            类型：<span class="keyword">int</span>   </span><br><span class="line"></span><br><span class="line">            变量列表: </span><br><span class="line">                      tmp</span><br><span class="line">                      i</span><br><span class="line">                      j</span><br><span class="line">                      t</span><br><span class="line"></span><br><span class="line">          语句部分:</span><br><span class="line">            <span class="keyword">if</span>语句：</span><br><span class="line">              条件：</span><br><span class="line">                    &gt;</span><br><span class="line">                        begin</span><br><span class="line"></span><br><span class="line">                        end</span><br><span class="line"></span><br><span class="line">              <span class="keyword">if</span>子句：</span><br><span class="line">                    返回表达式：</span><br><span class="line">                        <span class="number">0</span></span><br><span class="line"></span><br><span class="line">            表达式语句：</span><br><span class="line">                赋值运算符：=</span><br><span class="line">                  左值表达式：</span><br><span class="line">                                tmp</span><br><span class="line">                  右值表达式：</span><br><span class="line">                                arr</span><br><span class="line">                                          <span class="number">1</span>个下标:</span><br><span class="line"></span><br><span class="line">                                                begin</span><br><span class="line"></span><br><span class="line">            表达式语句：</span><br><span class="line">                赋值运算符：=</span><br><span class="line">                  左值表达式：</span><br><span class="line">                                i</span><br><span class="line">                  右值表达式：</span><br><span class="line">                                begin</span><br><span class="line"></span><br><span class="line">            表达式语句：</span><br><span class="line">                赋值运算符：=</span><br><span class="line">                  左值表达式：</span><br><span class="line">                                j</span><br><span class="line">                  右值表达式：</span><br><span class="line">                                end</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span>语句：</span><br><span class="line">              循环条件：</span><br><span class="line">                    !=</span><br><span class="line">                        i</span><br><span class="line"></span><br><span class="line">                        j</span><br><span class="line"></span><br><span class="line">              循环体：</span><br><span class="line">                    复合语句：</span><br><span class="line">                      语句部分:</span><br><span class="line">                        <span class="keyword">while</span>语句：</span><br><span class="line">                          循环条件：</span><br><span class="line">                                &amp;&amp;</span><br><span class="line">                                    &gt;=</span><br><span class="line">                                        arr</span><br><span class="line">                                                  <span class="number">1</span>个下标:</span><br><span class="line"></span><br><span class="line">                                                        j</span><br><span class="line"></span><br><span class="line">                                        tmp</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                                    &gt;</span><br><span class="line">                                        j</span><br><span class="line"></span><br><span class="line">                                        i</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                          循环体：</span><br><span class="line">                                表达式语句：</span><br><span class="line">                                    单目：N--</span><br><span class="line">                                            j</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">while</span>语句：</span><br><span class="line">                          循环条件：</span><br><span class="line">                                &amp;&amp;</span><br><span class="line">                                    &lt;=</span><br><span class="line">                                        arr</span><br><span class="line">                                                  <span class="number">1</span>个下标:</span><br><span class="line"></span><br><span class="line">                                                        i</span><br><span class="line"></span><br><span class="line">                                        tmp</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                                    &gt;</span><br><span class="line">                                        j</span><br><span class="line"></span><br><span class="line">                                        i</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                          循环体：</span><br><span class="line">                                表达式语句：</span><br><span class="line">                                    单目：N++</span><br><span class="line">                                            i</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">if</span>语句：</span><br><span class="line">                          条件：</span><br><span class="line">                                &gt;</span><br><span class="line">                                    j</span><br><span class="line"></span><br><span class="line">                                    i</span><br><span class="line"></span><br><span class="line">                          <span class="keyword">if</span>子句：</span><br><span class="line">                                复合语句：</span><br><span class="line">                                  语句部分:</span><br><span class="line">                                    表达式语句：</span><br><span class="line">                                        赋值运算符：=</span><br><span class="line">                                          左值表达式：</span><br><span class="line">                                                        t</span><br><span class="line">                                          右值表达式：</span><br><span class="line">                                                        arr</span><br><span class="line">                                                                  <span class="number">1</span>个下标:</span><br><span class="line"></span><br><span class="line">                                                                        i</span><br><span class="line"></span><br><span class="line">                                    表达式语句：</span><br><span class="line">                                        赋值运算符：=</span><br><span class="line">                                          左值表达式：</span><br><span class="line">                                                        arr</span><br><span class="line">                                                                  <span class="number">1</span>个下标:</span><br><span class="line"></span><br><span class="line">                                                                        i</span><br><span class="line">                                          右值表达式：</span><br><span class="line">                                                        arr</span><br><span class="line">                                                                  <span class="number">1</span>个下标:</span><br><span class="line"></span><br><span class="line">                                                                        j</span><br><span class="line"></span><br><span class="line">                                    表达式语句：</span><br><span class="line">                                        赋值运算符：=</span><br><span class="line">                                          左值表达式：</span><br><span class="line">                                                        arr</span><br><span class="line">                                                                  <span class="number">1</span>个下标:</span><br><span class="line"></span><br><span class="line">                                                                        j</span><br><span class="line">                                          右值表达式：</span><br><span class="line">                                                        t</span><br><span class="line"></span><br><span class="line">            表达式语句：</span><br><span class="line">                赋值运算符：=</span><br><span class="line">                  左值表达式：</span><br><span class="line">                                arr</span><br><span class="line">                                          <span class="number">1</span>个下标:</span><br><span class="line"></span><br><span class="line">                                                begin</span><br><span class="line">                  右值表达式：</span><br><span class="line">                                arr</span><br><span class="line">                                          <span class="number">1</span>个下标:</span><br><span class="line"></span><br><span class="line">                                                i</span><br><span class="line"></span><br><span class="line">            表达式语句：</span><br><span class="line">                赋值运算符：=</span><br><span class="line">                  左值表达式：</span><br><span class="line">                                arr</span><br><span class="line">                                          <span class="number">1</span>个下标:</span><br><span class="line"></span><br><span class="line">                                                i</span><br><span class="line">                  右值表达式：</span><br><span class="line">                                tmp</span><br><span class="line"></span><br><span class="line">            函数调用: 函数名：QuickSort</span><br><span class="line">                      <span class="number">2</span>个实参表达式:</span><br><span class="line"></span><br><span class="line">                          begin</span><br><span class="line">                          -</span><br><span class="line">                              i</span><br><span class="line"></span><br><span class="line">                              <span class="number">1</span></span><br><span class="line"></span><br><span class="line">            函数调用: 函数名：QuickSort</span><br><span class="line">                      <span class="number">2</span>个实参表达式:</span><br><span class="line"></span><br><span class="line">                          +</span><br><span class="line">                              i</span><br><span class="line"></span><br><span class="line">                              <span class="number">1</span></span><br><span class="line"></span><br><span class="line">                          end</span><br><span class="line">            返回表达式：</span><br><span class="line">                <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">函数定义:</span><br><span class="line">    返回类型：<span class="keyword">int</span>   </span><br><span class="line"></span><br><span class="line">    函 数 名：main</span><br><span class="line">    形 参 表：无</span><br><span class="line">    函 数 体：  </span><br><span class="line">          说明部分:</span><br><span class="line">            类型：<span class="keyword">int</span>   </span><br><span class="line"></span><br><span class="line">            变量列表: </span><br><span class="line">                      i</span><br><span class="line">                      n</span><br><span class="line"></span><br><span class="line">          语句部分:</span><br><span class="line">            表达式语句：</span><br><span class="line">                赋值运算符：=</span><br><span class="line">                  左值表达式：</span><br><span class="line">                                n</span><br><span class="line">                  右值表达式：</span><br><span class="line">                                函数调用: 函数名：read &lt;无实参表达式&gt;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>语句：</span><br><span class="line">              单次表达式：</span><br><span class="line">                    赋值运算符：=</span><br><span class="line">                      左值表达式：</span><br><span class="line">                                    i</span><br><span class="line">                      右值表达式：</span><br><span class="line">                                    <span class="number">1</span></span><br><span class="line">              循环条件：</span><br><span class="line">                    &lt;=</span><br><span class="line">                        i</span><br><span class="line"></span><br><span class="line">                        n</span><br><span class="line"></span><br><span class="line">              末尾循环体：</span><br><span class="line">                    单目：N++</span><br><span class="line">                            i</span><br><span class="line">              循环体：</span><br><span class="line">                    表达式语句：</span><br><span class="line">                        赋值运算符：=</span><br><span class="line">                          左值表达式：</span><br><span class="line">                                        arr</span><br><span class="line">                                                  <span class="number">1</span>个下标:</span><br><span class="line"></span><br><span class="line">                                                        i</span><br><span class="line">                          右值表达式：</span><br><span class="line">                                        函数调用: 函数名：read &lt;无实参表达式&gt;</span><br><span class="line"></span><br><span class="line">            函数调用: 函数名：QuickSort</span><br><span class="line">                      <span class="number">2</span>个实参表达式:</span><br><span class="line"></span><br><span class="line">                          <span class="number">1</span></span><br><span class="line">                          n</span><br><span class="line">            <span class="keyword">for</span>语句：</span><br><span class="line">              单次表达式：</span><br><span class="line">                    赋值运算符：=</span><br><span class="line">                      左值表达式：</span><br><span class="line">                                    i</span><br><span class="line">                      右值表达式：</span><br><span class="line">                                    <span class="number">1</span></span><br><span class="line">              循环条件：</span><br><span class="line">                    &lt;=</span><br><span class="line">                        i</span><br><span class="line"></span><br><span class="line">                        n</span><br><span class="line"></span><br><span class="line">              末尾循环体：</span><br><span class="line">                    单目：N++</span><br><span class="line">                            i</span><br><span class="line">              循环体：</span><br><span class="line">                    函数调用: 函数名：write</span><br><span class="line">                              <span class="number">1</span>个实参表达式:</span><br><span class="line"></span><br><span class="line">                                  arr</span><br><span class="line">                                            <span class="number">1</span>个下标:</span><br><span class="line"></span><br><span class="line">                                                  i</span><br><span class="line">            返回表达式：</span><br><span class="line">                <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">********************当前复合语句符号表状态**************************</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">0</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">read                        <span class="keyword">int</span>     函数  形参数: <span class="number">0</span>  变量空间: <span class="number">12</span></span><br><span class="line">write                       <span class="keyword">void</span>    函数  形参数: <span class="number">1</span>  变量空间: <span class="number">4</span></span><br><span class="line">x                   x       <span class="keyword">int</span>     形参  偏移量: <span class="number">4</span>  全局: <span class="number">0</span></span><br><span class="line">arr                 V_1     <span class="keyword">int</span>     数组  偏移量: <span class="number">0</span>  全局: <span class="number">1</span>  <span class="number">1</span>维：<span class="number">20</span> </span><br><span class="line">QuickSort                   <span class="keyword">int</span>     函数  形参数: <span class="number">2</span>  变量空间: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">1</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">begin               V_2     <span class="keyword">int</span>     形参  偏移量: <span class="number">12</span>  全局: <span class="number">0</span></span><br><span class="line">end                 V_3     <span class="keyword">int</span>     形参  偏移量: <span class="number">16</span>  全局: <span class="number">0</span></span><br><span class="line">tmp                 V_4     <span class="keyword">int</span>     变量  偏移量: <span class="number">20</span>  全局: <span class="number">0</span></span><br><span class="line">i                   V_5     <span class="keyword">int</span>     变量  偏移量: <span class="number">24</span>  全局: <span class="number">0</span></span><br><span class="line">j                   V_6     <span class="keyword">int</span>     变量  偏移量: <span class="number">28</span>  全局: <span class="number">0</span></span><br><span class="line">t                   V_7     <span class="keyword">int</span>     变量  偏移量: <span class="number">32</span>  全局: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">2</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">  空 表</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">3</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">  空 表</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">********************当前复合语句符号表状态**************************</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">0</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">read                        <span class="keyword">int</span>     函数  形参数: <span class="number">0</span>  变量空间: <span class="number">12</span></span><br><span class="line">write                       <span class="keyword">void</span>    函数  形参数: <span class="number">1</span>  变量空间: <span class="number">4</span></span><br><span class="line">x                   x       <span class="keyword">int</span>     形参  偏移量: <span class="number">4</span>  全局: <span class="number">0</span></span><br><span class="line">arr                 V_1     <span class="keyword">int</span>     数组  偏移量: <span class="number">0</span>  全局: <span class="number">1</span>  <span class="number">1</span>维：<span class="number">20</span> </span><br><span class="line">QuickSort                   <span class="keyword">int</span>     函数  形参数: <span class="number">2</span>  变量空间: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">1</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">begin               V_2     <span class="keyword">int</span>     形参  偏移量: <span class="number">12</span>  全局: <span class="number">0</span></span><br><span class="line">end                 V_3     <span class="keyword">int</span>     形参  偏移量: <span class="number">16</span>  全局: <span class="number">0</span></span><br><span class="line">tmp                 V_4     <span class="keyword">int</span>     变量  偏移量: <span class="number">20</span>  全局: <span class="number">0</span></span><br><span class="line">i                   V_5     <span class="keyword">int</span>     变量  偏移量: <span class="number">24</span>  全局: <span class="number">0</span></span><br><span class="line">j                   V_6     <span class="keyword">int</span>     变量  偏移量: <span class="number">28</span>  全局: <span class="number">0</span></span><br><span class="line">t                   V_7     <span class="keyword">int</span>     变量  偏移量: <span class="number">32</span>  全局: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">2</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">  空 表</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">********************当前复合语句符号表状态**************************</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">0</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">read                        <span class="keyword">int</span>     函数  形参数: <span class="number">0</span>  变量空间: <span class="number">12</span></span><br><span class="line">write                       <span class="keyword">void</span>    函数  形参数: <span class="number">1</span>  变量空间: <span class="number">4</span></span><br><span class="line">x                   x       <span class="keyword">int</span>     形参  偏移量: <span class="number">4</span>  全局: <span class="number">0</span></span><br><span class="line">arr                 V_1     <span class="keyword">int</span>     数组  偏移量: <span class="number">0</span>  全局: <span class="number">1</span>  <span class="number">1</span>维：<span class="number">20</span> </span><br><span class="line">QuickSort                   <span class="keyword">int</span>     函数  形参数: <span class="number">2</span>  变量空间: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">1</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">begin               V_2     <span class="keyword">int</span>     形参  偏移量: <span class="number">12</span>  全局: <span class="number">0</span></span><br><span class="line">end                 V_3     <span class="keyword">int</span>     形参  偏移量: <span class="number">16</span>  全局: <span class="number">0</span></span><br><span class="line">tmp                 V_4     <span class="keyword">int</span>     变量  偏移量: <span class="number">20</span>  全局: <span class="number">0</span></span><br><span class="line">i                   V_5     <span class="keyword">int</span>     变量  偏移量: <span class="number">24</span>  全局: <span class="number">0</span></span><br><span class="line">j                   V_6     <span class="keyword">int</span>     变量  偏移量: <span class="number">28</span>  全局: <span class="number">0</span></span><br><span class="line">t                   V_7     <span class="keyword">int</span>     变量  偏移量: <span class="number">32</span>  全局: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">********************当前复合语句符号表状态**************************</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">0</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">read                        <span class="keyword">int</span>     函数  形参数: <span class="number">0</span>  变量空间: <span class="number">12</span></span><br><span class="line">write                       <span class="keyword">void</span>    函数  形参数: <span class="number">1</span>  变量空间: <span class="number">4</span></span><br><span class="line">x                   x       <span class="keyword">int</span>     形参  偏移量: <span class="number">4</span>  全局: <span class="number">0</span></span><br><span class="line">arr                 V_1     <span class="keyword">int</span>     数组  偏移量: <span class="number">0</span>  全局: <span class="number">1</span>  <span class="number">1</span>维：<span class="number">20</span> </span><br><span class="line">QuickSort                   <span class="keyword">int</span>     函数  形参数: <span class="number">2</span>  变量空间: <span class="number">36</span></span><br><span class="line">main                        <span class="keyword">int</span>     函数  形参数: <span class="number">0</span>  变量空间: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">1</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">i                   V_8     <span class="keyword">int</span>     变量  偏移量: <span class="number">12</span>  全局: <span class="number">0</span></span><br><span class="line">n                   V_9     <span class="keyword">int</span>     变量  偏移量: <span class="number">16</span>  全局: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">0</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">read                        <span class="keyword">int</span>     函数  形参数: <span class="number">0</span>  变量空间: <span class="number">12</span></span><br><span class="line">write                       <span class="keyword">void</span>    函数  形参数: <span class="number">1</span>  变量空间: <span class="number">4</span></span><br><span class="line">x                   x       <span class="keyword">int</span>     形参  偏移量: <span class="number">4</span>  全局: <span class="number">0</span></span><br><span class="line">arr                 V_1     <span class="keyword">int</span>     数组  偏移量: <span class="number">0</span>  全局: <span class="number">1</span>  <span class="number">1</span>维：<span class="number">20</span> </span><br><span class="line">QuickSort                   <span class="keyword">int</span>     函数  形参数: <span class="number">2</span>  变量空间: <span class="number">36</span></span><br><span class="line">main                        <span class="keyword">int</span>     函数  形参数: <span class="number">0</span>  变量空间: <span class="number">20</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="4-2-2-中间代码生成："><a href="#4-2-2-中间代码生成：" class="headerlink" title="4.2.2 中间代码生成："></a>4.2.2 <strong>中间代码生成</strong>：</h4><p>检查中间代码是否正确表示了源代码的逻辑。</p>
<h5 id="fibo-ir"><a href="#fibo-ir" class="headerlink" title="fibo.ir"></a>fibo.ir</h5><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">FUNCTION</span>  fibo:</span><br><span class="line">  <span class="attribute">PARAM</span>  a</span><br><span class="line">  <span class="attribute">Temp_1</span> := #<span class="number">1</span></span><br><span class="line">  <span class="attribute">IF</span> V_<span class="number">6</span>==Temp_<span class="number">1</span> GOTO Label_<span class="number">1</span></span><br><span class="line">  <span class="attribute">GOTO</span>  Label_<span class="number">3</span></span><br><span class="line"><span class="attribute">LABEL</span> Label_<span class="number">3</span>:</span><br><span class="line">  <span class="attribute">Temp_2</span> := #<span class="number">2</span></span><br><span class="line">  <span class="attribute">IF</span> V_<span class="number">6</span>==Temp_<span class="number">2</span> GOTO Label_<span class="number">1</span></span><br><span class="line">  <span class="attribute">GOTO</span>  Label_<span class="number">2</span></span><br><span class="line"><span class="attribute">LABEL</span> Label_<span class="number">1</span>:</span><br><span class="line">  <span class="attribute">Temp_3</span> := #<span class="number">1</span></span><br><span class="line">  <span class="attribute">RETURN</span>  Temp_<span class="number">3</span></span><br><span class="line"><span class="attribute">LABEL</span> Label_<span class="number">2</span>:</span><br><span class="line">  <span class="attribute">Temp_4</span> := #<span class="number">1</span></span><br><span class="line">  <span class="attribute">Temp_5</span>:= V_<span class="number">6</span>-Temp_<span class="number">4</span></span><br><span class="line">  <span class="attribute">ARG</span>  Temp_<span class="number">5</span></span><br><span class="line">  <span class="attribute">Temp_6</span> := CALL fibo</span><br><span class="line">  <span class="attribute">Temp_7</span> := #<span class="number">2</span></span><br><span class="line">  <span class="attribute">Temp_8</span>:= V_<span class="number">6</span>-Temp_<span class="number">7</span></span><br><span class="line">  <span class="attribute">ARG</span>  Temp_<span class="number">8</span></span><br><span class="line">  <span class="attribute">Temp_9</span> := CALL fibo</span><br><span class="line">  <span class="attribute">Temp_10</span>:= Temp_<span class="number">6</span>+Temp_<span class="number">9</span></span><br><span class="line">  <span class="attribute">RETURN</span>  Temp_<span class="number">10</span></span><br><span class="line"><span class="attribute">FUNCTION</span>  main:</span><br><span class="line">  <span class="attribute">Temp_11</span> := CALL read</span><br><span class="line">  <span class="attribute">V_7</span> := Temp_<span class="number">11</span></span><br><span class="line">  <span class="attribute">Temp_12</span> := #<span class="number">1</span></span><br><span class="line">  <span class="attribute">V_9</span> := Temp_<span class="number">12</span></span><br><span class="line"><span class="attribute">LABEL</span> Label_<span class="number">4</span>:</span><br><span class="line">  <span class="attribute">IF</span> V_<span class="number">9</span>&lt;=V_<span class="number">7</span> GOTO Label_<span class="number">5</span></span><br><span class="line">  <span class="attribute">GOTO</span>  Label_<span class="number">6</span></span><br><span class="line"><span class="attribute">LABEL</span> Label_<span class="number">5</span>:</span><br><span class="line">  <span class="attribute">ARG</span>  V_<span class="number">9</span></span><br><span class="line">  <span class="attribute">Temp_13</span> := CALL fibo</span><br><span class="line">  <span class="attribute">V_8</span> := Temp_<span class="number">13</span></span><br><span class="line">  <span class="attribute">ARG</span>  V_<span class="number">8</span></span><br><span class="line">  <span class="attribute">CALL</span> write</span><br><span class="line">  <span class="attribute">Temp_14</span> := #<span class="number">1</span></span><br><span class="line">  <span class="attribute">Temp_15</span>:= V_<span class="number">9</span>+Temp_<span class="number">14</span></span><br><span class="line">  <span class="attribute">V_9</span> := Temp_<span class="number">15</span></span><br><span class="line">  <span class="attribute">GOTO</span>  Label_<span class="number">4</span></span><br><span class="line"><span class="attribute">LABEL</span> Label_<span class="number">6</span>:</span><br><span class="line">  <span class="attribute">Temp_16</span> := #<span class="number">1</span></span><br><span class="line">  <span class="attribute">RETURN</span>  Temp_<span class="number">16</span></span><br><span class="line">  <span class="attribute">End</span> Of Program</span><br></pre></td></tr></table></figure>
<h5 id="array-ir"><a href="#array-ir" class="headerlink" title="array.ir"></a>array.ir</h5><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">FUNCTION</span>  fibo:</span><br><span class="line">  <span class="attribute">PARAM</span>  a</span><br><span class="line">  <span class="attribute">Temp_1</span> := #<span class="number">1</span></span><br><span class="line">  <span class="attribute">IF</span> V_<span class="number">1</span>==Temp_<span class="number">1</span> GOTO Label_<span class="number">1</span></span><br><span class="line">  <span class="attribute">GOTO</span>  Label_<span class="number">3</span></span><br><span class="line"><span class="attribute">LABEL</span> Label_<span class="number">3</span>:</span><br><span class="line">  <span class="attribute">Temp_2</span> := #<span class="number">2</span></span><br><span class="line">  <span class="attribute">IF</span> V_<span class="number">1</span>==Temp_<span class="number">2</span> GOTO Label_<span class="number">1</span></span><br><span class="line">  <span class="attribute">GOTO</span>  Label_<span class="number">2</span></span><br><span class="line"><span class="attribute">LABEL</span> Label_<span class="number">1</span>:</span><br><span class="line">  <span class="attribute">Temp_3</span> := #<span class="number">1</span></span><br><span class="line">  <span class="attribute">RETURN</span>  Temp_<span class="number">3</span></span><br><span class="line"><span class="attribute">LABEL</span> Label_<span class="number">2</span>:</span><br><span class="line">  <span class="attribute">Temp_4</span> := #<span class="number">1</span></span><br><span class="line">  <span class="attribute">Temp_5</span>:= V_<span class="number">1</span>-Temp_<span class="number">4</span></span><br><span class="line">  <span class="attribute">ARG</span>  Temp_<span class="number">5</span></span><br><span class="line">  <span class="attribute">Temp_6</span> := CALL fibo</span><br><span class="line">  <span class="attribute">Temp_7</span> := #<span class="number">2</span></span><br><span class="line">  <span class="attribute">Temp_8</span>:= V_<span class="number">1</span>-Temp_<span class="number">7</span></span><br><span class="line">  <span class="attribute">ARG</span>  Temp_<span class="number">8</span></span><br><span class="line">  <span class="attribute">Temp_9</span> := CALL fibo</span><br><span class="line">  <span class="attribute">Temp_10</span>:= Temp_<span class="number">6</span>+Temp_<span class="number">9</span></span><br><span class="line">  <span class="attribute">RETURN</span>  Temp_<span class="number">10</span></span><br><span class="line"><span class="attribute">FUNCTION</span>  main:</span><br><span class="line">  <span class="attribute">Temp_11</span> := #<span class="number">0</span></span><br><span class="line">  <span class="attribute">V_3</span> := Temp_<span class="number">11</span></span><br><span class="line"><span class="attribute">LABEL</span> Label_<span class="number">4</span>:</span><br><span class="line">  <span class="attribute">Temp_12</span> := #<span class="number">5</span></span><br><span class="line">  <span class="attribute">IF</span> V_<span class="number">3</span>&lt;Temp_<span class="number">12</span> GOTO Label_<span class="number">5</span></span><br><span class="line">  <span class="attribute">GOTO</span>  Label_<span class="number">6</span></span><br><span class="line"><span class="attribute">LABEL</span> Label_<span class="number">5</span>:</span><br><span class="line">  <span class="attribute">Temp_14</span> := #<span class="number">0</span></span><br><span class="line">  <span class="attribute">V_4</span> := Temp_<span class="number">14</span></span><br><span class="line"><span class="attribute">LABEL</span> Label_<span class="number">8</span>:</span><br><span class="line">  <span class="attribute">Temp_15</span> := #<span class="number">5</span></span><br><span class="line">  <span class="attribute">IF</span> V_<span class="number">4</span>&lt;Temp_<span class="number">15</span> GOTO Label_<span class="number">9</span></span><br><span class="line">  <span class="attribute">GOTO</span>  Label_<span class="number">10</span></span><br><span class="line"><span class="attribute">LABEL</span> Label_<span class="number">9</span>:</span><br><span class="line">  <span class="attribute">Temp_17</span> := #<span class="number">5</span></span><br><span class="line">  <span class="attribute">Temp_18</span>:= V_<span class="number">3</span>*Temp_<span class="number">17</span></span><br><span class="line">  <span class="attribute">Temp_19</span>:= Temp_<span class="number">18</span>+V_<span class="number">4</span></span><br><span class="line">  <span class="attribute">Temp_20</span> := #<span class="number">4</span></span><br><span class="line">  <span class="attribute">Temp_21</span>:= Temp_<span class="number">19</span>*Temp_<span class="number">20</span></span><br><span class="line">  <span class="attribute">Temp_22</span>:= V_<span class="number">3</span>+V_<span class="number">4</span></span><br><span class="line">  <span class="attribute">V_2</span>[Temp_<span class="number">21</span>]:=Temp_<span class="number">22</span></span><br><span class="line"><span class="attribute">LABEL</span> Label_<span class="number">11</span>:</span><br><span class="line">  <span class="attribute">Temp_16</span>:= V_<span class="number">4</span>++</span><br><span class="line">  <span class="attribute">GOTO</span>  Label_<span class="number">8</span></span><br><span class="line"><span class="attribute">LABEL</span> Label_<span class="number">10</span>:</span><br><span class="line"><span class="attribute">LABEL</span> Label_<span class="number">7</span>:</span><br><span class="line">  <span class="attribute">Temp_13</span>:= V_<span class="number">3</span>++</span><br><span class="line">  <span class="attribute">GOTO</span>  Label_<span class="number">4</span></span><br><span class="line"><span class="attribute">LABEL</span> Label_<span class="number">6</span>:</span><br><span class="line">  <span class="attribute">Temp_23</span> := #<span class="number">0</span></span><br><span class="line">  <span class="attribute">V_3</span> := Temp_<span class="number">23</span></span><br><span class="line"><span class="attribute">LABEL</span> Label_<span class="number">12</span>:</span><br><span class="line">  <span class="attribute">Temp_24</span> := #<span class="number">5</span></span><br><span class="line">  <span class="attribute">IF</span> V_<span class="number">3</span>&lt;Temp_<span class="number">24</span> GOTO Label_<span class="number">13</span></span><br><span class="line">  <span class="attribute">GOTO</span>  Label_<span class="number">14</span></span><br><span class="line"><span class="attribute">LABEL</span> Label_<span class="number">13</span>:</span><br><span class="line">  <span class="attribute">Temp_26</span> := #<span class="number">5</span></span><br><span class="line">  <span class="attribute">Temp_27</span>:= V_<span class="number">3</span>*Temp_<span class="number">26</span></span><br><span class="line">  <span class="attribute">Temp_28</span>:= Temp_<span class="number">27</span>+V_<span class="number">3</span></span><br><span class="line">  <span class="attribute">Temp_29</span> := #<span class="number">4</span></span><br><span class="line">  <span class="attribute">Temp_30</span>:= Temp_<span class="number">28</span>*Temp_<span class="number">29</span></span><br><span class="line">  <span class="attribute">Temp_31</span>:=V_<span class="number">2</span>[Temp_<span class="number">30</span>]</span><br><span class="line">  <span class="attribute">ARG</span>  Temp_<span class="number">31</span></span><br><span class="line">  <span class="attribute">CALL</span> write</span><br><span class="line"><span class="attribute">LABEL</span> Label_<span class="number">15</span>:</span><br><span class="line">  <span class="attribute">Temp_25</span>:= V_<span class="number">3</span>++</span><br><span class="line">  <span class="attribute">GOTO</span>  Label_<span class="number">12</span></span><br><span class="line"><span class="attribute">LABEL</span> Label_<span class="number">14</span>:</span><br><span class="line">  <span class="attribute">Temp_32</span> := #<span class="number">1</span></span><br><span class="line">  <span class="attribute">Temp_33</span> := #<span class="number">5</span></span><br><span class="line">  <span class="attribute">Temp_34</span>:= Temp_<span class="number">32</span>*Temp_<span class="number">33</span></span><br><span class="line">  <span class="attribute">Temp_35</span> := #<span class="number">3</span></span><br><span class="line">  <span class="attribute">Temp_36</span>:= Temp_<span class="number">34</span>+Temp_<span class="number">35</span></span><br><span class="line">  <span class="attribute">Temp_37</span> := #<span class="number">4</span></span><br><span class="line">  <span class="attribute">Temp_38</span>:= Temp_<span class="number">36</span>*Temp_<span class="number">37</span></span><br><span class="line">  <span class="attribute">Temp_39</span>:=V_<span class="number">2</span>[Temp_<span class="number">38</span>]</span><br><span class="line">  <span class="attribute">ARG</span>  Temp_<span class="number">39</span></span><br><span class="line">  <span class="attribute">Temp_40</span> := CALL fibo</span><br><span class="line">  <span class="attribute">ARG</span>  Temp_<span class="number">40</span></span><br><span class="line">  <span class="attribute">CALL</span> write</span><br><span class="line">  <span class="attribute">Temp_41</span> := #<span class="number">0</span></span><br><span class="line">  <span class="attribute">RETURN</span>  Temp_<span class="number">41</span></span><br><span class="line">  <span class="attribute">End</span> Of Program</span><br></pre></td></tr></table></figure>
<h5 id="quicksort-ir"><a href="#quicksort-ir" class="headerlink" title="quicksort.ir"></a>quicksort.ir</h5><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line">----------------------------------------------------------------------</span><br><span class="line"><span class="function"><span class="keyword">FUNCTION</span>  <span class="title">QuickSort</span>:</span></span><br><span class="line">  PARAM  <span class="keyword">begin</span></span><br><span class="line">  PARAM  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">IF</span> V_2&gt;V_3 <span class="keyword">GOTO</span> Label_1</span><br><span class="line">  <span class="keyword">GOTO</span>  Label_2</span><br><span class="line"><span class="keyword">LABEL</span> Label_1:</span><br><span class="line">  Temp_1 := <span class="string">#0</span></span><br><span class="line">  RETURN  Temp_1</span><br><span class="line"><span class="keyword">LABEL</span> Label_2:</span><br><span class="line">  Temp_2 := <span class="string">#4</span></span><br><span class="line">  Temp_3:= V_2*Temp_2</span><br><span class="line">  Temp_4:=V_1[Temp_3]</span><br><span class="line">  V_4 := Temp_4</span><br><span class="line">  V_5 := V_2</span><br><span class="line">  V_6 := V_3</span><br><span class="line"><span class="keyword">LABEL</span> Label_3:</span><br><span class="line">  <span class="keyword">IF</span> V_5!=V_6 <span class="keyword">GOTO</span> Label_4</span><br><span class="line">  <span class="keyword">GOTO</span>  Label_5</span><br><span class="line"><span class="keyword">LABEL</span> Label_4:</span><br><span class="line"><span class="keyword">LABEL</span> Label_6:</span><br><span class="line">  Temp_5 := <span class="string">#4</span></span><br><span class="line">  Temp_6:= V_6*Temp_5</span><br><span class="line">  Temp_7:=V_1[Temp_6]</span><br><span class="line">  <span class="keyword">IF</span> Temp_7&gt;=V_4 <span class="keyword">GOTO</span> Label_9</span><br><span class="line">  <span class="keyword">GOTO</span>  Label_8</span><br><span class="line"><span class="keyword">LABEL</span> Label_9:</span><br><span class="line">  <span class="keyword">IF</span> V_6&gt;V_5 <span class="keyword">GOTO</span> Label_7</span><br><span class="line">  <span class="keyword">GOTO</span>  Label_8</span><br><span class="line"><span class="keyword">LABEL</span> Label_7:</span><br><span class="line">  Temp_8:= V_6--</span><br><span class="line">  <span class="keyword">GOTO</span>  Label_6</span><br><span class="line"><span class="keyword">LABEL</span> Label_8:</span><br><span class="line"><span class="keyword">LABEL</span> Label_10:</span><br><span class="line">  Temp_9 := <span class="string">#4</span></span><br><span class="line">  Temp_10:= V_5*Temp_9</span><br><span class="line">  Temp_11:=V_1[Temp_10]</span><br><span class="line">  <span class="keyword">IF</span> Temp_11&lt;=V_4 <span class="keyword">GOTO</span> Label_13</span><br><span class="line">  <span class="keyword">GOTO</span>  Label_12</span><br><span class="line"><span class="keyword">LABEL</span> Label_13:</span><br><span class="line">  <span class="keyword">IF</span> V_6&gt;V_5 <span class="keyword">GOTO</span> Label_11</span><br><span class="line">  <span class="keyword">GOTO</span>  Label_12</span><br><span class="line"><span class="keyword">LABEL</span> Label_11:</span><br><span class="line">  Temp_12:= V_5++</span><br><span class="line">  <span class="keyword">GOTO</span>  Label_10</span><br><span class="line"><span class="keyword">LABEL</span> Label_12:</span><br><span class="line">  <span class="keyword">IF</span> V_6&gt;V_5 <span class="keyword">GOTO</span> Label_14</span><br><span class="line">  <span class="keyword">GOTO</span>  Label_15</span><br><span class="line"><span class="keyword">LABEL</span> Label_14:</span><br><span class="line">  Temp_13 := <span class="string">#4</span></span><br><span class="line">  Temp_14:= V_5*Temp_13</span><br><span class="line">  Temp_15:=V_1[Temp_14]</span><br><span class="line">  V_7 := Temp_15</span><br><span class="line">  Temp_16 := <span class="string">#4</span></span><br><span class="line">  Temp_17:= V_5*Temp_16</span><br><span class="line">  Temp_18 := <span class="string">#4</span></span><br><span class="line">  Temp_19:= V_6*Temp_18</span><br><span class="line">  Temp_20:=V_1[Temp_19]</span><br><span class="line">  V_1[Temp_17]:=Temp_20</span><br><span class="line">  Temp_21 := <span class="string">#4</span></span><br><span class="line">  Temp_22:= V_6*Temp_21</span><br><span class="line">  V_1[Temp_22]:=V_7</span><br><span class="line"><span class="keyword">LABEL</span> Label_15:</span><br><span class="line">  <span class="keyword">GOTO</span>  Label_3</span><br><span class="line"><span class="keyword">LABEL</span> Label_5:</span><br><span class="line">  Temp_23 := <span class="string">#4</span></span><br><span class="line">  Temp_24:= V_2*Temp_23</span><br><span class="line">  Temp_25 := <span class="string">#4</span></span><br><span class="line">  Temp_26:= V_5*Temp_25</span><br><span class="line">  Temp_27:=V_1[Temp_26]</span><br><span class="line">  V_1[Temp_24]:=Temp_27</span><br><span class="line">  Temp_28 := <span class="string">#4</span></span><br><span class="line">  Temp_29:= V_5*Temp_28</span><br><span class="line">  V_1[Temp_29]:=V_4</span><br><span class="line">  Temp_30 := <span class="string">#1</span></span><br><span class="line">  Temp_31:= V_5-Temp_30</span><br><span class="line">  ARG  V_2</span><br><span class="line">  ARG  Temp_31</span><br><span class="line">  Temp_32 := CALL QuickSort</span><br><span class="line">  Temp_33 := <span class="string">#1</span></span><br><span class="line">  Temp_34:= V_5+Temp_33</span><br><span class="line">  ARG  Temp_34</span><br><span class="line">  ARG  V_3</span><br><span class="line">  Temp_35 := CALL QuickSort</span><br><span class="line">  Temp_36 := <span class="string">#0</span></span><br><span class="line">  RETURN  Temp_36</span><br><span class="line"><span class="function"><span class="keyword">FUNCTION</span>  <span class="title">main</span>:</span></span><br><span class="line">  Temp_37 := CALL <span class="keyword">read</span></span><br><span class="line">  V_9 := Temp_37</span><br><span class="line">  Temp_38 := <span class="string">#1</span></span><br><span class="line">  V_8 := Temp_38</span><br><span class="line"><span class="keyword">LABEL</span> Label_16:</span><br><span class="line">  <span class="keyword">IF</span> V_8&lt;=V_9 <span class="keyword">GOTO</span> Label_17</span><br><span class="line">  <span class="keyword">GOTO</span>  Label_18</span><br><span class="line"><span class="keyword">LABEL</span> Label_17:</span><br><span class="line">  Temp_40 := <span class="string">#4</span></span><br><span class="line">  Temp_41:= V_8*Temp_40</span><br><span class="line">  Temp_42 := CALL <span class="keyword">read</span></span><br><span class="line">  V_1[Temp_41]:=Temp_42</span><br><span class="line"><span class="keyword">LABEL</span> Label_19:</span><br><span class="line">  Temp_39:= V_8++</span><br><span class="line">  <span class="keyword">GOTO</span>  Label_16</span><br><span class="line"><span class="keyword">LABEL</span> Label_18:</span><br><span class="line">  Temp_43 := <span class="string">#1</span></span><br><span class="line">  ARG  Temp_43</span><br><span class="line">  ARG  V_9</span><br><span class="line">  Temp_44 := CALL QuickSort</span><br><span class="line">  Temp_45 := <span class="string">#1</span></span><br><span class="line">  V_8 := Temp_45</span><br><span class="line"><span class="keyword">LABEL</span> Label_20:</span><br><span class="line">  <span class="keyword">IF</span> V_8&lt;=V_9 <span class="keyword">GOTO</span> Label_21</span><br><span class="line">  <span class="keyword">GOTO</span>  Label_22</span><br><span class="line"><span class="keyword">LABEL</span> Label_21:</span><br><span class="line">  Temp_47 := <span class="string">#4</span></span><br><span class="line">  Temp_48:= V_8*Temp_47</span><br><span class="line">  Temp_49:=V_1[Temp_48]</span><br><span class="line">  ARG  Temp_49</span><br><span class="line">  CALL <span class="keyword">write</span></span><br><span class="line"><span class="keyword">LABEL</span> Label_23:</span><br><span class="line">  Temp_46:= V_8++</span><br><span class="line">  <span class="keyword">GOTO</span>  Label_20</span><br><span class="line"><span class="keyword">LABEL</span> Label_22:</span><br><span class="line">  Temp_50 := <span class="string">#0</span></span><br><span class="line">  RETURN  Temp_50</span><br><span class="line">  <span class="keyword">End</span> <span class="keyword">Of</span> <span class="keyword">Program</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="4-2-3-目标代码的执行："><a href="#4-2-3-目标代码的执行：" class="headerlink" title="4.2.3 目标代码的执行："></a>4.2.3 <strong>目标代码的执行</strong>：</h4><p>运行目标代码，验证程序输出是否符合预期。本部分将使用qtspim运行生成的MIPS代码：</p>
<h5 id="fibo-c-1"><a href="#fibo-c-1" class="headerlink" title="fibo.c"></a>fibo.c</h5><p><img src="/report/ccd/image-20231212194950510.png" alt="image-20231212194950510"></p>
<p>可以看到，程序正确打印除了斐波那契数组的前十项，通过了测试。</p>
<h5 id="array-c-1"><a href="#array-c-1" class="headerlink" title="array.c"></a>array.c</h5><p><img src="/report/ccd/image-20231212195109410.png" alt="image-20231212195109410"></p>
<p>可以看到，程序正确正确打印了多维数组b中对角线的元素，成功验证了多维数组的正确性。</p>
<h5 id="quicksort-c-1"><a href="#quicksort-c-1" class="headerlink" title="quicksort.c"></a>quicksort.c</h5><p><img src="/report/ccd/image-20231212195333793.png" alt="image-20231212195333793"></p>
<p>可以看到，当输入了五个元素的一位数组之后，程序可以正确调用快速排序，使得原数组有序递增，完成了集成测试。</p>
<h3 id="4-3-报错功能测试"><a href="#4-3-报错功能测试" class="headerlink" title="4.3 报错功能测试"></a>4.3 报错功能测试</h3><h4 id="4-3-1-概述"><a href="#4-3-1-概述" class="headerlink" title="4.3.1 概述"></a>4.3.1 概述</h4><ol>
<li><strong>语法错误检测</strong>：输入具有语法错误的代码，验证编译器是否能够准确地识别并报告错误。</li>
<li><strong>语义错误检测</strong>：输入违反语义规则的代码（如类型不匹配，未声明变量等），检查编译器的错误报告功能。</li>
</ol>
<h4 id="4-3-2-测试代码-error-c"><a href="#4-3-2-测试代码-error-c" class="headerlink" title="4.3.2 测试代码 error.c"></a>4.3.2 测试代码 error.c</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fibo</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">jump</span><span class="params">(<span class="keyword">int</span> a)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a; </span><br><span class="line">    <span class="keyword">int</span> a;</span><br><span class="line">    <span class="keyword">int</span> b;</span><br><span class="line">    c = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">a</span>(<span class="number">4</span>);</span><br><span class="line">    fibo=<span class="number">4</span>;</span><br><span class="line">    <span class="built_in">test</span>(<span class="number">4</span>);</span><br><span class="line">    <span class="built_in">fibo</span>(<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">continue</span>;</span><br><span class="line">    <span class="built_in"><span class="keyword">switch</span></span> (a)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> b:</span><br><span class="line">        <span class="comment">/* code */</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">jump</span>(<span class="number">4</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fibo</span> <span class="params">(<span class="keyword">int</span> a)</span> </span>&#123; <span class="comment">// compute the Fibonacci sequence recursively </span></span><br><span class="line">    <span class="keyword">if</span> (a == <span class="number">1</span> || a == <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">fibo</span>(a - <span class="number">1</span>)+<span class="built_in">fibo</span>(a - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-3-3-运行结果"><a href="#4-3-3-运行结果" class="headerlink" title="4.3.3 运行结果"></a>4.3.3 运行结果</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br></pre></td><td class="code"><pre><span class="line">函数定义:</span><br><span class="line">    返回类型：<span class="keyword">int</span>   </span><br><span class="line"></span><br><span class="line">    函 数 名：fibo</span><br><span class="line">    形 参 表：</span><br><span class="line">              <span class="keyword">int</span>   </span><br><span class="line">              a</span><br><span class="line">              <span class="keyword">int</span>   </span><br><span class="line">              b</span><br><span class="line"></span><br><span class="line">函数定义:</span><br><span class="line">    返回类型：<span class="keyword">int</span>   </span><br><span class="line"></span><br><span class="line">    函 数 名：jump</span><br><span class="line">    形 参 表：</span><br><span class="line">              <span class="keyword">int</span>   </span><br><span class="line">              a</span><br><span class="line"></span><br><span class="line">函数定义:</span><br><span class="line">    返回类型：<span class="keyword">int</span>   </span><br><span class="line"></span><br><span class="line">    函 数 名：main</span><br><span class="line">    形 参 表：无</span><br><span class="line">    函 数 体：  </span><br><span class="line">          说明部分:</span><br><span class="line">            类型：<span class="keyword">int</span>   </span><br><span class="line"></span><br><span class="line">            变量列表: </span><br><span class="line">                      a</span><br><span class="line"></span><br><span class="line">            类型：<span class="keyword">int</span>   </span><br><span class="line"></span><br><span class="line">            变量列表: </span><br><span class="line">                      a</span><br><span class="line"></span><br><span class="line">            类型：<span class="keyword">int</span>   </span><br><span class="line"></span><br><span class="line">            变量列表: </span><br><span class="line">                      b</span><br><span class="line"></span><br><span class="line">          语句部分:</span><br><span class="line">            表达式语句：</span><br><span class="line">                赋值运算符：=</span><br><span class="line">                  左值表达式：</span><br><span class="line">                                c</span><br><span class="line">                  右值表达式：</span><br><span class="line">                                <span class="number">0</span></span><br><span class="line"></span><br><span class="line">            函数调用: 函数名：a</span><br><span class="line">                      <span class="number">1</span>个实参表达式:</span><br><span class="line"></span><br><span class="line">                          <span class="number">4</span></span><br><span class="line">            表达式语句：</span><br><span class="line">                赋值运算符：=</span><br><span class="line">                  左值表达式：</span><br><span class="line">                                fibo</span><br><span class="line">                  右值表达式：</span><br><span class="line">                                <span class="number">4</span></span><br><span class="line"></span><br><span class="line">            函数调用: 函数名：test</span><br><span class="line">                      <span class="number">1</span>个实参表达式:</span><br><span class="line"></span><br><span class="line">                          <span class="number">4</span></span><br><span class="line">            函数调用: 函数名：fibo</span><br><span class="line">                      <span class="number">1</span>个实参表达式:</span><br><span class="line"></span><br><span class="line">                          <span class="number">3</span></span><br><span class="line">            <span class="keyword">break</span>语句</span><br><span class="line">            <span class="keyword">continue</span>语句</span><br><span class="line">            表达式：</span><br><span class="line">                a</span><br><span class="line">            Case部分:</span><br><span class="line">                常量Key：</span><br><span class="line">                    b</span><br><span class="line">                语句部分:</span><br><span class="line">                    <span class="keyword">break</span>语句</span><br><span class="line">                常量Key：</span><br><span class="line">                    <span class="number">3</span></span><br><span class="line">                常量Key：</span><br><span class="line">                    <span class="number">3</span></span><br><span class="line">            Default部分:</span><br><span class="line">                <span class="keyword">break</span>语句</span><br><span class="line">            函数调用: 函数名：jump</span><br><span class="line">                      <span class="number">1</span>个实参表达式:</span><br><span class="line"></span><br><span class="line">                          <span class="number">4</span></span><br><span class="line">            返回表达式：</span><br><span class="line">                <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">函数定义:</span><br><span class="line">    返回类型：<span class="keyword">int</span>   </span><br><span class="line"></span><br><span class="line">    函 数 名：fibo</span><br><span class="line">    形 参 表：</span><br><span class="line">              <span class="keyword">int</span>   </span><br><span class="line">              a</span><br><span class="line">    函 数 体：  </span><br><span class="line">          语句部分:</span><br><span class="line">            <span class="keyword">if</span>语句：</span><br><span class="line">              条件：</span><br><span class="line">                    ||</span><br><span class="line">                        ==</span><br><span class="line">                            a</span><br><span class="line"></span><br><span class="line">                            <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                        ==</span><br><span class="line">                            a</span><br><span class="line"></span><br><span class="line">                            <span class="number">2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">              <span class="keyword">if</span>子句：</span><br><span class="line">                    返回表达式：</span><br><span class="line">                        <span class="number">1</span></span><br><span class="line"></span><br><span class="line">            返回表达式：</span><br><span class="line">                +</span><br><span class="line">                    函数调用: 函数名：fibo</span><br><span class="line">                              <span class="number">1</span>个实参表达式:</span><br><span class="line"></span><br><span class="line">                                  -</span><br><span class="line">                                      a</span><br><span class="line"></span><br><span class="line">                                      <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                    函数调用: 函数名：fibo</span><br><span class="line">                              <span class="number">1</span>个实参表达式:</span><br><span class="line"></span><br><span class="line">                                  -</span><br><span class="line">                                      a</span><br><span class="line"></span><br><span class="line">                                      <span class="number">2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">********************当前复合语句符号表状态**************************</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">0</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">read                        <span class="keyword">int</span>     函数  形参数: <span class="number">0</span>  变量空间: <span class="number">12</span></span><br><span class="line">write                       <span class="keyword">void</span>    函数  形参数: <span class="number">1</span>  变量空间: <span class="number">4</span></span><br><span class="line">x                   x       <span class="keyword">int</span>     形参  偏移量: <span class="number">4</span>  全局: <span class="number">0</span></span><br><span class="line">fibo                        <span class="keyword">int</span>     函数  形参数: <span class="number">2</span>  变量空间: <span class="number">12</span></span><br><span class="line">jump                        <span class="keyword">int</span>     函数  形参数: <span class="number">1</span>  变量空间: <span class="number">12</span></span><br><span class="line">main                        <span class="keyword">int</span>     函数  形参数: <span class="number">0</span>  变量空间: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">1</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">a                   V_1     <span class="keyword">int</span>     变量  偏移量: <span class="number">12</span>  全局: <span class="number">0</span></span><br><span class="line">b                   V_2     <span class="keyword">int</span>     变量  偏移量: <span class="number">16</span>  全局: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">********************当前复合语句符号表状态**************************</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">0</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">read                        <span class="keyword">int</span>     函数  形参数: <span class="number">0</span>  变量空间: <span class="number">12</span></span><br><span class="line">write                       <span class="keyword">void</span>    函数  形参数: <span class="number">1</span>  变量空间: <span class="number">4</span></span><br><span class="line">x                   x       <span class="keyword">int</span>     形参  偏移量: <span class="number">4</span>  全局: <span class="number">0</span></span><br><span class="line">fibo                        <span class="keyword">int</span>     函数  形参数: <span class="number">2</span>  变量空间: <span class="number">12</span></span><br><span class="line">jump                        <span class="keyword">int</span>     函数  形参数: <span class="number">1</span>  变量空间: <span class="number">12</span></span><br><span class="line">main                        <span class="keyword">int</span>     函数  形参数: <span class="number">0</span>  变量空间: <span class="number">20</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">1</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">a                   V_3     <span class="keyword">int</span>     形参  偏移量: <span class="number">12</span>  全局: <span class="number">0</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"> 层号: <span class="number">0</span></span><br><span class="line"> 符 号 名           别名    类型    种 类   其它信息</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">read                        <span class="keyword">int</span>     函数  形参数: <span class="number">0</span>  变量空间: <span class="number">12</span></span><br><span class="line">write                       <span class="keyword">void</span>    函数  形参数: <span class="number">1</span>  变量空间: <span class="number">4</span></span><br><span class="line">x                   x       <span class="keyword">int</span>     形参  偏移量: <span class="number">4</span>  全局: <span class="number">0</span></span><br><span class="line">fibo                        <span class="keyword">int</span>     函数  形参数: <span class="number">2</span>  变量空间: <span class="number">16</span></span><br><span class="line">jump                        <span class="keyword">int</span>     函数  形参数: <span class="number">1</span>  变量空间: <span class="number">12</span></span><br><span class="line">main                        <span class="keyword">int</span>     函数  形参数: <span class="number">0</span>  变量空间: <span class="number">20</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">第<span class="number">5</span>行、第<span class="number">9</span>列处错误: 变量 a 重复定义</span><br><span class="line">第<span class="number">7</span>行、第<span class="number">7</span>列处错误: 引用未定义的符号 c</span><br><span class="line">第<span class="number">8</span>行、第<span class="number">8</span>列处错误: 对非函数名采用函数调用形式 </span><br><span class="line">第<span class="number">9</span>行、第<span class="number">9</span>列处错误: 对函数名采用非函数调用形式访问 </span><br><span class="line">第<span class="number">10</span>行、第<span class="number">11</span>列处错误: 引用未定义的函数 test</span><br><span class="line">第<span class="number">11</span>行、第<span class="number">11</span>列处错误: 实参表达式个数和形参不一致 </span><br><span class="line">第<span class="number">12</span>行、第<span class="number">10</span>列处错误: <span class="keyword">break</span>语句不在循环语句或<span class="keyword">switch</span>语句中</span><br><span class="line">第<span class="number">13</span>行、第<span class="number">13</span>列处错误: <span class="keyword">continue</span>语句不在循环语句中</span><br><span class="line">第<span class="number">19</span>行、第<span class="number">5</span>列处错误: <span class="keyword">case</span>中不是常量</span><br><span class="line">第<span class="number">23</span>行、第<span class="number">5</span>列处错误: <span class="keyword">switch</span>语句的key值相等</span><br><span class="line">第<span class="number">23</span>行、第<span class="number">5</span>列处错误: <span class="keyword">switch</span>语句的key值相等</span><br><span class="line">第<span class="number">31</span>行、第<span class="number">1</span>列处错误: 函数声明和定义的参数数目不同</span><br><span class="line">第<span class="number">30</span>行、第<span class="number">22</span>列处错误: 实参表达式个数和形参不一致 </span><br><span class="line">第<span class="number">30</span>行、第<span class="number">34</span>列处错误: 实参表达式个数和形参不一致 </span><br><span class="line">第<span class="number">30</span>行、第<span class="number">35</span>列处错误: 函数返回值类型与函数定义的返回值类型不匹配</span><br><span class="line">第<span class="number">24</span>行、第<span class="number">11</span>列处错误: 调用的函数未定义</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="4-4-系统的优点"><a href="#4-4-系统的优点" class="headerlink" title="4.4 系统的优点"></a>4.4 系统的优点</h3><ol>
<li><strong>强大的错误检测机制</strong>：编译器具有有效的错误检测和报告机制，能够及时发现语法和语义错误。</li>
<li><strong>高效的中间代码生成</strong>：中间代码生成步骤简洁高效，有助于优化最终的目标代码。</li>
<li><strong>目标代码优化</strong>：生成的MIPS汇编代码紧凑高效，适用于资源受限的系统。</li>
<li><strong>模块化设计</strong>：编译器采用模块化设计，便于维护和扩展。</li>
</ol>
<h3 id="4-5-系统的缺点"><a href="#4-5-系统的缺点" class="headerlink" title="4.5 系统的缺点"></a>4.5 系统的缺点</h3><ol>
<li><strong>性能优化有限</strong>：在某些情况下，编译器生成的代码可能不是最优的，尤其是在复杂表达式的处理上。</li>
<li><strong>资源消耗</strong>：对于大型程序，编译器可能会消耗较多的内存和CPU资源。</li>
<li><strong>用户界面</strong>：缺乏一个友好的用户界面，对于非专业用户来说可能不太友好。</li>
<li><strong>错误提示不够详细</strong>：在某些情况下，编译器的错误提示可能不够详细，使得用户难以快速定位问题所在。</li>
</ol>
<h2 id="5-实验小结与体会"><a href="#5-实验小结与体会" class="headerlink" title="5. 实验小结与体会"></a>5. 实验小结与体会</h2><p>通过本次”C minus”编译器的设计与实现实验，我深刻体会到了编译原理的复杂性与魅力。在这个过程中，我不仅加深了对编译器各个模块功能的理解，还学习到了如何将理论知识应用于实践中，解决实际问题。</p>
<h3 id="5-1-对编译器各个阶段的理解加深"><a href="#5-1-对编译器各个阶段的理解加深" class="headerlink" title="5.1 对编译器各个阶段的理解加深"></a>5.1 对编译器各个阶段的理解加深</h3><p>通过亲自设计并实现编译器的各个阶段，我对词法分析、语法分析、语义分析、中间代码生成、目标代码生成等环节有了更为深入的认识。特别是在处理复杂的语法结构和语义检查时，我意识到了精确定义语言规范的重要性。此外，中间代码的生成过程使我认识到了编译器如何将高级语言的抽象结构转换为接近机器语言的代码。</p>
<h3 id="5-2-编码实践与问题解决能力的提升"><a href="#5-2-编码实践与问题解决能力的提升" class="headerlink" title="5.2 编码实践与问题解决能力的提升"></a>5.2 编码实践与问题解决能力的提升</h3><p>在实验过程中，我遇到了诸如符号表管理不当、语法规则定义错误、中间代码生成逻辑不清晰等一系列问题。通过查阅资料、反复调试和优化代码，我不仅解决了这些问题，还锻炼了我的编码实践能力和问题解决能力。这些经验对我未来在软件开发领域的学习和工作将大有裨益。</p>
<h3 id="5-3-系统测试的重要性"><a href="#5-3-系统测试的重要性" class="headerlink" title="5.3 系统测试的重要性"></a>5.3 系统测试的重要性</h3><p>系统测试阶段使我认识到了测试在软件开发过程中的重要性。通过对编译器进行一系列的功能性和健壮性测试，我能够确保编译器的可靠性和稳定性。这一阶段的经历教会了我如何设计有效的测试用例，以及如何分析和利用测试结果来改进软件。</p>
<h3 id="5-4-对编译原理整体认识的提升"><a href="#5-4-对编译原理整体认识的提升" class="headerlink" title="5.4 对编译原理整体认识的提升"></a>5.4 对编译原理整体认识的提升</h3><p>在本实验中，我不仅学到了关于编译器具体实现的技术细节，更重要的是，我对编译原理作为一个整体的认识有了明显提升。我了解到编译器不仅仅是一个将高级语言代码转换为机器代码的工具，它还涵盖了代码优化、资源管理等多个方面，是计算机科学中极其重要的一环。</p>
<h3 id="5-5-深化理论知识，激发进一步学习的兴趣"><a href="#5-5-深化理论知识，激发进一步学习的兴趣" class="headerlink" title="5.5 深化理论知识，激发进一步学习的兴趣"></a>5.5 深化理论知识，激发进一步学习的兴趣</h3><p>通过这次实验，我对编译原理课程中学到的理论知识有了更深的理解和体会。实践过程中遇到的挑战和问题激发了我进一步深入学习编译原理以及相关计算机科学领域知识的兴趣。我相信这次实验经历将对我未来的学术和职业生涯产生长远的影响。</p>
<p>综上所述，本次”C minus”编译器的设计与实现实验是一次极其宝贵的学习经历。它不仅使我掌握了编译器的设计与实现技术，更重要的是，它提高了我的编程能力、问题解决能力，并且加深了我对编译原理这一学科的认识和兴趣。</p>
<h2 id="6-参考文献"><a href="#6-参考文献" class="headerlink" title="6. 参考文献"></a>6. 参考文献</h2><p>[1] 王生元 等. 编译原理(第三版). 北京：清华大学出版社，2001</p>
<p>[2] 胡伦俊等. 编译原理(第二版). 北京：电子工业出版社，2005</p>
<p>[3] 王元珍等. 80X86汇编语言程序设计. 武汉：华中科技大学出版社,2005</p>
<p>[4] 王雷等. 编译原理课程设计. 北京：机械工业出版社，2005</p>
<p>[5] 曹计昌等. C语言程序设计. 北京：科学出版社，2008</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">dekrt</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://dekrt.cn/report/ccd/">https://dekrt.cn/report/ccd/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://dekrt.cn" target="_blank">dekrt's blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%8A%A5%E5%91%8A-report/">报告 | report</a></div><div class="post_share"><div class="social-share" data-image="https://z1.ax1x.com/2023/12/12/pifVYB4.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechatpay.png" target="_blank"><img class="post-qr-code-img" src="/img/wechatpay.png" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/report/math-modeling/"><img class="prev-cover" src="https://s11.ax1x.com/2024/02/09/pF38iwV.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">数学建模上机实验与大作业报告</div></div></a></div><div class="next-post pull-right"><a href="/report/se-report/"><img class="next-cover" src="https://s1.ax1x.com/2023/07/26/pCjsWb4.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">软件工程课程设计 &amp; 理论课实验报告</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/report/math-modeling/" title="数学建模上机实验与大作业报告"><img class="cover" src="https://s11.ax1x.com/2024/02/09/pF38iwV.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-02-09</div><div class="title">数学建模上机实验与大作业报告</div></div></a></div><div><a href="/report/se-report/" title="软件工程课程设计 & 理论课实验报告"><img class="cover" src="https://s1.ax1x.com/2023/07/26/pCjsWb4.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-07-18</div><div class="title">软件工程课程设计 & 理论课实验报告</div></div></a></div><div><a href="/report/os-report/" title="操作系统实验报告&课程设计"><img class="cover" src="https://s1.ax1x.com/2023/07/26/pCjs4a9.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-07-12</div><div class="title">操作系统实验报告&课程设计</div></div></a></div><div><a href="/report/cpsd/" title="软件设计综合实践实验报告"><img class="cover" src="https://s1.ax1x.com/2023/03/14/pplXRSO.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-03-14</div><div class="title">软件设计综合实践实验报告</div></div></a></div><div><a href="/report/experiment/" title="C语言实验报告"><img class="cover" src="https://s1.ax1x.com/2022/03/10/bhIu6J.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-21</div><div class="title">C语言实验报告</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://s1.ax1x.com/2023/04/14/ppzvSxK.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">dekrt</div><div class="author-info__description">write something casually</div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">25</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/dekrt"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/dekrt" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:dekrt@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://weibo.com/dekrt" target="_blank" title="Weibo"><i class="fab fa-weibo"></i></a><a class="social-icon" href="https://twitter.com/dekrt2" target="_blank" title="Twitter"><i class="fab fa-twitter"></i></a><a class="social-icon" href="https://instagram.com/dekrt" target="_blank" title="Instagram"><i class="fab fa-instagram"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">菜菜，呜呜，捞捞</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">编译原理课程实验报告</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">1. 概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E7%B3%BB%E7%BB%9F%E6%8F%8F%E8%BF%B0"><span class="toc-number">1.2.</span> <span class="toc-text">2. 系统描述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E8%87%AA%E5%AE%9A%E4%B9%89%E8%AF%AD%E8%A8%80%E6%A6%82%E8%BF%B0"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 自定义语言概述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-1-%E8%AE%BE%E8%AE%A1%E7%9B%AE%E7%9A%84%E5%92%8C%E5%BA%94%E7%94%A8%E8%83%8C%E6%99%AF"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">2.1.1 设计目的和应用背景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-2-%E8%AF%AD%E6%B3%95%E5%92%8C%E7%89%B9%E6%80%A7"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">2.1.2 语法和特性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-3-%E7%BC%96%E8%AF%91%E5%99%A8%E8%AE%BE%E8%AE%A1%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">2.1.3 编译器设计的特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-4-%E7%9B%AE%E6%A0%87%E4%BB%A3%E7%A0%81%E6%8C%87%E4%BB%A4%E9%9B%86-MIPS%E6%9E%B6%E6%9E%84"><span class="toc-number">1.2.1.4.</span> <span class="toc-text">2.1.4 目标代码指令集 - MIPS架构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-5-%E8%87%AA%E5%AE%9A%E4%B9%89%E8%AF%AD%E8%A8%80%E6%80%BB%E7%BB%93"><span class="toc-number">1.2.1.5.</span> <span class="toc-text">2.1.5 自定义语言总结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%8D%95%E8%AF%8D%E6%96%87%E6%B3%95%E4%B8%8E%E8%AF%AD%E8%A8%80%E6%96%87%E6%B3%95"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2 单词文法与语言文法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-1-%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%84%EF%BC%88Program-Structure%EF%BC%89"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">2.2.1 程序结构（Program Structure）:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-2-%E5%A4%96%E9%83%A8%E5%AE%9A%E4%B9%89%EF%BC%88External-Definitions%EF%BC%89"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">2.2.2 外部定义（External Definitions）:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-3-%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%A3%B0%E6%98%8E%EF%BC%88Types-and-Declarations%EF%BC%89"><span class="toc-number">1.2.2.3.</span> <span class="toc-text">2.2.3 类型和声明（Types and Declarations）:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-4-%E5%A4%8D%E5%90%88%E8%AF%AD%E5%8F%A5%E5%92%8C%E6%8E%A7%E5%88%B6%E6%B5%81%EF%BC%88Compound-Statements-and-Control-Flow%EF%BC%89"><span class="toc-number">1.2.2.4.</span> <span class="toc-text">2.2.4 复合语句和控制流（Compound Statements and Control Flow）:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-5-%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%88Expressions%EF%BC%89"><span class="toc-number">1.2.2.5.</span> <span class="toc-text">2.2.5 表达式（Expressions）:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-6-BNF%E8%AF%AD%E6%B3%95%E6%8F%8F%E8%BF%B0"><span class="toc-number">1.2.2.6.</span> <span class="toc-text">2.2.6 BNF语法描述</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E7%AC%A6%E5%8F%B7%E8%A1%A8%E7%BB%93%E6%9E%84%E5%AE%9A%E4%B9%89"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3 符号表结构定义</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-1-%E5%9F%BA%E6%9C%AC%E7%AC%A6%E5%8F%B7%E7%BB%93%E6%9E%84%EF%BC%88Symbol-%E7%B1%BB%EF%BC%89"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">2.3.1 基本符号结构（Symbol 类）:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-2-%E5%8F%98%E9%87%8F%E7%AC%A6%E5%8F%B7%EF%BC%88VarSymbol-%E7%B1%BB%EF%BC%89"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">2.3.2 变量符号（VarSymbol 类）:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-3-%E5%87%BD%E6%95%B0%E7%AC%A6%E5%8F%B7%EF%BC%88FuncSymbol-%E7%B1%BB%EF%BC%89"><span class="toc-number">1.2.3.3.</span> <span class="toc-text">2.3.3 函数符号（FuncSymbol 类）:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-4-%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%86%85%E7%9A%84%E7%AC%A6%E5%8F%B7%E8%A1%A8%EF%BC%88SymbolsInAScope-%E7%B1%BB%EF%BC%89"><span class="toc-number">1.2.3.4.</span> <span class="toc-text">2.3.4 作用域内的符号表（SymbolsInAScope 类）:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-5-%E7%AC%A6%E5%8F%B7%E8%A1%A8%E6%A0%88%EF%BC%88SymbolStackDef-%E7%B1%BB%EF%BC%89"><span class="toc-number">1.2.3.5.</span> <span class="toc-text">2.3.5 符号表栈（SymbolStackDef 类）:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-6-%E7%AC%A6%E5%8F%B7%E8%A1%A8%E6%80%BB%E7%BB%93"><span class="toc-number">1.2.3.6.</span> <span class="toc-text">2.3.6 符号表总结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E9%94%99%E8%AF%AF%E7%B1%BB%E5%9E%8B%E7%A0%81%E5%AE%9A%E4%B9%89"><span class="toc-number">1.2.4.</span> <span class="toc-text">2.4 错误类型码定义</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-1-%E9%94%99%E8%AF%AF%E5%AD%98%E5%82%A8%EF%BC%88Errors-%E7%B1%BB%EF%BC%89"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">2.4.1 错误存储（Errors 类）:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-2-%E9%94%99%E8%AF%AF%E6%B7%BB%E5%8A%A0%EF%BC%88ErrorAdd-%E6%96%B9%E6%B3%95%EF%BC%89"><span class="toc-number">1.2.4.2.</span> <span class="toc-text">2.4.2 错误添加（ErrorAdd 方法）:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-3-%E9%94%99%E8%AF%AF%E5%B1%95%E7%A4%BA%EF%BC%88ErrorsDisplay-%E6%96%B9%E6%B3%95%EF%BC%89"><span class="toc-number">1.2.4.3.</span> <span class="toc-text">2.4.3 错误展示（ErrorsDisplay 方法）:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-4-%E9%94%99%E8%AF%AF%E6%A3%80%E6%9F%A5%EF%BC%88IsEmpty-%E6%96%B9%E6%B3%95%EF%BC%89"><span class="toc-number">1.2.4.4.</span> <span class="toc-text">2.4.4 错误检查（IsEmpty 方法）:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-5-%E9%94%99%E8%AF%AF%E7%B1%BB%E5%9E%8B%E6%80%BB%E7%BB%93"><span class="toc-number">1.2.4.5.</span> <span class="toc-text">2.4.5 错误类型总结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-%E4%B8%AD%E9%97%B4%E4%BB%A3%E7%A0%81%E7%BB%93%E6%9E%84%E5%AE%9A%E4%B9%89"><span class="toc-number">1.2.5.</span> <span class="toc-text">2.5 中间代码结构定义</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-1-%E6%93%8D%E4%BD%9C%E6%95%B0%EF%BC%88Opn-%E7%B1%BB%EF%BC%89"><span class="toc-number">1.2.5.1.</span> <span class="toc-text">2.5.1 操作数（Opn 类）:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-2-%E4%B8%AD%E9%97%B4%E4%BB%A3%E7%A0%81%EF%BC%88%E5%9B%9B%E5%85%83%E5%BC%8F%EF%BC%8CIRCode-%E7%B1%BB%EF%BC%89"><span class="toc-number">1.2.5.2.</span> <span class="toc-text">2.5.2 中间代码（四元式，IRCode 类）:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-3-%E5%9B%9B%E5%85%83%E5%BC%8F%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%BA%94%E7%94%A8"><span class="toc-number">1.2.5.3.</span> <span class="toc-text">2.5.3 四元式的表示和应用:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-4-%E4%B8%AD%E9%97%B4%E4%BB%A3%E7%A0%81%E6%80%BB%E7%BB%93"><span class="toc-number">1.2.5.4.</span> <span class="toc-text">2.5.4 中间代码总结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-%E7%9B%AE%E6%A0%87%E4%BB%A3%E7%A0%81%E6%8C%87%E4%BB%A4%E9%9B%86%E9%80%89%E6%8B%A9"><span class="toc-number">1.2.6.</span> <span class="toc-text">2.6 目标代码指令集选择</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-1-RISC-%E8%AE%BE%E8%AE%A1%E7%90%86%E5%BF%B5"><span class="toc-number">1.2.6.1.</span> <span class="toc-text">2.6.1 RISC 设计理念:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-2-%E5%AF%84%E5%AD%98%E5%99%A8%E4%BD%BF%E7%94%A8"><span class="toc-number">1.2.6.2.</span> <span class="toc-text">2.6.2 寄存器使用:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-3-%E6%8C%87%E4%BB%A4%E6%A0%BC%E5%BC%8F"><span class="toc-number">1.2.6.3.</span> <span class="toc-text">2.6.3 指令格式:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-4-%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%89%A7%E8%A1%8C"><span class="toc-number">1.2.6.4.</span> <span class="toc-text">2.6.4 流水线执行:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-5-%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8%E5%92%8C%E4%B8%AD%E6%96%AD%E5%A4%84%E7%90%86"><span class="toc-number">1.2.6.5.</span> <span class="toc-text">2.6.5 系统调用和中断处理:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-6-%E5%BA%94%E7%94%A8%E9%A2%86%E5%9F%9F"><span class="toc-number">1.2.6.6.</span> <span class="toc-text">2.6.6 应用领域:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-7-%E7%9B%AE%E6%A0%87%E4%BB%A3%E7%A0%81%E6%8C%87%E4%BB%A4%E9%9B%86%E6%80%BB%E7%BB%93"><span class="toc-number">1.2.6.7.</span> <span class="toc-text">2.6.7 目标代码指令集总结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.3.</span> <span class="toc-text">3. 系统设计与实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90%E5%99%A8"><span class="toc-number">1.3.1.</span> <span class="toc-text">3.1 词法分析器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-1-%E8%AF%8D%E6%B3%95%E8%A7%84%E5%88%99%E5%AE%9A%E4%B9%89"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">3.1.1 词法规则定义:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-2-%E5%8A%A8%E4%BD%9C%E6%89%A7%E8%A1%8C"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">3.1.2 动作执行:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-3-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="toc-number">1.3.1.3.</span> <span class="toc-text">3.1.3 错误处理:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-4-%E4%BD%8D%E7%BD%AE%E8%B7%9F%E8%B8%AA"><span class="toc-number">1.3.1.4.</span> <span class="toc-text">3.1.4 位置跟踪:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-5-%E6%B3%A8%E9%87%8A%E5%A4%84%E7%90%86"><span class="toc-number">1.3.1.5.</span> <span class="toc-text">3.1.5 注释处理:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-6-lex-l-%E6%BA%90%E4%BB%A3%E7%A0%81"><span class="toc-number">1.3.1.6.</span> <span class="toc-text">3.1.6 lex.l 源代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-7-%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90%E5%99%A8%E6%80%BB%E7%BB%93"><span class="toc-number">1.3.1.7.</span> <span class="toc-text">3.1.7 词法分析器总结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%E5%99%A8"><span class="toc-number">1.3.2.</span> <span class="toc-text">3.2 语法分析器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-1-%E8%AF%AD%E6%B3%95%E8%A7%84%E5%88%99%E5%AE%9A%E4%B9%89"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">3.2.1 语法规则定义:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-2-AST%E8%8A%82%E7%82%B9%E5%88%9B%E5%BB%BA"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">3.2.2 AST节点创建:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-3-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E5%92%8C%E6%81%A2%E5%A4%8D"><span class="toc-number">1.3.2.3.</span> <span class="toc-text">3.2.3 错误处理和恢复:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-4-%E8%AF%AD%E4%B9%89%E5%80%BC%E5%92%8C%E4%BD%8D%E7%BD%AE%E8%B7%9F%E8%B8%AA"><span class="toc-number">1.3.2.4.</span> <span class="toc-text">3.2.4 语义值和位置跟踪:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-5-%E6%93%8D%E4%BD%9C%E7%AC%A6%E4%BC%98%E5%85%88%E7%BA%A7%E5%92%8C%E7%BB%93%E5%90%88%E6%80%A7"><span class="toc-number">1.3.2.5.</span> <span class="toc-text">3.2.5 操作符优先级和结合性:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-6-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%E8%BF%87%E7%A8%8B"><span class="toc-number">1.3.2.6.</span> <span class="toc-text">3.2.6 语法分析过程:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-7-parser-ypp-%E6%BA%90%E4%BB%A3%E7%A0%81"><span class="toc-number">1.3.2.7.</span> <span class="toc-text">3.2.7 parser.ypp 源代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-8-%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%E6%80%BB%E7%BB%93"><span class="toc-number">1.3.2.8.</span> <span class="toc-text">3.2.8 语法分析总结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E7%AC%A6%E5%8F%B7%E8%A1%A8%E7%AE%A1%E7%90%86"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.3 符号表管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-1-%E7%AC%A6%E5%8F%B7%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">3.3.1 符号表结构:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-2-%E7%AC%A6%E5%8F%B7%E8%A1%A8%E6%93%8D%E4%BD%9C"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">3.3.2 符号表操作:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-3-%E7%AC%A6%E5%8F%B7%E8%A1%A8%E7%9A%84%E5%B1%95%E7%A4%BA"><span class="toc-number">1.3.3.3.</span> <span class="toc-text">3.3.3 符号表的展示:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-4-%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E8%A1%A8"><span class="toc-number">1.3.3.4.</span> <span class="toc-text">3.3.4 函数调用表:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-5-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="toc-number">1.3.3.5.</span> <span class="toc-text">3.3.5 错误处理:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-6-%E7%AC%A6%E5%8F%B7%E8%A1%A8%E6%80%BB%E7%BB%93"><span class="toc-number">1.3.3.6.</span> <span class="toc-text">3.3.6 符号表总结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E8%AF%AD%E4%B9%89%E6%A3%80%E6%9F%A5"><span class="toc-number">1.3.4.</span> <span class="toc-text">3.4 语义检查</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-1-%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86%E5%92%8C%E7%9B%AE%E7%9A%84"><span class="toc-number">1.3.4.1.</span> <span class="toc-text">3.4.1 基本原理和目的:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-2-%E9%94%99%E8%AF%AF%E6%A3%80%E6%B5%8B%E4%B8%8E%E6%8A%A5%E5%91%8A"><span class="toc-number">1.3.4.2.</span> <span class="toc-text">3.4.2 错误检测与报告:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-3-%E7%AC%A6%E5%8F%B7%E8%A1%A8%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-number">1.3.4.3.</span> <span class="toc-text">3.4.3 符号表的应用:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-4-%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5"><span class="toc-number">1.3.4.4.</span> <span class="toc-text">3.4.4 类型检查:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-5-%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E5%A4%84%E7%90%86"><span class="toc-number">1.3.4.5.</span> <span class="toc-text">3.4.5 函数调用处理:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-6-%E5%B7%A6%E5%80%BC%E5%92%8C%E5%B8%B8%E9%87%8F%E6%A3%80%E6%9F%A5"><span class="toc-number">1.3.4.6.</span> <span class="toc-text">3.4.6 左值和常量检查:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-7-%E5%BE%AA%E7%8E%AF%E5%92%8C%E5%88%86%E6%94%AF%E8%AF%AD%E5%8F%A5%E9%AA%8C%E8%AF%81"><span class="toc-number">1.3.4.7.</span> <span class="toc-text">3.4.7 循环和分支语句验证:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-8-%E8%BF%94%E5%9B%9E%E8%AF%AD%E5%8F%A5%E6%A3%80%E6%9F%A5"><span class="toc-number">1.3.4.8.</span> <span class="toc-text">3.4.8 返回语句检查:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-9-%E8%AF%AD%E4%B9%89%E6%A3%80%E6%9F%A5%E6%80%BB%E7%BB%93"><span class="toc-number">1.3.4.9.</span> <span class="toc-text">3.4.9 语义检查总结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-%E6%8A%A5%E9%94%99%E5%8A%9F%E8%83%BD"><span class="toc-number">1.3.5.</span> <span class="toc-text">3.5 报错功能</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-1-%E9%94%99%E8%AF%AF%E6%A3%80%E6%B5%8B%E6%9C%BA%E5%88%B6"><span class="toc-number">1.3.5.1.</span> <span class="toc-text">3.5.1 错误检测机制:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-2-%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF%E8%AE%B0%E5%BD%95"><span class="toc-number">1.3.5.2.</span> <span class="toc-text">3.5.2 错误信息记录:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-3-%E9%94%99%E8%AF%AF%E6%8A%A5%E5%91%8A"><span class="toc-number">1.3.5.3.</span> <span class="toc-text">3.5.3 错误报告:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-4-%E9%94%99%E8%AF%AF%E4%B8%8A%E4%B8%8B%E6%96%87%E5%92%8C%E5%AE%9A%E4%BD%8D"><span class="toc-number">1.3.5.4.</span> <span class="toc-text">3.5.4 错误上下文和定位:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-5-%E7%94%A8%E6%88%B7%E5%8F%8B%E5%A5%BD%E7%9A%84%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF"><span class="toc-number">1.3.5.5.</span> <span class="toc-text">3.5.5 用户友好的错误信息:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-6-%E6%8A%A5%E9%94%99%E5%8A%9F%E8%83%BD%E6%80%BB%E7%BB%93"><span class="toc-number">1.3.5.6.</span> <span class="toc-text">3.5.6 报错功能总结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-%E4%B8%AD%E9%97%B4%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90"><span class="toc-number">1.3.6.</span> <span class="toc-text">3.6 中间代码生成</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-1-%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86"><span class="toc-number">1.3.6.1.</span> <span class="toc-text">3.6.1 基本原理:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-2-%E4%B8%B4%E6%97%B6%E5%8F%98%E9%87%8F%E5%92%8C%E6%A0%87%E7%AD%BE%E7%94%9F%E6%88%90"><span class="toc-number">1.3.6.2.</span> <span class="toc-text">3.6.2 临时变量和标签生成:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-3-%E4%B8%AD%E9%97%B4%E4%BB%A3%E7%A0%81%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.3.6.3.</span> <span class="toc-text">3.6.3 中间代码的类型:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-4-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">1.3.6.4.</span> <span class="toc-text">3.6.4 表达式的处理:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-5-%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E5%92%8C%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92"><span class="toc-number">1.3.6.5.</span> <span class="toc-text">3.6.5 函数调用和参数传递:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-6-%E4%B8%AD%E9%97%B4%E4%BB%A3%E7%A0%81%E7%9A%84%E6%98%BE%E7%A4%BA%E5%92%8C%E8%BE%93%E5%87%BA"><span class="toc-number">1.3.6.6.</span> <span class="toc-text">3.6.6 中间代码的显示和输出:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-7-%E4%B8%AD%E9%97%B4%E4%BB%A3%E7%A0%81%E7%94%9F%E4%BA%A7%E6%80%BB%E7%BB%93"><span class="toc-number">1.3.6.7.</span> <span class="toc-text">3.6.7 中间代码生产总结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-%E6%B1%87%E7%BC%96%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90"><span class="toc-number">1.3.7.</span> <span class="toc-text">3.7 汇编代码生成</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-1-%E5%9F%BA%E6%9C%AC%E8%BF%87%E7%A8%8B%EF%BC%9A"><span class="toc-number">1.3.7.1.</span> <span class="toc-text">3.7.1 基本过程：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-2-%E5%8A%A0%E8%BD%BD%E5%92%8C%E5%AD%98%E5%82%A8%E6%93%8D%E4%BD%9C%EF%BC%9A"><span class="toc-number">1.3.7.2.</span> <span class="toc-text">3.7.2 加载和存储操作：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-3-%E5%AF%84%E5%AD%98%E5%99%A8%E4%BD%BF%E7%94%A8%EF%BC%9A"><span class="toc-number">1.3.7.3.</span> <span class="toc-text">3.7.3 寄存器使用：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-4-%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E5%92%8C%E8%BF%94%E5%9B%9E%EF%BC%9A"><span class="toc-number">1.3.7.4.</span> <span class="toc-text">3.7.4 函数调用和返回：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-5-%E6%8E%A7%E5%88%B6%E6%B5%81%E7%A8%8B%EF%BC%9A"><span class="toc-number">1.3.7.5.</span> <span class="toc-text">3.7.5 控制流程：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-7-%E6%B1%87%E7%BC%96%E4%BB%A3%E7%A0%81%E7%9A%84%E7%BB%84%E7%BB%87%E5%92%8C%E8%BE%93%E5%87%BA%EF%BC%9A"><span class="toc-number">1.3.7.6.</span> <span class="toc-text">3.7.7 汇编代码的组织和输出：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-8-%E6%B1%87%E7%BC%96%E4%BB%A3%E7%A0%81%E7%94%9F%E4%BA%A7%E6%80%BB%E7%BB%93"><span class="toc-number">1.3.7.7.</span> <span class="toc-text">3.7.8 汇编代码生产总结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E7%B3%BB%E7%BB%9F%E6%B5%8B%E8%AF%95%E4%B8%8E%E8%AF%84%E4%BB%B7"><span class="toc-number">1.4.</span> <span class="toc-text">4. 系统测试与评价</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B"><span class="toc-number">1.4.1.</span> <span class="toc-text">4.1 测试用例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-1-%E5%9F%BA%E6%9C%AC%E6%B5%8B%E8%AF%95%EF%BC%9A"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">4.1.1 基本测试：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-2-%E5%A4%8D%E6%9D%82%E5%8A%9F%E8%83%BD%E6%B5%8B%E8%AF%95%EF%BC%9A"><span class="toc-number">1.4.1.2.</span> <span class="toc-text">4.1.2 复杂功能测试：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-3-%E9%9B%86%E6%88%90%E6%B5%8B%E8%AF%95%EF%BC%9A"><span class="toc-number">1.4.1.3.</span> <span class="toc-text">4.1.3 集成测试：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E6%AD%A3%E7%A1%AE%E6%80%A7%E6%B5%8B%E8%AF%95"><span class="toc-number">1.4.2.</span> <span class="toc-text">4.2 正确性测试</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-1-%E7%AC%A6%E5%8F%B7%E8%A1%A8%E4%B8%8E%E8%AF%AD%E6%B3%95%E6%A0%91%EF%BC%9A"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">4.2.1 符号表与语法树：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#fibo-c"><span class="toc-number">1.4.2.1.1.</span> <span class="toc-text">fibo.c</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#array-c"><span class="toc-number">1.4.2.1.2.</span> <span class="toc-text">array.c</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#quicksort-c"><span class="toc-number">1.4.2.1.3.</span> <span class="toc-text">quicksort.c</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-2-%E4%B8%AD%E9%97%B4%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%EF%BC%9A"><span class="toc-number">1.4.2.2.</span> <span class="toc-text">4.2.2 中间代码生成：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#fibo-ir"><span class="toc-number">1.4.2.2.1.</span> <span class="toc-text">fibo.ir</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#array-ir"><span class="toc-number">1.4.2.2.2.</span> <span class="toc-text">array.ir</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#quicksort-ir"><span class="toc-number">1.4.2.2.3.</span> <span class="toc-text">quicksort.ir</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-3-%E7%9B%AE%E6%A0%87%E4%BB%A3%E7%A0%81%E7%9A%84%E6%89%A7%E8%A1%8C%EF%BC%9A"><span class="toc-number">1.4.2.3.</span> <span class="toc-text">4.2.3 目标代码的执行：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#fibo-c-1"><span class="toc-number">1.4.2.3.1.</span> <span class="toc-text">fibo.c</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#array-c-1"><span class="toc-number">1.4.2.3.2.</span> <span class="toc-text">array.c</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#quicksort-c-1"><span class="toc-number">1.4.2.3.3.</span> <span class="toc-text">quicksort.c</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E6%8A%A5%E9%94%99%E5%8A%9F%E8%83%BD%E6%B5%8B%E8%AF%95"><span class="toc-number">1.4.3.</span> <span class="toc-text">4.3 报错功能测试</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-1-%E6%A6%82%E8%BF%B0"><span class="toc-number">1.4.3.1.</span> <span class="toc-text">4.3.1 概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-2-%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%A0%81-error-c"><span class="toc-number">1.4.3.2.</span> <span class="toc-text">4.3.2 测试代码 error.c</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-3-%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C"><span class="toc-number">1.4.3.3.</span> <span class="toc-text">4.3.3 运行结果</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-%E7%B3%BB%E7%BB%9F%E7%9A%84%E4%BC%98%E7%82%B9"><span class="toc-number">1.4.4.</span> <span class="toc-text">4.4 系统的优点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%BC%BA%E7%82%B9"><span class="toc-number">1.4.5.</span> <span class="toc-text">4.5 系统的缺点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%AE%9E%E9%AA%8C%E5%B0%8F%E7%BB%93%E4%B8%8E%E4%BD%93%E4%BC%9A"><span class="toc-number">1.5.</span> <span class="toc-text">5. 实验小结与体会</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E5%AF%B9%E7%BC%96%E8%AF%91%E5%99%A8%E5%90%84%E4%B8%AA%E9%98%B6%E6%AE%B5%E7%9A%84%E7%90%86%E8%A7%A3%E5%8A%A0%E6%B7%B1"><span class="toc-number">1.5.1.</span> <span class="toc-text">5.1 对编译器各个阶段的理解加深</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E7%BC%96%E7%A0%81%E5%AE%9E%E8%B7%B5%E4%B8%8E%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E8%83%BD%E5%8A%9B%E7%9A%84%E6%8F%90%E5%8D%87"><span class="toc-number">1.5.2.</span> <span class="toc-text">5.2 编码实践与问题解决能力的提升</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E7%B3%BB%E7%BB%9F%E6%B5%8B%E8%AF%95%E7%9A%84%E9%87%8D%E8%A6%81%E6%80%A7"><span class="toc-number">1.5.3.</span> <span class="toc-text">5.3 系统测试的重要性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-%E5%AF%B9%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E6%95%B4%E4%BD%93%E8%AE%A4%E8%AF%86%E7%9A%84%E6%8F%90%E5%8D%87"><span class="toc-number">1.5.4.</span> <span class="toc-text">5.4 对编译原理整体认识的提升</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-%E6%B7%B1%E5%8C%96%E7%90%86%E8%AE%BA%E7%9F%A5%E8%AF%86%EF%BC%8C%E6%BF%80%E5%8F%91%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%AD%A6%E4%B9%A0%E7%9A%84%E5%85%B4%E8%B6%A3"><span class="toc-number">1.5.5.</span> <span class="toc-text">5.5 深化理论知识，激发进一步学习的兴趣</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"><span class="toc-number">1.6.</span> <span class="toc-text">6. 参考文献</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/report/math-modeling/" title="数学建模上机实验与大作业报告"><img src="https://s11.ax1x.com/2024/02/09/pF38iwV.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数学建模上机实验与大作业报告"/></a><div class="content"><a class="title" href="/report/math-modeling/" title="数学建模上机实验与大作业报告">数学建模上机实验与大作业报告</a><time datetime="2024-02-09T07:41:13.000Z" title="发表于 2024-02-09 15:41:13">2024-02-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/report/ccd/" title="编译原理课程实验报告"><img src="https://z1.ax1x.com/2023/12/12/pifVYB4.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="编译原理课程实验报告"/></a><div class="content"><a class="title" href="/report/ccd/" title="编译原理课程实验报告">编译原理课程实验报告</a><time datetime="2023-12-12T12:09:46.000Z" title="发表于 2023-12-12 20:09:46">2023-12-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/report/se-report/" title="软件工程课程设计 &amp; 理论课实验报告"><img src="https://s1.ax1x.com/2023/07/26/pCjsWb4.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="软件工程课程设计 &amp; 理论课实验报告"/></a><div class="content"><a class="title" href="/report/se-report/" title="软件工程课程设计 &amp; 理论课实验报告">软件工程课程设计 &amp; 理论课实验报告</a><time datetime="2023-07-18T03:09:40.000Z" title="发表于 2023-07-18 11:09:40">2023-07-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/report/os-report/" title="操作系统实验报告&amp;课程设计"><img src="https://s1.ax1x.com/2023/07/26/pCjs4a9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="操作系统实验报告&amp;课程设计"/></a><div class="content"><a class="title" href="/report/os-report/" title="操作系统实验报告&amp;课程设计">操作系统实验报告&amp;课程设计</a><time datetime="2023-07-12T03:43:44.000Z" title="发表于 2023-07-12 11:43:44">2023-07-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/tutorial/maike/" title="安全教育刷课教程"><img src="https://s1.ax1x.com/2023/04/14/ppzT0Vx.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="安全教育刷课教程"/></a><div class="content"><a class="title" href="/tutorial/maike/" title="安全教育刷课教程">安全教育刷课教程</a><time datetime="2023-04-14T08:04:24.000Z" title="发表于 2023-04-14 16:04:24">2023-04-14</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://z1.ax1x.com/2023/12/12/pifVYB4.png')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2024 By dekrt</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">你是宇宙中恰好相遇的浪漫</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">本地搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.2
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container:not\([display]\)').forEach(node => {
            const target = node.parentNode
            if (target.nodeName.toLowerCase() === 'li') {
              target.parentNode.classList.add('has-jax')
            } else {
              target.classList.add('has-jax')
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: '919vOTDx94zr39dk7GN8V5oO-gzGzoHsz',
      appKey: 'SNQo190ERObk522PearaqLyG',
      avatar: 'mp',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>